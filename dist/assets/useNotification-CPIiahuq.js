import{A as he,_ as O}from"./useSize-Bsl6vdet.js";import{e as H,_ as $,c as q,f as ee,h as ke,d as j,b as Ee}from"./AntdIcon-Dp66s4Tk.js";import{r as i,R as G,k as xe}from"./index-0Fw_r0Z0.js";import{K as Se}from"./KeyCode-30mCtAmk.js";var Re=i.forwardRef(function(e,r){var l=e.prefixCls,f=e.style,s=e.className,u=e.duration,y=u===void 0?4.5:u,_=e.eventKey,R=e.content,L=e.closable,P=e.closeIcon,p=P===void 0?"x":P,d=e.props,C=e.onClick,v=e.onNoticeClose,b=e.times,h=e.hovering,m=i.useState(!1),M=H(m,2),x=M[0],k=M[1],N=h||x,E=function(){v(_)},c=function(t){(t.key==="Enter"||t.code==="Enter"||t.keyCode===Se.ENTER)&&E()};i.useEffect(function(){if(!N&&y>0){var n=setTimeout(function(){E()},y*1e3);return function(){clearTimeout(n)}}},[y,N,b]);var o="".concat(l,"-notice");return i.createElement("div",$({},d,{ref:r,className:q(o,s,ee({},"".concat(o,"-closable"),L)),style:f,onMouseEnter:function(t){var a;k(!0),d==null||(a=d.onMouseEnter)===null||a===void 0||a.call(d,t)},onMouseLeave:function(t){var a;k(!1),d==null||(a=d.onMouseLeave)===null||a===void 0||a.call(d,t)},onClick:C}),i.createElement("div",{className:"".concat(o,"-content")},R),L&&i.createElement("a",{tabIndex:0,className:"".concat(o,"-close"),onKeyDown:c,onClick:function(t){t.preventDefault(),t.stopPropagation(),E()}},p))}),le=G.createContext({}),Te=function(r){var l=r.children,f=r.classNames;return G.createElement(le.Provider,{value:{classNames:f}},l)},re=8,ie=3,ce=16,Ae=function(r){var l={offset:re,threshold:ie,gap:ce};if(r&&ke(r)==="object"){var f,s,u;l.offset=(f=r.offset)!==null&&f!==void 0?f:re,l.threshold=(s=r.threshold)!==null&&s!==void 0?s:ie,l.gap=(u=r.gap)!==null&&u!==void 0?u:ce}return[!!r,l]},Le=function(r){var l,f=r.configList,s=r.placement,u=r.prefixCls,y=r.className,_=r.style,R=r.motion,L=r.onAllNoticeRemoved,P=r.onNoticeClose,p=r.stack,d=i.useContext(le),C=d.classNames,v=i.useRef({}),b=i.useState(null),h=H(b,2),m=h[0],M=h[1],x=i.useState([]),k=H(x,2),N=k[0],E=k[1],c=f.map(function(g){return{config:g,key:g.key}}),o=Ae(p),n=H(o,2),t=n[0],a=n[1],S=a.offset,K=a.threshold,w=a.gap,D=t&&(N.length>0||c.length<=K),ue=typeof R=="function"?R(s):R;return i.useEffect(function(){t&&N.length>1&&E(function(g){return g.filter(function(I){return c.some(function(F){var z=F.key;return I===z})})})},[N,c,t]),i.useEffect(function(){var g;if(t&&v.current[(g=c[c.length-1])===null||g===void 0?void 0:g.key]){var I;M(v.current[(I=c[c.length-1])===null||I===void 0?void 0:I.key])}},[c,t]),G.createElement(he,$({key:s,className:q(u,"".concat(u,"-").concat(s),C==null?void 0:C.list,y,(l={},ee(l,"".concat(u,"-stack"),!!t),ee(l,"".concat(u,"-stack-expanded"),D),l)),style:_,keys:c,motionAppear:!0},ue,{onAllRemoved:function(){L(s)}}),function(g,I){var F=g.config,z=g.className,fe=g.style,ve=g.index,te=F,A=te.key,de=te.times,ne=F,me=ne.className,ye=ne.style,B=c.findIndex(function(Q){return Q.key===A}),U={};if(t){var W=c.length-1-(B>-1?B:ve-1),oe=s==="top"||s==="bottom"?"-50%":"0";if(W>0){var J,V,X;U.height=D?(J=v.current[A])===null||J===void 0?void 0:J.offsetHeight:m==null?void 0:m.offsetHeight;for(var ae=0,Y=0;Y<W;Y++){var Z;ae+=((Z=v.current[c[c.length-1-Y].key])===null||Z===void 0?void 0:Z.offsetHeight)+w}var Ce=(D?ae:W*S)*(s.startsWith("top")?1:-1),Ne=!D&&m!==null&&m!==void 0&&m.offsetWidth&&(V=v.current[A])!==null&&V!==void 0&&V.offsetWidth?((m==null?void 0:m.offsetWidth)-S*2*(W<3?W:3))/((X=v.current[A])===null||X===void 0?void 0:X.offsetWidth):1;U.transform="translate3d(".concat(oe,", ").concat(Ce,"px, 0) scaleX(").concat(Ne,")")}else U.transform="translate3d(".concat(oe,", 0, 0)")}return G.createElement("div",{ref:I,className:q("".concat(u,"-notice-wrapper"),z),style:j(j(j({},fe),U),ye),onMouseEnter:function(){return E(function(T){return T.includes(A)?T:[].concat(O(T),[A])})},onMouseLeave:function(){return E(function(T){return T.filter(function(ge){return ge!==A})})}},G.createElement(Re,$({},F,{ref:function(T){B>-1?v.current[A]=T:delete v.current[A]},prefixCls:u,className:q(me,C==null?void 0:C.notice),times:de,key:A,eventKey:A,onNoticeClose:P,hovering:t&&N.length>0})))})},_e=i.forwardRef(function(e,r){var l=e.prefixCls,f=l===void 0?"rc-notification":l,s=e.container,u=e.motion,y=e.maxCount,_=e.className,R=e.style,L=e.onAllRemoved,P=e.stack,p=e.renderNotifications,d=i.useState([]),C=H(d,2),v=C[0],b=C[1],h=function(n){var t,a=v.find(function(S){return S.key===n});a==null||(t=a.onClose)===null||t===void 0||t.call(a),b(function(S){return S.filter(function(K){return K.key!==n})})};i.useImperativeHandle(r,function(){return{open:function(n){b(function(t){var a=O(t),S=a.findIndex(function(D){return D.key===n.key}),K=j({},n);if(S>=0){var w;K.times=(((w=t[S])===null||w===void 0?void 0:w.times)||0)+1,a[S]=K}else K.times=0,a.push(K);return y>0&&a.length>y&&(a=a.slice(-y)),a})},close:function(n){h(n)},destroy:function(){b([])}}});var m=i.useState({}),M=H(m,2),x=M[0],k=M[1];i.useEffect(function(){var o={};v.forEach(function(n){var t=n.placement,a=t===void 0?"topRight":t;a&&(o[a]=o[a]||[],o[a].push(n))}),Object.keys(x).forEach(function(n){o[n]=o[n]||[]}),k(o)},[v]);var N=function(n){k(function(t){var a=j({},t),S=a[n]||[];return S.length||delete a[n],a})},E=i.useRef(!1);if(i.useEffect(function(){Object.keys(x).length>0?E.current=!0:E.current&&(L==null||L(),E.current=!1)},[x]),!s)return null;var c=Object.keys(x);return xe.createPortal(i.createElement(i.Fragment,null,c.map(function(o){var n=x[o],t=i.createElement(Le,{key:o,configList:n,placement:o,prefixCls:f,className:_==null?void 0:_(o),style:R==null?void 0:R(o),motion:u,onNoticeClose:h,onAllNoticeRemoved:N,stack:P});return p?p(t,{prefixCls:f,key:o}):t})),s)}),be=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Me=function(){return document.body},se=0;function Pe(){for(var e={},r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return l.forEach(function(s){s&&Object.keys(s).forEach(function(u){var y=s[u];y!==void 0&&(e[u]=y)})}),e}function De(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.getContainer,l=r===void 0?Me:r,f=e.motion,s=e.prefixCls,u=e.maxCount,y=e.className,_=e.style,R=e.onAllRemoved,L=e.stack,P=e.renderNotifications,p=Ee(e,be),d=i.useState(),C=H(d,2),v=C[0],b=C[1],h=i.useRef(),m=i.createElement(_e,{container:v,ref:h,prefixCls:s,motion:f,maxCount:u,className:y,style:_,onAllRemoved:R,stack:L,renderNotifications:P}),M=i.useState([]),x=H(M,2),k=x[0],N=x[1],E=i.useMemo(function(){return{open:function(o){var n=Pe(p,o);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(se),se+=1),N(function(t){return[].concat(O(t),[{type:"open",config:n}])})},close:function(o){N(function(n){return[].concat(O(n),[{type:"close",key:o}])})},destroy:function(){N(function(o){return[].concat(O(o),[{type:"destroy"}])})}}},[]);return i.useEffect(function(){b(l())}),i.useEffect(function(){h.current&&k.length&&(k.forEach(function(c){switch(c.type){case"open":h.current.open(c.config);break;case"close":h.current.close(c.key);break;case"destroy":h.current.destroy();break}}),N(function(c){return c.filter(function(o){return!k.includes(o)})}))},[k]),[E,m]}export{Re as N,Te as a,De as u};
