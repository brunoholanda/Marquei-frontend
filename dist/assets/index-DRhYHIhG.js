import{e as f,j as e,r,c as I}from"./index-CNAW3eq3.js";import{M as L}from"./index-D1_O_0Vz.js";import{B as u}from"./context-dvodvhd4.js";import{I as b}from"./index-BdZwxmcX.js";import{m as h}from"./index-BfLTes4p.js";import{L as y}from"./LinkOutlined-CecU09gH.js";import{S as D}from"./styles-hoo4sR0Q.js";import{R as N,B,X as P,Y as R}from"./BarChart-C5DeHyEf.js";import{y as w,B as A}from"./generateCategoricalChart-JCvRa-ny.js";import{T as O}from"./Table-CK-GIGCW.js";import{L as T}from"./LineChartOutlined-Btotg3uI.js";import{C as x}from"./CheckOutlined-BmRh5aFk.js";import"./useSize-zNFkUmnO.js";import"./AntdIcon-BGp71K7u.js";import"./Serializer-CQbcCsmu.js";import"./render-BV6mHij8.js";import"./ExclamationCircleFilled-CIJGRYBD.js";import"./InfoCircleFilled-B20eU8OV.js";import"./index-91MMm8di.js";import"./KeyCode-BfOxs3zp.js";import"./PurePanel-zdfJd6bP.js";import"./useLocale-DrB7vlH5.js";import"./index-DPkEw2AG.js";import"./SearchOutlined-BqMw0g9J.js";import"./useNotification-KqZwggrl.js";import"./styled-components.browser.esm-Dpe2mTWd.js";import"./debounce-DR92O5gF.js";import"./index-EU4tcXRS.js";import"./index-B1nCgeeC.js";import"./Overflow-rQDOYPcw.js";import"./useForceUpdate-CsfC1x5U.js";import"./responsiveObserver-lvPprBgq.js";import"./index-CygT_FVY.js";import"./EllipsisOutlined-DxL7gXpC.js";import"./index-vPjO4Z7k.js";import"./index-DdOCm7yX.js";import"./index-CXvkStUu.js";import"./Dropdown-Oe3lk_DR.js";import"./index-0zhoecpu.js";const M=({isResearchModalVisible:c,onResearchModalClose:t})=>{const{authData:a}=f(),m=a.companyID,o=()=>`${window.location.origin}/#/pesquisa-satisfacao/${m}`,s=()=>{navigator.clipboard.writeText(o()).then(()=>{h.success("Link copiado para a área de transferência!"),t()}).catch(p=>{h.error("Falha ao copiar o link."),console.error("Erro ao copiar o link:",p)})};return e.jsxs(L,{title:"Link da pesquisa para seus clientes !",open:c,onOk:s,onCancel:t,footer:[e.jsx(u,{type:"primary",onClick:s,children:"Copiar Link"},"copy"),e.jsx(u,{onClick:t,children:"Fechar"},"close")],children:[e.jsx("p",{children:"O link a seguir pode ser compartilhado com seus clientes para que eles realizem uma pesquisa de satisfação na escala NPS."}),e.jsxs("p",{children:[e.jsx(y,{})," Copie e compartilhe este link com seus clientes:"]}),e.jsx("p",{style:{color:"red"},children:"Caso queira o envio automático do link, contrate o Plano Premium."}),e.jsx(b,{value:o(),readOnly:!0})]})},E="/assets/nps-ByNDzI_O.png";function qe(){const[c,t]=r.useState([]),[a,m]=r.useState(0),[o,s]=r.useState(!1),{authData:p}=f(),l=p.companyID,j=r.useRef(null),g=({customers:d})=>{const i=[{title:"Nome do Cliente",dataIndex:"nome",key:"nome"},{title:"Telefone",dataIndex:"telefone",key:"telefone"},{title:"Nota",dataIndex:"nota",key:"nota"}];return e.jsx(O,{dataSource:d,columns:i,pagination:{pageSize:5}})};r.useEffect(()=>{(async()=>{try{const n=(await I.get(`nps-systems?company_id=${l}`)).data;t(n);const S=n.reduce((v,q)=>v+q.nota,0);m(n.length>0?S/n.length:0)}catch(i){console.error("There was an error fetching the customer data:",i)}})()},[l]);const k=[{name:"Média",value:a}],C=a<=6.5?"#ee3557":a<=8.5?"#58b4af":"#8ec63d";return e.jsxs(D,{children:[e.jsxs("h2",{children:["NPS: A métrica que sua clínica precisa para reter clientes ",e.jsx(T,{})]}),e.jsxs("p",{children:[e.jsx(x,{})," No botão abaixo você pode compartilhar o link da pesquisa com seus clientes."]}),e.jsxs("p",{children:[e.jsx(x,{})," Se você é um cliente Premiuim a pesquisa será enviada automaticamente"]}),e.jsxs(u,{style:{marginBottom:"50px"},type:"primary",onClick:()=>s(!0),children:[e.jsx(y,{})," Gerar Link da Pesquisa."]}),e.jsx("h3",{children:"Aqui está sua nota na escala NPS:"}),e.jsx("img",{src:E,alt:"escala nps com carinhas",ref:j,style:{width:"80%",height:"auto",margin:"1rem auto"}}),e.jsx("div",{style:{width:"80%",height:"110px",margin:"1rem auto"},children:e.jsx(N,{children:e.jsxs(B,{data:k,layout:"vertical",children:[e.jsx(P,{type:"number",domain:[0,10]}),e.jsx(R,{type:"category",dataKey:"name"}),e.jsx(w,{}),e.jsx(A,{dataKey:"value",fill:C})]})})}),e.jsx("h3",{children:"Aqui está os clientes que avaliaram:"}),e.jsx(g,{customers:c}),o&&e.jsx(M,{isResearchModalVisible:o,onResearchModalClose:()=>s(!1),companyID:l})]})}export{qe as default};
