import{r as s,e as te,j as i,c as A,L as oe}from"./index-BejUs57K.js";import{h as N}from"./moment-gy9AvL1k.js";/* empty css                     */import{S as re,A as ne}from"./ScheduleModal-DiwKZ05a.js";import{C as D}from"./index-CD0J_46m.js";import{S as ae}from"./ScheduleOutlined-DTh2bygo.js";import{S as T}from"./index-DHdX90EX.js";import{D as ie}from"./index-v56yy83D.js";import{c as H,A as W,_}from"./AntdIcon-DoQ--mR6.js";import{B as k}from"./context-B7EqC6Vo.js";import{P as se}from"./PlusOutlined-BS2XjjG4.js";import{T as le}from"./Table-B0LRilDu.js";import{M as ce}from"./index-BdGlfXDG.js";import{m as b}from"./index-D-SSOORw.js";import{g as de}from"./index-DxMt6mpZ.js";import{g as me,m as pe,r as ue,C as R}from"./useSize-CRxPdOae.js";import{i as fe,g as he,P as ge,a as xe,T as P}from"./index-qNXZvFLH.js";import{E as ve}from"./ExclamationCircleOutlined-3-0Cq7iX.js";import{C as ye}from"./CheckCircleOutlined-cvgjTou-.js";import{C as Ce}from"./CloseCircleOutlined-B-jQ06hO.js";import"./Styles-D8I0Z3_Q.js";import"./styled-components.browser.esm-BDisp2Ny.js";import"./Serializer-CQbcCsmu.js";import"./index-DSQYWx6w.js";import"./render-CZhUZhp8.js";import"./row-0GtaHct3.js";import"./responsiveObserver-C1kZbN31.js";import"./useLocale-CC7fmsIl.js";import"./ExclamationCircleFilled-BIgSFzZP.js";import"./index-cvZCd3Op.js";import"./SearchOutlined-CMcZmJPM.js";import"./index-DxaFO5T4.js";import"./PurePanel-CuzpRnpP.js";import"./index-ClsOuQ27.js";import"./KeyCode-D4p1xH96.js";import"./InfoCircleFilled-D2xAbk3M.js";import"./useNotification-Bpa0q6dt.js";import"./index-Bza3Mhft.js";import"./Holidays-Bo2DEv3N.js";import"./cjs-D_7DH1by.js";import"./registerModal-Bp3v9BGU.js";import"./index-Bh236Q5o.js";import"./index-0966CjeA.js";import"./commonMailDomains-C8uuVB4t.js";import"./WarningOutlined-Cj51580d.js";import"./index-DZHIozRW.js";import"./AuthModal-CnKX-FVV.js";import"./index-Dcj4oQbQ.js";import"./index-Bjjdu_Qn.js";import"./ReCAPTCHAUtil-C7BvWI6n.js";import"./index-CfPvBrCp.js";import"./AddClientsModal-Bm9nRM6J.js";import"./index-9e_Hasjs.js";import"./index-DSRduNhO.js";import"./index-CTZ9fw7d.js";import"./Overflow-KqVdY2pe.js";import"./CheckOutlined-B64fgD7x.js";import"./CalendarOutlined-BkHhpkn_.js";import"./ClockCircleOutlined-C2xYg_xp.js";import"./useForceUpdate-BzwSizY0.js";import"./index-CSSBfqr0.js";import"./EllipsisOutlined-DcztSy7B.js";import"./Dropdown-CqyrE61n.js";const w=e=>e?typeof e=="function"?e():e:null,Se=e=>{const{componentCls:t,popoverColor:r,titleMinWidth:o,fontWeightStrong:n,popoverPadding:d,boxShadowSecondary:m,colorTextHeading:p,borderRadiusLG:u,zIndexPopup:f,marginXS:h,colorBgElevated:g,popoverBg:l}=e;return[{[t]:Object.assign(Object.assign({},ue(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:f,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":g,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:l,backgroundClip:"padding-box",borderRadius:u,boxShadow:m,padding:d},[`${t}-title`]:{minWidth:o,marginBottom:h,color:p,fontWeight:n},[`${t}-inner-content`]:{color:r}})},he(e,{colorBg:"var(--antd-arrow-background-color)"}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},be=e=>{const{componentCls:t}=e;return{[t]:ge.map(r=>{const o=e[`${r}6`];return{[`&${t}-${r}`]:{"--antd-arrow-background-color":o,[`${t}-inner`]:{backgroundColor:o},[`${t}-arrow`]:{background:"transparent"}}}})}},je=e=>{const{componentCls:t,lineWidth:r,lineType:o,colorSplit:n,paddingSM:d,controlHeight:m,fontSize:p,lineHeight:u,padding:f}=e,h=m-Math.round(p*u),g=h/2,l=h/2-r,x=f;return{[t]:{[`${t}-inner`]:{padding:0},[`${t}-title`]:{margin:0,padding:`${g}px ${x}px ${l}px`,borderBottom:`${r}px ${o} ${n}`},[`${t}-inner-content`]:{padding:`${d}px ${x}px`}}}},V=me("Popover",e=>{const{colorBgElevated:t,colorText:r,wireframe:o}=e,n=pe(e,{popoverPadding:12,popoverBg:t,popoverColor:r});return[Se(n),be(n),o&&je(n),fe(n,"zoom-big")]},e=>({width:177,minWidth:177,titleMinWidth:177,zIndexPopup:e.zIndexPopupBase+30}),{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Pe=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r};const Oe=(e,t,r)=>{if(!(!t&&!r))return s.createElement(s.Fragment,null,t&&s.createElement("div",{className:`${e}-title`},w(t)),s.createElement("div",{className:`${e}-inner-content`},w(r)))},ke=e=>{const{hashId:t,prefixCls:r,className:o,style:n,placement:d="top",title:m,content:p,children:u}=e;return s.createElement("div",{className:H(t,r,`${r}-pure`,`${r}-placement-${d}`,o),style:n},s.createElement("div",{className:`${r}-arrow`}),s.createElement(xe,Object.assign({},e,{className:t,prefixCls:r}),u||Oe(r,m,p)))},we=e=>{const{prefixCls:t}=e,r=Pe(e,["prefixCls"]),{getPrefixCls:o}=s.useContext(R),n=o("popover",t),[d,m]=V(n);return d(s.createElement(ke,Object.assign({},r,{prefixCls:n,hashId:m})))},$e=we;var Ee=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r};const Me=e=>{let{title:t,content:r,prefixCls:o}=e;return s.createElement(s.Fragment,null,t&&s.createElement("div",{className:`${o}-title`},w(t)),s.createElement("div",{className:`${o}-inner-content`},w(r)))},L=s.forwardRef((e,t)=>{const{prefixCls:r,title:o,content:n,overlayClassName:d,placement:m="top",trigger:p="hover",mouseEnterDelay:u=.1,mouseLeaveDelay:f=.1,overlayStyle:h={}}=e,g=Ee(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:l}=s.useContext(R),x=l("popover",r),[$,O]=V(x),y=l(),j=H(d,O);return $(s.createElement(P,Object.assign({placement:m,trigger:p,mouseEnterDelay:u,mouseLeaveDelay:f,overlayStyle:h},g,{prefixCls:x,overlayClassName:j,ref:t,overlay:o||n?s.createElement(Me,{prefixCls:x,title:o,content:n}):null,transitionName:de(y,"zoom-big",g.transitionName),"data-popover-inject":!0})))});L._InternalPanelDoNotUseOrYouWillBeFired=$e;const Ae=L;var Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};const Ie=Be;var Ne=function(t,r){return s.createElement(W,_({},t,{ref:r,icon:Ie}))};const z=s.forwardRef(Ne);var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h360c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H184V184h656v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM653.3 599.4l52.2-52.2a8.01 8.01 0 00-4.7-13.6l-179.4-21c-5.1-.6-9.5 3.7-8.9 8.9l21 179.4c.8 6.6 8.9 9.4 13.6 4.7l52.4-52.4 256.2 256.2c3.1 3.1 8.2 3.1 11.3 0l42.4-42.4c3.1-3.1 3.1-8.2 0-11.3L653.3 599.4z"}}]},name:"select",theme:"outlined"};const Te=De;var ze=function(t,r){return s.createElement(W,_({},t,{ref:r,icon:Te}))};const He=s.forwardRef(ze),Kt=()=>{const[e,t]=s.useState([]),[r,o]=s.useState(!1),[n,d]=s.useState(null),[m,p]=s.useState(!1),[u,f]=s.useState(""),[h,g]=s.useState([]),[l,x]=s.useState(null),[$,O]=s.useState(!1),{authData:y}=te(),j=y.companyID,C=async(a,c)=>{if(!c){b.error("Por favor, selecione um profissional primeiro.");return}o(!0);try{const v=a.format("DD/MM/YYYY"),S=await A.get("/agendamentos",{params:{data:v,professional_id:c}});t(S.data),o(!1)}catch(v){console.error("Erro ao buscar agendamentos",v),b.error("Erro ao buscar agendamentos"),o(!1)}};s.useEffect(()=>{(async()=>{if(j&&y.authToken)try{const c=await A.get(`/professionals?company_id=${j}`,{headers:{Authorization:`Bearer ${y.authToken}`}});if(c.status!==200)throw new Error("Falha ao buscar dados dos profissionais");const S=D.AES.decrypt(c.data,"%A0533266q6td9g*"),ee=JSON.parse(S.toString(D.enc.Utf8));g(ee)}catch(c){console.error("Error fetching professionals:",c)}else console.error("Company ID or auth token not found in local storage")})()},[j,y.authToken]);const Y=a=>{x(a),n&&C(n,a)};s.useEffect(()=>{l&&n&&C(n,l)},[l,n]);const F=a=>{d(a),l&&C(a,l)},[q,E]=s.useState(!1),[B,M]=s.useState(null),J=a=>{M(a),E(!0)},I=a=>{M(a),f(a.infoadicional||""),p(!0)},K=async()=>{if(!u){b.error("O campo de informações adicionais está vazio.");return}try{const a=await A.put(`/agendamentos/${B.id}`,{infoadicional:u});a.data&&a.data.success?(b.success("Informação adicional salva com sucesso!"),C(n,l)):b.error("Erro ao salvar a informação adicional.")}catch(a){console.error("Erro ao salvar a informação adicional",a),b.error("Erro ao salvar a informação adicional")}p(!1)},U=()=>{p(!1),f("")},G=(a,c)=>{const v=N(a.horario,"HH:mm"),S=N(c.horario,"HH:mm");return v.isBefore(S)?-1:v.isAfter(S)?1:0},X=[{title:"Nome",dataIndex:"nome",key:"nome",render:(a,c)=>i.jsx(Ae,{content:i.jsxs("div",{className:"baloom",children:[i.jsx("div",{children:i.jsx(P,{children:i.jsx(k,{type:"primary",style:{marginRight:8},onClick:()=>J(c),children:"Confirmar/Reagendar"})})}),i.jsxs("div",{children:[i.jsx(P,{children:i.jsx(oe,{to:`/client-details/${c.id}`,style:{marginRight:8},children:i.jsxs(k,{type:"primary",onClick:()=>I(c),children:[i.jsx(z,{}),"Sobre"]})})}),i.jsx(P,{title:"Informações Adicionais",children:i.jsx(k,{type:"link",icon:i.jsx(z,{}),onClick:()=>I(c)})})]})]}),trigger:"hover",children:i.jsx("span",{children:a})})},{title:"Status",dataIndex:"status",key:"status",render:a=>i.jsx(P,{title:a===null?"Pendente":a===1?"Confirmado":"Cancelado",children:a===null?i.jsx(ve,{style:{color:"orange"}}):a===1?i.jsx(ye,{style:{color:"green"}}):i.jsx(Ce,{style:{color:"red"}})})},{title:"Data",dataIndex:"data",key:"data"},{title:"Horário",dataIndex:"horario",key:"horario"},{title:"Convenio",dataIndex:"planodental",key:"planoDental"},{title:"Contato",dataIndex:"celular",key:"celular"},{title:"Motivo",dataIndex:"motivo",key:"motivo"}],Z=()=>{C(l)},Q=()=>{E(!1),M(null),C(n,l)};return i.jsxs("div",{className:"tabela",children:[i.jsxs("h1",{children:["Agendamentos Por Tabela ",i.jsx(ae,{})]}),i.jsxs("div",{className:"",children:[i.jsx(T,{showSearch:!0,style:{width:"30%"},placeholder:"Selecione um profissional",optionFilterProp:"children",onChange:Y,filterOption:(a,c)=>c.children.toLowerCase().includes(a.toLowerCase()),value:l,children:h.map(a=>i.jsx(T.Option,{value:a.id,children:a.nome},a.id))}),i.jsx("h3",{children:"Selecione a data desejada."}),i.jsx(ie,{onChange:F,value:n,format:"DD/MM/YYYY"})]}),i.jsxs("p",{children:["Passe o mouse em cima do nome do cliente para mais opções ",i.jsx(He,{})]}),i.jsxs(k,{style:{marginBottom:"20px"},type:"primary",onClick:()=>O(!0),children:[i.jsx(se,{})," Novo Agendamento"]}),i.jsx(re,{isModalAgendaVisible:$,handleCancel:()=>O(!1)}),i.jsx(le,{columns:X,dataSource:e.sort(G),rowKey:"id",loading:r}),i.jsx(ne,{isModalVisible:q,handleCancel:()=>E(!1),currentAppointment:B,updateAppointments:Z,handleClose:Q}),i.jsx(ce,{title:"Informações Adicionais",open:m,onCancel:U,onOk:K,okText:"Salvar",cancelText:"Cancelar",children:i.jsx("textarea",{value:u,onChange:a=>f(a.target.value),style:{width:"100%",height:"150px"},placeholder:"Digite informações adicionais aqui..."})})]})};export{Kt as default};
