import{r as o,u as g,d as j,j as e,B as v}from"./index-F_APLYFk.js";/* empty css                      */import{I as d}from"./index-CF94sgcy.js";import{B as C}from"./context-BBgDGUKR.js";import{s as m}from"./index-BSshCDlB.js";import{m as i}from"./index-BZ8NrSYz.js";import{L as l}from"./LockOutlined-CL2uAh3Q.js";import{C as y}from"./CheckOutlined-DjblNYZ6.js";import{C as N}from"./KeyCode-BGAGjcbr.js";import"./AntdIcon-Dm9H8mJU.js";import"./useSize-CS2hrim6.js";import"./Serializer-CQbcCsmu.js";import"./render-BLHg8_GC.js";import"./SearchOutlined-DT7IAkrq.js";import"./ExclamationCircleFilled-CJs6dt2B.js";import"./InfoCircleFilled-D7yE8Sak.js";import"./useNotification-B5cApIMQ.js";const P=({isCriteriaMet:r,text:a})=>e.jsxs("p",{className:r?"criteriaMet":"criteriaNotMet",children:[r?e.jsx(y,{style:{color:"green"}}):e.jsx(N,{style:{color:"red"}})," ",a]}),_=()=>{const[r,a]=o.useState(""),[n,p]=o.useState(""),h=g(),{token:u}=j(),[c,f]=o.useState({minLength:!1}),w=t=>{const s=t.target.value;f({minLength:s.length>=8}),a(s)},x=async()=>{if(!Object.values(c).every(s=>s)){m.success({message:"A senha não atende aos critérios necessários."});return}if(r!==n){i.error("As senhas não coincidem."),m.error({message:"As senhas não coincidem."});return}try{if((await fetch(`${v}/auth/reset-password-doctor`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:u,newPassword:r})})).ok)i.success("Senha redefinida com sucesso!"),h("/login");else throw new Error("Não foi possível redefinir a senha. Tente novamente.")}catch(s){i.error(s.message)}};return e.jsx("div",{className:"resetPassword",children:e.jsxs("div",{className:"resetPasswordContainer",children:[e.jsx("h2",{children:"Você esta redefinindo sua senha profissional"}),e.jsx("p",{children:"Essa senha serve para emitir atestados, receitas, declarações e mais..."}),e.jsx("p",{children:"A senha deve ser pessoal e intransferível"}),e.jsx(d,{prefix:e.jsx(l,{}),type:"password",placeholder:"Nova senha",value:r,onChange:w,required:!0}),e.jsx("div",{className:"passwordCriteria",children:e.jsx(P,{isCriteriaMet:c.minLength,text:"A senha deve conter pelo menos 8 dígitos"})}),e.jsx(d,{prefix:e.jsx(l,{}),type:"password",placeholder:"Confirme a nova senha",value:n,onChange:t=>p(t.target.value),required:!0}),e.jsx(C,{type:"primary",onClick:x,children:"Redefinir Senha"})]})})};export{_ as default};
