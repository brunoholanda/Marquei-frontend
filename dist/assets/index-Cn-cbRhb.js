import{r as y,R as J,B as Ye,j as e,i as Er,f as _r,g as Pr,c as Mr,u as Sr,b as Rr,d as Ar}from"./index-BjWOWftK.js";import{a as oe}from"./api-yj2qoLPl.js";/* empty css                      */import{C as at}from"./CompassOutlined-4MCepfqJ.js";import{A as st,_ as it,c as Dr}from"./AntdIcon-CQBeZWiu.js";import{B as Z}from"./context-CsxF_MV5.js";import{g as Nr,m as Ir,r as Tr,u as Or,C as kr}from"./useSize-xGuuOV2H.js";import{S as Fr}from"./index-BNxrNzwE.js";import{u as $r}from"./useLocale-B5fEOMjY.js";import{m as xe}from"./index-voIPXOLj.js";import{R as tt}from"./index-SZJkRHiF.js";import{S as Lr,R as Br}from"./resetDoctorPassword-CKJ6ANgU.js";import{C as wt}from"./index-CQC3ljG7.js";import{M as Oe}from"./index-DZhypcJC.js";import{D as jt}from"./index-BAfzoE8U.js";import{M as rt}from"./index-z7srBD_T.js";import{T as Ct}from"./index-xwEKfmQR.js";import{D as zr,T as Et}from"./Table-DssO-p4r.js";import{I as be}from"./index-Dtquuxsa.js";import{D as _t}from"./index-C7SteZcr.js";import{I as Ur}from"./index-WZDMD0Mn.js";import{T as Pt}from"./index-DmbuE59p.js";import{s as Qe}from"./index-DmCwQh6m.js";import{T as Mt}from"./index-Ccg1QiO6.js";import{S as St}from"./index-CrIh86xN.js";import{U as Hr}from"./UploadOutlined-CfKVTpOI.js";import{S as Qr}from"./SearchOutlined-DC5n_389.js";import{P as Wr}from"./PlusOutlined-OWyJAdgg.js";import{C as Yr}from"./CheckOutlined-BorBS3ox.js";import"./render-Dc9fgLFB.js";import"./Serializer-CQbcCsmu.js";import"./ExclamationCircleFilled-BXHKs-a4.js";import"./InfoCircleFilled-CN7YLSSN.js";import"./useNotification-C_uzqUJr.js";import"./KeyCode-iNboPXT1.js";import"./LockOutlined-ejqNwguy.js";import"./index-10_tvuH-.js";import"./PurePanel-vSTbxOUV.js";import"./EllipsisOutlined-CWuHYn8k.js";import"./Overflow-vieoZhrC.js";import"./useForceUpdate-DA-qGIrz.js";import"./responsiveObserver-eh3CkRQ8.js";import"./index-DICP50cq.js";import"./Dropdown-C_ydlxYW.js";import"./CalendarOutlined-fGf3BKFZ.js";import"./ClockCircleOutlined-vEkn-5q0.js";var Vr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};const qr=Vr;var Gr=function(u,w){return y.createElement(st,it({},u,{ref:w,icon:qr}))};const Kr=y.forwardRef(Gr);var Jr=Object.defineProperty,We=Object.getOwnPropertySymbols,At=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,Rt=(v,u,w)=>u in v?Jr(v,u,{enumerable:!0,configurable:!0,writable:!0,value:w}):v[u]=w,ot=(v,u)=>{for(var w in u||(u={}))At.call(u,w)&&Rt(v,w,u[w]);if(We)for(var w of We(u))Dt.call(u,w)&&Rt(v,w,u[w]);return v},Nt=(v,u)=>{var w={};for(var h in v)At.call(v,h)&&u.indexOf(h)<0&&(w[h]=v[h]);if(v!=null&&We)for(var h of We(v))u.indexOf(h)<0&&Dt.call(v,h)&&(w[h]=v[h]);return w};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ke;(v=>{const u=class{constructor(r,t,n,o){if(this.version=r,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],r<u.MIN_VERSION||r>u.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=r*4+17;let c=[];for(let g=0;g<this.size;g++)c.push(!1);for(let g=0;g<this.size;g++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(n);if(this.drawCodewords(x),o==-1){let g=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const E=this.getPenaltyScore();E<g&&(o=S,g=E),this.applyMask(S)}}_(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(r,t){const n=v.QrSegment.makeSegments(r);return u.encodeSegments(n,t)}static encodeBinary(r,t){const n=v.QrSegment.makeBytes(r);return u.encodeSegments([n],t)}static encodeSegments(r,t,n=1,o=40,c=-1,x=!0){if(!(u.MIN_VERSION<=n&&n<=o&&o<=u.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let g,S;for(g=n;;g++){const m=u.getNumDataCodewords(g,t)*8,j=C.getTotalBits(r,g);if(j<=m){S=j;break}if(g>=o)throw new RangeError("Data too long")}for(const m of[u.Ecc.MEDIUM,u.Ecc.QUARTILE,u.Ecc.HIGH])x&&S<=u.getNumDataCodewords(g,m)*8&&(t=m);let E=[];for(const m of r){h(m.mode.modeBits,4,E),h(m.numChars,m.mode.numCharCountBits(g),E);for(const j of m.getData())E.push(j)}_(E.length==S);const N=u.getNumDataCodewords(g,t)*8;_(E.length<=N),h(0,Math.min(4,N-E.length),E),h(0,(8-E.length%8)%8,E),_(E.length%8==0);for(let m=236;E.length<N;m^=253)h(m,8,E);let T=[];for(;T.length*8<E.length;)T.push(0);return E.forEach((m,j)=>T[j>>>3]|=m<<7-(j&7)),new u(g,t,T,c)}getModule(r,t){return 0<=r&&r<this.size&&0<=t&&t<this.size&&this.modules[t][r]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const r=this.getAlignmentPatternPositions(),t=r.length;for(let n=0;n<t;n++)for(let o=0;o<t;o++)n==0&&o==0||n==0&&o==t-1||n==t-1&&o==0||this.drawAlignmentPattern(r[n],r[o]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(r){const t=this.errorCorrectionLevel.formatBits<<3|r;let n=t;for(let c=0;c<10;c++)n=n<<1^(n>>>9)*1335;const o=(t<<10|n)^21522;_(o>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,M(o,c));this.setFunctionModule(8,7,M(o,6)),this.setFunctionModule(8,8,M(o,7)),this.setFunctionModule(7,8,M(o,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,M(o,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,M(o,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,M(o,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let r=this.version;for(let n=0;n<12;n++)r=r<<1^(r>>>11)*7973;const t=this.version<<12|r;_(t>>>18==0);for(let n=0;n<18;n++){const o=M(t,n),c=this.size-11+n%3,x=Math.floor(n/3);this.setFunctionModule(c,x,o),this.setFunctionModule(x,c,o)}}drawFinderPattern(r,t){for(let n=-4;n<=4;n++)for(let o=-4;o<=4;o++){const c=Math.max(Math.abs(o),Math.abs(n)),x=r+o,g=t+n;0<=x&&x<this.size&&0<=g&&g<this.size&&this.setFunctionModule(x,g,c!=2&&c!=4)}}drawAlignmentPattern(r,t){for(let n=-2;n<=2;n++)for(let o=-2;o<=2;o++)this.setFunctionModule(r+o,t+n,Math.max(Math.abs(o),Math.abs(n))!=1)}setFunctionModule(r,t,n){this.modules[t][r]=n,this.isFunction[t][r]=!0}addEccAndInterleave(r){const t=this.version,n=this.errorCorrectionLevel;if(r.length!=u.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");const o=u.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],c=u.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],x=Math.floor(u.getNumRawDataModules(t)/8),g=o-x%o,S=Math.floor(x/o);let E=[];const N=u.reedSolomonComputeDivisor(c);for(let m=0,j=0;m<o;m++){let I=r.slice(j,j+S-c+(m<g?0:1));j+=I.length;const $=u.reedSolomonComputeRemainder(I,N);m<g&&I.push(0),E.push(I.concat($))}let T=[];for(let m=0;m<E[0].length;m++)E.forEach((j,I)=>{(m!=S-c||I>=g)&&T.push(j[m])});return _(T.length==x),T}drawCodewords(r){if(r.length!=Math.floor(u.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let o=0;o<this.size;o++)for(let c=0;c<2;c++){const x=n-c,S=(n+1&2)==0?this.size-1-o:o;!this.isFunction[S][x]&&t<r.length*8&&(this.modules[S][x]=M(r[t>>>3],7-(t&7)),t++)}}_(t==r.length*8)}applyMask(r){if(r<0||r>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let o;switch(r){case 0:o=(n+t)%2==0;break;case 1:o=t%2==0;break;case 2:o=n%3==0;break;case 3:o=(n+t)%3==0;break;case 4:o=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:o=n*t%2+n*t%3==0;break;case 6:o=(n*t%2+n*t%3)%2==0;break;case 7:o=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&o&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let r=0;for(let c=0;c<this.size;c++){let x=!1,g=0,S=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[c][E]==x?(g++,g==5?r+=u.PENALTY_N1:g>5&&r++):(this.finderPenaltyAddHistory(g,S),x||(r+=this.finderPenaltyCountPatterns(S)*u.PENALTY_N3),x=this.modules[c][E],g=1);r+=this.finderPenaltyTerminateAndCount(x,g,S)*u.PENALTY_N3}for(let c=0;c<this.size;c++){let x=!1,g=0,S=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][c]==x?(g++,g==5?r+=u.PENALTY_N1:g>5&&r++):(this.finderPenaltyAddHistory(g,S),x||(r+=this.finderPenaltyCountPatterns(S)*u.PENALTY_N3),x=this.modules[E][c],g=1);r+=this.finderPenaltyTerminateAndCount(x,g,S)*u.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let x=0;x<this.size-1;x++){const g=this.modules[c][x];g==this.modules[c][x+1]&&g==this.modules[c+1][x]&&g==this.modules[c+1][x+1]&&(r+=u.PENALTY_N2)}let t=0;for(const c of this.modules)t=c.reduce((x,g)=>x+(g?1:0),t);const n=this.size*this.size,o=Math.ceil(Math.abs(t*20-n*10)/n)-1;return _(0<=o&&o<=9),r+=o*u.PENALTY_N4,_(0<=r&&r<=2568888),r}getAlignmentPatternPositions(){if(this.version==1)return[];{const r=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(r*2-2))*2;let n=[6];for(let o=this.size-7;n.length<r;o-=t)n.splice(1,0,o);return n}}static getNumRawDataModules(r){if(r<u.MIN_VERSION||r>u.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*r+128)*r+64;if(r>=2){const n=Math.floor(r/7)+2;t-=(25*n-10)*n-55,r>=7&&(t-=36)}return _(208<=t&&t<=29648),t}static getNumDataCodewords(r,t){return Math.floor(u.getNumRawDataModules(r)/8)-u.ECC_CODEWORDS_PER_BLOCK[t.ordinal][r]*u.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][r]}static reedSolomonComputeDivisor(r){if(r<1||r>255)throw new RangeError("Degree out of range");let t=[];for(let o=0;o<r-1;o++)t.push(0);t.push(1);let n=1;for(let o=0;o<r;o++){for(let c=0;c<t.length;c++)t[c]=u.reedSolomonMultiply(t[c],n),c+1<t.length&&(t[c]^=t[c+1]);n=u.reedSolomonMultiply(n,2)}return t}static reedSolomonComputeRemainder(r,t){let n=t.map(o=>0);for(const o of r){const c=o^n.shift();n.push(0),t.forEach((x,g)=>n[g]^=u.reedSolomonMultiply(x,c))}return n}static reedSolomonMultiply(r,t){if(r>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let o=7;o>=0;o--)n=n<<1^(n>>>7)*285,n^=(t>>>o&1)*r;return _(n>>>8==0),n}finderPenaltyCountPatterns(r){const t=r[1];_(t<=this.size*3);const n=t>0&&r[2]==t&&r[3]==t*3&&r[4]==t&&r[5]==t;return(n&&r[0]>=t*4&&r[6]>=t?1:0)+(n&&r[6]>=t*4&&r[0]>=t?1:0)}finderPenaltyTerminateAndCount(r,t,n){return r&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(r,t){t[0]==0&&(r+=this.size),t.pop(),t.unshift(r)}};let w=u;w.MIN_VERSION=1,w.MAX_VERSION=40,w.PENALTY_N1=3,w.PENALTY_N2=3,w.PENALTY_N3=40,w.PENALTY_N4=10,w.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],w.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],v.QrCode=w;function h(r,t,n){if(t<0||t>31||r>>>t)throw new RangeError("Value out of range");for(let o=t-1;o>=0;o--)n.push(r>>>o&1)}function M(r,t){return(r>>>t&1)!=0}function _(r){if(!r)throw new Error("Assertion error")}const b=class{constructor(r,t,n){if(this.mode=r,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(r){let t=[];for(const n of r)h(n,8,t);return new b(b.Mode.BYTE,r.length,t)}static makeNumeric(r){if(!b.isNumeric(r))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<r.length;){const o=Math.min(r.length-n,3);h(parseInt(r.substr(n,o),10),o*3+1,t),n+=o}return new b(b.Mode.NUMERIC,r.length,t)}static makeAlphanumeric(r){if(!b.isAlphanumeric(r))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],n;for(n=0;n+2<=r.length;n+=2){let o=b.ALPHANUMERIC_CHARSET.indexOf(r.charAt(n))*45;o+=b.ALPHANUMERIC_CHARSET.indexOf(r.charAt(n+1)),h(o,11,t)}return n<r.length&&h(b.ALPHANUMERIC_CHARSET.indexOf(r.charAt(n)),6,t),new b(b.Mode.ALPHANUMERIC,r.length,t)}static makeSegments(r){return r==""?[]:b.isNumeric(r)?[b.makeNumeric(r)]:b.isAlphanumeric(r)?[b.makeAlphanumeric(r)]:[b.makeBytes(b.toUtf8ByteArray(r))]}static makeEci(r){let t=[];if(r<0)throw new RangeError("ECI assignment value out of range");if(r<128)h(r,8,t);else if(r<16384)h(2,2,t),h(r,14,t);else if(r<1e6)h(6,3,t),h(r,21,t);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,t)}static isNumeric(r){return b.NUMERIC_REGEX.test(r)}static isAlphanumeric(r){return b.ALPHANUMERIC_REGEX.test(r)}getData(){return this.bitData.slice()}static getTotalBits(r,t){let n=0;for(const o of r){const c=o.mode.numCharCountBits(t);if(o.numChars>=1<<c)return 1/0;n+=4+c+o.bitData.length}return n}static toUtf8ByteArray(r){r=encodeURI(r);let t=[];for(let n=0;n<r.length;n++)r.charAt(n)!="%"?t.push(r.charCodeAt(n)):(t.push(parseInt(r.substr(n+1,2),16)),n+=2);return t}};let C=b;C.NUMERIC_REGEX=/^[0-9]*$/,C.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,C.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",v.QrSegment=C})(ke||(ke={}));(v=>{(u=>{const w=class{constructor(M,_){this.ordinal=M,this.formatBits=_}};let h=w;h.LOW=new w(0,1),h.MEDIUM=new w(1,0),h.QUARTILE=new w(2,3),h.HIGH=new w(3,2),u.Ecc=h})(v.QrCode||(v.QrCode={}))})(ke||(ke={}));(v=>{(u=>{const w=class{constructor(M,_){this.modeBits=M,this.numBitsCharCount=_}numCharCountBits(M){return this.numBitsCharCount[Math.floor((M+7)/17)]}};let h=w;h.NUMERIC=new w(1,[10,12,14]),h.ALPHANUMERIC=new w(2,[9,11,13]),h.BYTE=new w(4,[8,16,16]),h.KANJI=new w(8,[8,10,12]),h.ECI=new w(7,[0,0,0]),u.Mode=h})(v.QrSegment||(v.QrSegment={}))})(ke||(ke={}));var Be=ke;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var It={L:Be.QrCode.Ecc.LOW,M:Be.QrCode.Ecc.MEDIUM,Q:Be.QrCode.Ecc.QUARTILE,H:Be.QrCode.Ecc.HIGH},Tt=128,Ot="L",kt="#FFFFFF",Ft="#000000",$t=!1,lt=4,Xr=.1;function Lt(v,u=0){const w=[];return v.forEach(function(h,M){let _=null;h.forEach(function(b,C){if(!b&&_!==null){w.push(`M${_+u} ${M+u}h${C-_}v1H${_+u}z`),_=null;return}if(C===h.length-1){if(!b)return;_===null?w.push(`M${C+u},${M+u} h1v1H${C+u}z`):w.push(`M${_+u},${M+u} h${C+1-_}v1H${_+u}z`);return}b&&_===null&&(_=C)})}),w.join("")}function Bt(v,u){return v.slice().map((w,h)=>h<u.y||h>=u.y+u.h?w:w.map((M,_)=>_<u.x||_>=u.x+u.w?M:!1))}function zt(v,u,w,h){if(h==null)return null;const M=w?lt:0,_=v.length+M*2,b=Math.floor(u*Xr),C=_/u,r=(h.width||b)*C,t=(h.height||b)*C,n=h.x==null?v.length/2-r/2:h.x*C,o=h.y==null?v.length/2-t/2:h.y*C;let c=null;if(h.excavate){let x=Math.floor(n),g=Math.floor(o),S=Math.ceil(r+n-x),E=Math.ceil(t+o-g);c={x,y:g,w:S,h:E}}return{x:n,y:o,h:t,w:r,excavation:c}}var Zr=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function en(v){const u=v,{value:w,size:h=Tt,level:M=Ot,bgColor:_=kt,fgColor:b=Ft,includeMargin:C=$t,style:r,imageSettings:t}=u,n=Nt(u,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),o=t==null?void 0:t.src,c=y.useRef(null),x=y.useRef(null),[g,S]=y.useState(!1);y.useEffect(()=>{if(c.current!=null){const T=c.current,m=T.getContext("2d");if(!m)return;let j=Be.QrCode.encodeText(w,It[M]).getModules();const I=C?lt:0,$=j.length+I*2,B=zt(j,h,C,t),F=x.current,Q=B!=null&&F!==null&&F.complete&&F.naturalHeight!==0&&F.naturalWidth!==0;Q&&B.excavation!=null&&(j=Bt(j,B.excavation));const ee=window.devicePixelRatio||1;T.height=T.width=h*ee;const K=h/$*ee;m.scale(K,K),m.fillStyle=_,m.fillRect(0,0,$,$),m.fillStyle=b,Zr?m.fill(new Path2D(Lt(j,I))):j.forEach(function(le,U){le.forEach(function(Y,ae){Y&&m.fillRect(ae+I,U+I,1,1)})}),Q&&m.drawImage(F,B.x+I,B.y+I,B.w,B.h)}}),y.useEffect(()=>{S(!1)},[o]);const E=ot({height:h,width:h},r);let N=null;return o!=null&&(N=J.createElement("img",{src:o,key:o,style:{display:"none"},onLoad:()=>{S(!0)},ref:x})),J.createElement(J.Fragment,null,J.createElement("canvas",ot({style:E,height:h,width:h,ref:c},n)),N)}function tn(v){const u=v,{value:w,size:h=Tt,level:M=Ot,bgColor:_=kt,fgColor:b=Ft,includeMargin:C=$t,imageSettings:r}=u,t=Nt(u,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let n=Be.QrCode.encodeText(w,It[M]).getModules();const o=C?lt:0,c=n.length+o*2,x=zt(n,h,C,r);let g=null;r!=null&&x!=null&&(x.excavation!=null&&(n=Bt(n,x.excavation)),g=J.createElement("image",{xlinkHref:r.src,height:x.h,width:x.w,x:x.x+o,y:x.y+o,preserveAspectRatio:"none"}));const S=Lt(n,o);return J.createElement("svg",ot({height:h,width:h,viewBox:`0 0 ${c} ${c}`},t),J.createElement("path",{fill:_,d:`M0,0 h${c}v${c}H0z`,shapeRendering:"crispEdges"}),J.createElement("path",{fill:b,d:S,shapeRendering:"crispEdges"}),g)}const rn=v=>{const{componentCls:u}=v;return{[u]:Object.assign(Object.assign({},Tr(v)),{display:"flex",justifyContent:"center",alignItems:"center",padding:v.paddingSM,backgroundColor:v.colorWhite,borderRadius:v.borderRadiusLG,border:`${v.lineWidth}px ${v.lineType} ${v.colorSplit}`,position:"relative",width:"100%",height:"100%",overflow:"hidden",[`& > ${u}-mask`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",color:v.colorText,lineHeight:v.lineHeight,background:v.QRCodeMaskBackgroundColor,textAlign:"center",[`& > ${u}-expired`]:{color:v.QRCodeExpiredTextColor}},"&-icon":{marginBlockEnd:v.marginXS,fontSize:v.controlHeight}}),[`${u}-borderless`]:{borderColor:"transparent"}}},nn=Nr("QRCode",v=>rn(Ir(v,{QRCodeExpiredTextColor:"rgba(0, 0, 0, 0.88)",QRCodeMaskBackgroundColor:"rgba(255, 255, 255, 0.96)"}))),on=v=>{const[,u]=Or(),{value:w,type:h="canvas",icon:M="",size:_=160,iconSize:b=40,color:C=u.colorText,errorLevel:r="M",status:t="active",bordered:n=!0,onRefresh:o,style:c,className:x,rootClassName:g,prefixCls:S,bgColor:E="transparent"}=v,{getPrefixCls:N}=y.useContext(kr),T=N("qrcode",S),[m,j]=nn(T),I={src:M,x:void 0,y:void 0,height:b,width:b,excavate:!0},$={value:w,size:_-(u.paddingSM+u.lineWidth)*2,level:r,bgColor:E,fgColor:C,imageSettings:M?I:void 0},[B]=$r("QRCode");if(!w)return null;const F=Dr(T,x,g,j,{[`${T}-borderless`]:!n});return m(J.createElement("div",{style:Object.assign(Object.assign({},c),{width:_,height:_,backgroundColor:E}),className:F},t!=="active"&&J.createElement("div",{className:`${T}-mask`},t==="loading"&&J.createElement(Fr,null),t==="expired"&&J.createElement(J.Fragment,null,J.createElement("p",{className:`${T}-expired`},B==null?void 0:B.expired),o&&J.createElement(Z,{type:"link",icon:J.createElement(Kr,null),onClick:o},B==null?void 0:B.refresh))),h==="canvas"?J.createElement(en,Object.assign({},$)):J.createElement(tn,Object.assign({},$))))},Ut=on;var an={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const sn=an;var ln=function(u,w){return y.createElement(st,it({},u,{ref:w,icon:sn}))};const cn=y.forwardRef(ln);var dn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 000 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0013.5-4.7L863.9 169a7.9 7.9 0 00-8.9-8.9zM416.6 562.3a8.03 8.03 0 00-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 00-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"}}]},name:"expand-alt",theme:"outlined"};const un=dn;var fn=function(u,w){return y.createElement(st,it({},u,{ref:w,icon:un}))};const hn=y.forwardRef(fn),ct="/assets/insta-BjFwv1PC.png",dt="/assets/wp-hover-BnA9rGAO.png",mn=J.forwardRef(({nome:v,days:u,date:w,reason:h,professionalId:M,qrCodeUrl:_},b)=>{const[C,r]=y.useState(null),[t,n]=y.useState(null),[o,c]=y.useState(null),[x,g]=y.useState(Date.now());y.useEffect(()=>{_&&g(Date.now())},[_]);const S=()=>{const E=new Date,N=E.getDate(),m=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][E.getMonth()],j=E.getFullYear();return`${N} de ${m} de ${j}`};return y.useEffect(()=>{M&&(async()=>{try{const N=await oe.get(`/professionals/${M}`);if(r(N.data),N.data.company_id){const T=await oe.get(`/companies/${N.data.company_id}`);n(T.data)}}catch(N){console.error("Erro ao buscar detalhes do profissional ou da empresa",N),xe.error("Erro ao buscar detalhes do profissional ou da empresa")}})()},[M]),y.useEffect(()=>{let E=!0;if(t&&t.logo_path){const N=new Image;N.src=t.logo_path,c(`${Ye}/${t.logo_path}`),N.onload=()=>{E&&n(T=>({...T}))},N.onerror=T=>{console.error("Erro ao carregar a imagem:",T)}}return()=>{E=!1}},[t]),e.jsxs("div",{className:"certificate-page",ref:b,children:[t&&t.logo_path&&e.jsxs("div",{className:"cabecalho",children:[e.jsx("div",{className:"company-logo",children:e.jsx("img",{src:o,alt:"Logo da Empresa"})}),e.jsx("h3",{children:t.nome})]}),e.jsx("div",{className:"certificate-title",children:e.jsx("h1",{children:"Atestado Médico"})}),e.jsx("div",{className:"certificate-body",children:e.jsxs("p",{className:"indented-text",children:["Informo para os devidos fins que ",v," precisa ficar afastado(a) de suas atividades por um período de ",u," dia(s) a partir de ",w,". CID10: ",h]})}),e.jsxs("div",{className:"certificate-signature",children:[C&&C.assinatura&&e.jsx("img",{src:`data:image/png;base64,${C.assinatura}`,alt:"Assinatura"}),e.jsx("div",{className:"doctor-info",children:C&&e.jsxs(e.Fragment,{children:[C.nome,e.jsx("br",{}),C.titulo,e.jsx("br",{}),C.registro_profissional,e.jsx("br",{}),e.jsx("br",{})]})})]}),e.jsx("div",{className:"footer",children:C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"certificate-contato",children:[t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:ct,alt:`Instagram de ${C.nome}`}),e.jsx("p",{children:t.instagram&&t.instagram.startsWith("@")?t.instagram.slice(1):t.instagram})]}),t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:dt,alt:`WhatsApp de ${C.nome}`}),e.jsx("p",{children:t.telefone})]})]}),t&&e.jsxs("div",{className:"certificate-endereco",children:[e.jsxs("p",{children:[e.jsx(at,{})," ",t.endereco,e.jsx("br",{})]}),e.jsxs("p",{children:["Emitido em ",S()]})]})]})}),e.jsxs("div",{className:"qr-code-container",children:[e.jsx("p",{children:"Confirme o atestado acessando o QrCode"}),_&&e.jsx(e.Fragment,{children:e.jsx(Ut,{size:90,value:_},_)})]})]})});var Ht={exports:{}};(function(v,u){(function(w,h){v.exports=h(y,Er)})(typeof self<"u"?self:_r,function(w,h){return function(){var M={328:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrintContextConsumer=t.PrintContext=void 0;var o=n(496),c=Object.prototype.hasOwnProperty.call(o,"createContext");t.PrintContext=c?o.createContext({}):null,t.PrintContextConsumer=t.PrintContext?t.PrintContext.Consumer:function(){return null}},428:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReactToPrint=void 0;var o=n(316),c=n(496),x=n(190),g=n(328),S=n(940),E=function(N){function T(){var m=N.apply(this,o.__spreadArray([],o.__read(arguments),!1))||this;return m.startPrint=function(j){var I=m.props,$=I.onAfterPrint,B=I.onPrintError,F=I.print,Q=I.documentTitle;setTimeout(function(){var ee,K;if(j.contentWindow)if(j.contentWindow.focus(),F)F(j).then(function(){return $==null?void 0:$()}).then(function(){return m.handleRemoveIframe()}).catch(function(Y){B?B("print",Y):m.logMessages(["An error was thrown by the specified `print` function"])});else{if(j.contentWindow.print){var le=(K=(ee=j.contentDocument)===null||ee===void 0?void 0:ee.title)!==null&&K!==void 0?K:"",U=j.ownerDocument.title;Q&&(j.ownerDocument.title=Q,j.contentDocument&&(j.contentDocument.title=Q)),j.contentWindow.print(),Q&&(j.ownerDocument.title=U,j.contentDocument&&(j.contentDocument.title=le))}else m.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);$==null||$(),m.handleRemoveIframe()}else m.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},m.triggerPrint=function(j){var I=m.props,$=I.onBeforePrint,B=I.onPrintError;if($){var F=$();F&&typeof F.then=="function"?F.then(function(){m.startPrint(j)}).catch(function(Q){B&&B("onBeforePrint",Q)}):m.startPrint(j)}else m.startPrint(j)},m.handlePrint=function(j){var I=m.props,$=I.bodyClass,B=I.content,F=I.copyStyles,Q=I.fonts,ee=I.pageStyle,K=I.nonce,le=typeof j=="function"?j():null;if(le&&typeof B=="function"&&m.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),le||typeof B!="function"||(le=B()),le!==void 0)if(le!==null){var U=document.createElement("iframe");U.width="".concat(document.documentElement.clientWidth,"px"),U.height="".concat(document.documentElement.clientHeight,"px"),U.style.position="absolute",U.style.top="-".concat(document.documentElement.clientHeight+100,"px"),U.style.left="-".concat(document.documentElement.clientWidth+100,"px"),U.id="printWindow",U.srcdoc="<!DOCTYPE html>";var Y=(0,x.findDOMNode)(le);if(Y){var ae=Y.cloneNode(!0),se=ae instanceof Text,Me=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Se=se?[]:ae.querySelectorAll("img"),_e=se?[]:ae.querySelectorAll("video"),Fe=Q?Q.length:0;m.numResourcesToLoad=Me.length+Se.length+_e.length+Fe,m.resourcesLoaded=[],m.resourcesErrored=[];var q=function(ge,ye){m.resourcesLoaded.includes(ge)?m.logMessages(["Tried to mark a resource that has already been handled",ge],"debug"):(ye?(m.logMessages(o.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],o.__read(ye),!1)),m.resourcesErrored.push(ge)):m.resourcesLoaded.push(ge),m.resourcesLoaded.length+m.resourcesErrored.length===m.numResourcesToLoad&&m.triggerPrint(U))};U.onload=function(){var ge,ye,we,je;U.onload=null;var V=U.contentDocument||((ye=U.contentWindow)===null||ye===void 0?void 0:ye.document);if(V){V.body.appendChild(ae),Q&&(!((we=U.contentDocument)===null||we===void 0)&&we.fonts&&(!((je=U.contentWindow)===null||je===void 0)&&je.FontFace)?Q.forEach(function(ie){var L=new FontFace(ie.family,ie.source,{weight:ie.weight,style:ie.style});U.contentDocument.fonts.add(L),L.loaded.then(function(){q(L)}).catch(function(W){q(L,["Failed loading the font:",L,"Load error:",W])})}):(Q.forEach(function(ie){return q(ie)}),m.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var Re=typeof ee=="function"?ee():ee;if(typeof Re!="string")m.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof Re,'". Styles from `pageStyle` will not be applied.')]);else{var Pe=V.createElement("style");K&&(Pe.setAttribute("nonce",K),V.head.setAttribute("nonce",K)),Pe.appendChild(V.createTextNode(Re)),V.head.appendChild(Pe)}if($&&(ge=V.body.classList).add.apply(ge,o.__spreadArray([],o.__read($.split(" ")),!1)),!se){for(var a=se?[]:Y.querySelectorAll("canvas"),s=V.querySelectorAll("canvas"),i=0;i<a.length;++i){var d=a[i],f=s[i].getContext("2d");f&&f.drawImage(d,0,0)}var D=function(ie){var L=Se[ie],W=L.getAttribute("src");if(W){var re=new Image;re.onload=function(){return q(L)},re.onerror=function(he,Ae,$e,me,te){return q(L,["Error loading <img>",L,"Error",te])},re.src=W}else q(L,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',L])};for(i=0;i<Se.length;i++)D(i);var R=function(ie){var L=_e[ie];L.preload="auto";var W=L.getAttribute("poster");if(W){var re=new Image;re.onload=function(){return q(L)},re.onerror=function(he,Ae,$e,me,te){return q(L,["Error loading video poster",W,"for video",L,"Error:",te])},re.src=W}else L.readyState>=2?q(L):(L.onloadeddata=function(){return q(L)},L.onerror=function(he,Ae,$e,me,te){return q(L,["Error loading video",L,"Error",te])},L.onstalled=function(){return q(L,["Loading video stalled, skipping",L])})};for(i=0;i<_e.length;i++)R(i);var k="input",X=Y.querySelectorAll(k),G=V.querySelectorAll(k);for(i=0;i<X.length;i++)G[i].value=X[i].value;var A="input[type=checkbox],input[type=radio]",z=Y.querySelectorAll(A),ce=V.querySelectorAll(A);for(i=0;i<z.length;i++)ce[i].checked=z[i].checked;var de="select",ue=Y.querySelectorAll(de),Ce=V.querySelectorAll(de);for(i=0;i<ue.length;i++)Ce[i].value=ue[i].value}if(F)for(var ve=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),Ee=function(ie,L){var W=ve[ie];if(W.tagName.toLowerCase()==="style"){var re=V.createElement(W.tagName),he=W.sheet;if(he){var Ae="";try{for(var $e=he.cssRules.length,me=0;me<$e;++me)typeof he.cssRules[me].cssText=="string"&&(Ae+="".concat(he.cssRules[me].cssText,`\r
`))}catch{m.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",W],"warning")}re.setAttribute("id","react-to-print-".concat(ie)),K&&re.setAttribute("nonce",K),re.appendChild(V.createTextNode(Ae)),V.head.appendChild(re)}}else if(W.getAttribute("href"))if(W.hasAttribute("disabled"))m.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",W],"warning"),q(W);else{for(var te=V.createElement(W.tagName),ze=(me=0,W.attributes.length);me<ze;++me){var Le=W.attributes[me];Le&&te.setAttribute(Le.nodeName,Le.nodeValue||"")}te.onload=function(){return q(te)},te.onerror=function(qe,Ue,Ge,Ke,Je){return q(te,["Failed to load",te,"Error:",Je])},K&&te.setAttribute("nonce",K),V.head.appendChild(te)}else m.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",W],"warning"),q(W)},Ve=(i=0,ve.length);i<Ve;++i)Ee(i)}m.numResourcesToLoad!==0&&F||m.triggerPrint(U)},m.handleRemoveIframe(!0),document.body.appendChild(U)}else m.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else m.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else m.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},m.handleRemoveIframe=function(j){var I=m.props.removeAfterPrint;if(j||I){var $=document.getElementById("printWindow");$&&document.body.removeChild($)}},m.logMessages=function(j,I){I===void 0&&(I="error"),m.props.suppressErrors||(I==="error"?console.error(j):I==="warning"?console.warn(j):I==="debug"&&console.debug(j))},m}return o.__extends(T,N),T.prototype.handleClick=function(m,j){var I=this,$=this.props,B=$.onBeforeGetContent,F=$.onPrintError;if(B){var Q=B();Q&&typeof Q.then=="function"?Q.then(function(){return I.handlePrint(j)}).catch(function(ee){F&&F("onBeforeGetContent",ee)}):this.handlePrint(j)}else this.handlePrint(j)},T.prototype.render=function(){var m=this.props,j=m.children,I=m.trigger;if(I)return c.cloneElement(I(),{onClick:this.handleClick.bind(this)});if(!g.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var $={handlePrint:this.handleClick.bind(this)};return c.createElement(g.PrintContext.Provider,{value:$},j)},T.defaultProps=S.defaultProps,T}(c.Component);t.ReactToPrint=E},940:function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=void 0,t.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReactToPrint=void 0;var o=n(316),c=n(496),x=n(428),g=n(940),S=n(860),E=Object.prototype.hasOwnProperty.call(c,"useMemo")&&Object.prototype.hasOwnProperty.call(c,"useCallback");t.useReactToPrint=function(N){if(!E)return N.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var T=c.useMemo(function(){return new x.ReactToPrint(o.__assign(o.__assign({},g.defaultProps),N))},[N]);return c.useCallback(function(m,j){return(0,S.wrapCallbackWithArgs)(T,T.handleClick,j)(m)},[T])}},860:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCallbackWithArgs=void 0;var o=n(316);t.wrapCallbackWithArgs=function(c,x){for(var g=[],S=2;S<arguments.length;S++)g[S-2]=arguments[S];return function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return x.apply(c,o.__spreadArray(o.__spreadArray([],o.__read(E),!1),o.__read(g),!1))}}},496:function(r){r.exports=w},190:function(r){r.exports=h},316:function(r,t,n){n.r(t),n.d(t,{__addDisposableResource:function(){return V},__assign:function(){return x},__asyncDelegator:function(){return Me},__asyncGenerator:function(){return se},__asyncValues:function(){return Se},__await:function(){return ae},__awaiter:function(){return $},__classPrivateFieldGet:function(){return ye},__classPrivateFieldIn:function(){return je},__classPrivateFieldSet:function(){return we},__createBinding:function(){return F},__decorate:function(){return S},__disposeResources:function(){return Pe},__esDecorate:function(){return N},__exportStar:function(){return Q},__extends:function(){return c},__generator:function(){return B},__importDefault:function(){return ge},__importStar:function(){return q},__makeTemplateObject:function(){return _e},__metadata:function(){return I},__param:function(){return E},__propKey:function(){return m},__read:function(){return K},__rest:function(){return g},__runInitializers:function(){return T},__setFunctionName:function(){return j},__spread:function(){return le},__spreadArray:function(){return Y},__spreadArrays:function(){return U},__values:function(){return ee}});var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,d){i.__proto__=d}||function(i,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(i[f]=d[f])},o(a,s)};function c(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function i(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}var x=function(){return x=Object.assign||function(a){for(var s,i=1,d=arguments.length;i<d;i++)for(var f in s=arguments[i])Object.prototype.hasOwnProperty.call(s,f)&&(a[f]=s[f]);return a},x.apply(this,arguments)};function g(a,s){var i={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&s.indexOf(d)<0&&(i[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var f=0;for(d=Object.getOwnPropertySymbols(a);f<d.length;f++)s.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(a,d[f])&&(i[d[f]]=a[d[f]])}return i}function S(a,s,i,d){var f,D=arguments.length,R=D<3?s:d===null?d=Object.getOwnPropertyDescriptor(s,i):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,s,i,d);else for(var k=a.length-1;k>=0;k--)(f=a[k])&&(R=(D<3?f(R):D>3?f(s,i,R):f(s,i))||R);return D>3&&R&&Object.defineProperty(s,i,R),R}function E(a,s){return function(i,d){s(i,d,a)}}function N(a,s,i,d,f,D){function R(Ee){if(Ee!==void 0&&typeof Ee!="function")throw new TypeError("Function expected");return Ee}for(var k,X=d.kind,G=X==="getter"?"get":X==="setter"?"set":"value",A=!s&&a?d.static?a:a.prototype:null,z=s||(A?Object.getOwnPropertyDescriptor(A,d.name):{}),ce=!1,de=i.length-1;de>=0;de--){var ue={};for(var Ce in d)ue[Ce]=Ce==="access"?{}:d[Ce];for(var Ce in d.access)ue.access[Ce]=d.access[Ce];ue.addInitializer=function(Ee){if(ce)throw new TypeError("Cannot add initializers after decoration has completed");D.push(R(Ee||null))};var ve=(0,i[de])(X==="accessor"?{get:z.get,set:z.set}:z[G],ue);if(X==="accessor"){if(ve===void 0)continue;if(ve===null||typeof ve!="object")throw new TypeError("Object expected");(k=R(ve.get))&&(z.get=k),(k=R(ve.set))&&(z.set=k),(k=R(ve.init))&&f.unshift(k)}else(k=R(ve))&&(X==="field"?f.unshift(k):z[G]=k)}A&&Object.defineProperty(A,d.name,z),ce=!0}function T(a,s,i){for(var d=arguments.length>2,f=0;f<s.length;f++)i=d?s[f].call(a,i):s[f].call(a);return d?i:void 0}function m(a){return typeof a=="symbol"?a:"".concat(a)}function j(a,s,i){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:i?"".concat(i," ",s):s})}function I(a,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,s)}function $(a,s,i,d){return new(i||(i=Promise))(function(f,D){function R(G){try{X(d.next(G))}catch(A){D(A)}}function k(G){try{X(d.throw(G))}catch(A){D(A)}}function X(G){var A;G.done?f(G.value):(A=G.value,A instanceof i?A:new i(function(z){z(A)})).then(R,k)}X((d=d.apply(a,s||[])).next())})}function B(a,s){var i,d,f,D,R={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return D={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function k(X){return function(G){return function(A){if(i)throw new TypeError("Generator is already executing.");for(;D&&(D=0,A[0]&&(R=0)),R;)try{if(i=1,d&&(f=2&A[0]?d.return:A[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,A[1])).done)return f;switch(d=0,f&&(A=[2&A[0],f.value]),A[0]){case 0:case 1:f=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,d=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((f=(f=R.trys).length>0&&f[f.length-1])||A[0]!==6&&A[0]!==2)){R=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){R.label=A[1];break}if(A[0]===6&&R.label<f[1]){R.label=f[1],f=A;break}if(f&&R.label<f[2]){R.label=f[2],R.ops.push(A);break}f[2]&&R.ops.pop(),R.trys.pop();continue}A=s.call(a,R)}catch(z){A=[6,z],d=0}finally{i=f=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([X,G])}}}var F=Object.create?function(a,s,i,d){d===void 0&&(d=i);var f=Object.getOwnPropertyDescriptor(s,i);f&&!("get"in f?!s.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(a,d,f)}:function(a,s,i,d){d===void 0&&(d=i),a[d]=s[i]};function Q(a,s){for(var i in a)i==="default"||Object.prototype.hasOwnProperty.call(s,i)||F(s,a,i)}function ee(a){var s=typeof Symbol=="function"&&Symbol.iterator,i=s&&a[s],d=0;if(i)return i.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(a,s){var i=typeof Symbol=="function"&&a[Symbol.iterator];if(!i)return a;var d,f,D=i.call(a),R=[];try{for(;(s===void 0||s-- >0)&&!(d=D.next()).done;)R.push(d.value)}catch(k){f={error:k}}finally{try{d&&!d.done&&(i=D.return)&&i.call(D)}finally{if(f)throw f.error}}return R}function le(){for(var a=[],s=0;s<arguments.length;s++)a=a.concat(K(arguments[s]));return a}function U(){for(var a=0,s=0,i=arguments.length;s<i;s++)a+=arguments[s].length;var d=Array(a),f=0;for(s=0;s<i;s++)for(var D=arguments[s],R=0,k=D.length;R<k;R++,f++)d[f]=D[R];return d}function Y(a,s,i){if(i||arguments.length===2)for(var d,f=0,D=s.length;f<D;f++)!d&&f in s||(d||(d=Array.prototype.slice.call(s,0,f)),d[f]=s[f]);return a.concat(d||Array.prototype.slice.call(s))}function ae(a){return this instanceof ae?(this.v=a,this):new ae(a)}function se(a,s,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,f=i.apply(a,s||[]),D=[];return d={},R("next"),R("throw"),R("return"),d[Symbol.asyncIterator]=function(){return this},d;function R(z){f[z]&&(d[z]=function(ce){return new Promise(function(de,ue){D.push([z,ce,de,ue])>1||k(z,ce)})})}function k(z,ce){try{(de=f[z](ce)).value instanceof ae?Promise.resolve(de.value.v).then(X,G):A(D[0][2],de)}catch(ue){A(D[0][3],ue)}var de}function X(z){k("next",z)}function G(z){k("throw",z)}function A(z,ce){z(ce),D.shift(),D.length&&k(D[0][0],D[0][1])}}function Me(a){var s,i;return s={},d("next"),d("throw",function(f){throw f}),d("return"),s[Symbol.iterator]=function(){return this},s;function d(f,D){s[f]=a[f]?function(R){return(i=!i)?{value:ae(a[f](R)),done:!1}:D?D(R):R}:D}}function Se(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=a[Symbol.asyncIterator];return i?i.call(a):(a=ee(a),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=a[f]&&function(D){return new Promise(function(R,k){(function(X,G,A,z){Promise.resolve(z).then(function(ce){X({value:ce,done:A})},G)})(R,k,(D=a[f](D)).done,D.value)})}}}function _e(a,s){return Object.defineProperty?Object.defineProperty(a,"raw",{value:s}):a.raw=s,a}var Fe=Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s};function q(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var i in a)i!=="default"&&Object.prototype.hasOwnProperty.call(a,i)&&F(s,a,i);return Fe(s,a),s}function ge(a){return a&&a.__esModule?a:{default:a}}function ye(a,s,i,d){if(i==="a"&&!d)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?d:i==="a"?d.call(a):d?d.value:s.get(a)}function we(a,s,i,d,f){if(d==="m")throw new TypeError("Private method is not writable");if(d==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!f:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return d==="a"?f.call(a,i):f?f.value=i:s.set(a,i),i}function je(a,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof a=="function"?s===a:a.has(s)}function V(a,s,i){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var d;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");d=s[Symbol.asyncDispose]}if(d===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");d=s[Symbol.dispose]}if(typeof d!="function")throw new TypeError("Object not disposable.");a.stack.push({value:s,dispose:d,async:i})}else i&&a.stack.push({async:!0});return s}var Re=typeof SuppressedError=="function"?SuppressedError:function(a,s,i){var d=new Error(i);return d.name="SuppressedError",d.error=a,d.suppressed=s,d};function Pe(a){function s(i){a.error=a.hasError?new Re(i,a.error,"An error was suppressed during disposal."):i,a.hasError=!0}return function i(){for(;a.stack.length;){var d=a.stack.pop();try{var f=d.dispose&&d.dispose.call(d.value);if(d.async)return Promise.resolve(f).then(i,function(D){return s(D),i()})}catch(D){s(D)}}if(a.hasError)throw a.error}()}t.default={__extends:c,__assign:x,__rest:g,__decorate:S,__param:E,__metadata:I,__awaiter:$,__generator:B,__createBinding:F,__exportStar:Q,__values:ee,__read:K,__spread:le,__spreadArrays:U,__spreadArray:Y,__await:ae,__asyncGenerator:se,__asyncDelegator:Me,__asyncValues:Se,__makeTemplateObject:_e,__importStar:q,__importDefault:ge,__classPrivateFieldGet:ye,__classPrivateFieldSet:we,__classPrivateFieldIn:je,__addDisposableResource:V,__disposeResources:Pe}}},_={};function b(r){var t=_[r];if(t!==void 0)return t.exports;var n=_[r]={exports:{}};return M[r](n,n.exports,b),n.exports}b.d=function(r,t){for(var n in t)b.o(t,n)&&!b.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},b.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},b.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var C={};return function(){var r=C;Object.defineProperty(r,"__esModule",{value:!0}),r.useReactToPrint=r.ReactToPrint=r.PrintContextConsumer=void 0;var t=b(328);Object.defineProperty(r,"PrintContextConsumer",{enumerable:!0,get:function(){return t.PrintContextConsumer}});var n=b(428);Object.defineProperty(r,"ReactToPrint",{enumerable:!0,get:function(){return n.ReactToPrint}});var o=b(892);Object.defineProperty(r,"useReactToPrint",{enumerable:!0,get:function(){return o.useReactToPrint}});var c=b(428);r.default=c.ReactToPrint}(),C}()})})(Ht);var pn=Ht.exports;const nt=Pr(pn),gn=J.forwardRef(({nome:v,date:u,professionalId:w,startTime:h,endTime:M,qrCodeUrl:_},b)=>{const[C,r]=y.useState(null),[t,n]=y.useState(null),[o,c]=y.useState(null),[x,g]=y.useState(Date.now());y.useEffect(()=>{_&&g(Date.now())},[_]);const S=()=>{const E=new Date,N=E.getDate(),m=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][E.getMonth()],j=E.getFullYear();return`${N} de ${m} de ${j}`};return y.useEffect(()=>{w&&(async()=>{try{const N=await oe.get(`/professionals/${w}`);if(r(N.data),N.data.company_id){const T=await oe.get(`/companies/${N.data.company_id}`);n(T.data)}}catch(N){console.error("Erro ao buscar detalhes do profissional ou da empresa",N),xe.error("Erro ao buscar detalhes do profissional ou da empresa")}})()},[w]),y.useEffect(()=>{let E=!0;if(t&&t.logo_path){const N=new Image;N.src=t.logo_path,c(`${Ye}/${t.logo_path}`),N.onload=()=>{E&&n(T=>({...T}))},N.onerror=T=>{console.error("Erro ao carregar a imagem:",T)}}return()=>{E=!1}},[t]),e.jsxs("div",{className:"certificate-page",ref:b,children:[t&&t.logo_path&&e.jsxs("div",{className:"cabecalho",children:[e.jsx("div",{className:"company-logo",children:e.jsx("img",{src:o,alt:"Logo da Empresa"})}),e.jsx("h3",{children:t.nome})]}),e.jsx("div",{className:"certificate-title",children:e.jsx("h1",{children:"Declaração"})}),e.jsx("div",{className:"certificate-body",children:e.jsxs("p",{className:"indented-text",children:["Informo para os devidos fins que ",v," compareceu em nosso estabelecimento no dia ",u," das ",h," até as ",M,"."]})}),e.jsxs("div",{className:"certificate-signature",children:[C&&C.assinatura&&e.jsx("img",{src:`data:image/png;base64,${C.assinatura}`,alt:"Assinatura"}),e.jsx("div",{className:"doctor-info",children:C&&e.jsxs(e.Fragment,{children:[C.nome,e.jsx("br",{}),C.titulo,e.jsx("br",{}),C.registro_profissional,e.jsx("br",{}),e.jsx("br",{})]})})]}),e.jsx("div",{className:"footer",children:C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"certificate-contato",children:[t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:ct,alt:`Instagram de ${C.nome}`}),e.jsx("p",{children:t.instagram&&t.instagram.startsWith("@")?t.instagram.slice(1):t.instagram})]}),t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:dt,alt:`WhatsApp de ${C.nome}`}),e.jsx("p",{children:t.telefone})]})]}),t&&e.jsxs("div",{className:"certificate-endereco",children:[e.jsxs("p",{children:[e.jsx(at,{})," ",t.endereco,e.jsx("br",{})]}),e.jsxs("p",{children:["Emitido em, ",S()]})]})]})}),e.jsxs("div",{className:"qr-code-container",children:[e.jsx("p",{children:"Confirme a declaração acessando o QrCode"}),_&&e.jsx(e.Fragment,{children:e.jsx(Ut,{size:90,value:_},_)})]})]})}),yn=J.forwardRef(({nome:v,professionalId:u,medicamentos:w},h)=>{const[M,_]=y.useState(null),[b,C]=y.useState(null),[r,t]=y.useState(null),n=()=>{const o=new Date,c=o.getDate(),g=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][o.getMonth()],S=o.getFullYear();return`${c} de ${g} de ${S}`};return y.useEffect(()=>{u&&(async()=>{try{const c=await oe.get(`/professionals/${u}`);if(_(c.data),c.data.company_id){const x=await oe.get(`/companies/${c.data.company_id}`);C(x.data)}}catch(c){console.error("Erro ao buscar detalhes do profissional ou da empresa",c),xe.error("Erro ao buscar detalhes do profissional ou da empresa")}})()},[u]),y.useEffect(()=>{let o=!0;if(b&&b.logo_path){const c=new Image;c.src=b.logo_path,t(`${Ye}/${b.logo_path}`),c.onload=()=>{o&&C(x=>({...x}))},c.onerror=x=>{console.error("Erro ao carregar a imagem:",x)}}return()=>{o=!1}},[b]),e.jsxs("div",{className:"certificate-page",ref:h,children:[b&&b.logo_path&&e.jsxs("div",{className:"cabecalho",children:[e.jsx("div",{className:"company-logo",children:e.jsx("img",{src:r,alt:"Logo da Empresa"})}),e.jsx("h3",{children:b.nome})]}),e.jsx("div",{className:"certificate-title",children:e.jsx("h1",{children:"Receita Médica"})}),e.jsx("div",{className:"certificate-body",children:e.jsxs("p",{className:"indented-text",children:["Pciente: ",v," ",e.jsx("br",{}),e.jsx("ul",{children:w.map((o,c)=>e.jsx("li",{children:o},c))})]})}),e.jsxs("div",{className:"certificate-signature",children:[M&&M.assinatura&&e.jsx("img",{src:`data:image/png;base64,${M.assinatura}`,alt:"Assinatura"}),e.jsx("div",{className:"doctor-info",children:M&&e.jsxs(e.Fragment,{children:[M.nome,e.jsx("br",{}),M.titulo,e.jsx("br",{}),M.registro_profissional,e.jsx("br",{}),e.jsx("br",{})]})})]}),e.jsx("div",{className:"footer",children:M&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"certificate-contato",children:[b&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:ct,alt:`Instagram de ${M.nome}`}),e.jsx("p",{children:b.instagram&&b.instagram.startsWith("@")?b.instagram.slice(1):b.instagram})]}),b&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:dt,alt:`WhatsApp de ${M.nome}`}),e.jsx("p",{children:b.telefone})]})]}),b&&e.jsxs("div",{className:"certificate-endereco",children:[e.jsxs("p",{children:[e.jsx(at,{})," ",b.endereco,e.jsx("br",{})]}),e.jsxs("p",{children:["Emitido em, ",n()]})]})]})})]})}),vn=({isOpenCameraModal:v,onClose:u,onCapture:w})=>{const h=y.useRef(null),[M,_]=y.useState(null);y.useEffect(()=>{const C=async()=>{if(v&&h.current)try{const t=await navigator.mediaDevices.getUserMedia({video:!0});h.current.srcObject=t}catch(t){console.error("Error accessing the camera",t)}},r=()=>{h.current&&h.current.srcObject&&(h.current.srcObject.getTracks().forEach(t=>t.stop()),h.current.srcObject=null)};return C(),r},[v]);const b=()=>{if(h.current){const C=document.createElement("canvas");C.width=h.current.videoWidth,C.height=h.current.videoHeight,C.getContext("2d").drawImage(h.current,0,0,C.width,C.height),C.toBlob(t=>{const n=URL.createObjectURL(t);_(n),w(n),h.current.srcObject.getTracks().forEach(o=>o.stop()),h.current.srcObject=null})}};return e.jsx(e.Fragment,{children:e.jsxs(Oe,{title:"Captura de foto 📸",open:v,onCancel:()=>{u(),h.current&&h.current.srcObject&&(h.current.srcObject.getTracks().forEach(C=>C.stop()),h.current.srcObject=null)},footer:null,children:[e.jsx(jt,{}),M?e.jsx("img",{src:M,alt:"Capturada",style:{width:"100%"}}):e.jsx("video",{ref:h,autoPlay:!0,style:{width:"100%",transform:"scaleX(-1)"}}),e.jsx(jt,{}),e.jsxs(Z,{type:"primary",onClick:b,style:{marginTop:"10px",width:"100%"},children:[e.jsx(cn,{})," Tirar Foto"]})]})})},ho=()=>{const[v,u]=y.useState(window.innerWidth<768),[w,h]=y.useState(!0),{id:M}=Mr(),_=Sr(),[b,C]=y.useState({nome:""}),[r,t]=y.useState({nome:"",data_nascimento:""}),[n,o]=y.useState(null),[c,x]=y.useState(!1),[g,S]=y.useState({date:null,days:1,reason:""}),[E,N]=y.useState([]),[T,m]=y.useState(!1),[j,I]=y.useState({matricula:"",senha:""}),[$,B]=y.useState(null),[F,Q]=y.useState(null),[ee,K]=y.useState([]),[le,U]=y.useState(!1),[Y,ae]=y.useState({date:null,startTime:null,endTime:null}),[se,Me]=y.useState({medicamentos:[""]}),[Se,_e]=y.useState(!1),[Fe,q]=y.useState(!0),[ge,ye]=y.useState(""),[we,je]=y.useState(null),[V,Re]=y.useState([]),[Pe,a]=y.useState(!1),s=y.useRef(null),i=y.useRef(null),d=y.useRef(null),f=Rr(),D=y.useRef(),[R,k]=y.useState([]),[X,G]=y.useState(!1),[A,z]=y.useState(""),[ce,de]=y.useState(null),[ue,Ce]=y.useState([]),[ve,Ee]=y.useState(""),[Ve,ie]=y.useState(!1),[L,W]=y.useState({}),{authData:re}=Ar(),he=re.companyID,Ae=re.userSpecialties||[],$e=Ae.includes(1)||Ae.includes(2),[me,te]=y.useState(null),[ze,Le]=y.useState(null),[qe,Ue]=y.useState(!1),[Ge,Ke]=y.useState(!1),[Je,Xe]=y.useState(!1),Qt=()=>{Ue(!0)},Wt=l=>{fetch(l).then(p=>p.blob()).then(p=>{const P=new File([p],"captured-image.jpg",{type:"image/jpeg"});bt(P,300,300,.7,O=>{const H=URL.createObjectURL(O);te(H),Le(O),Ue(!1)})}).catch(p=>{console.error("Error converting captured image to file:",p),xe.error("Erro ao converter a imagem capturada.")})},Yt=()=>{x(!0)},ut=()=>{x(!1)},Vt=()=>{U(!0)},qt=()=>{_e(!0)},ft=()=>{_e(!1)},ht=()=>{je("certificate"),Ze()},Gt=()=>{je("declaration"),Ze()},Kt=()=>{je("recipe"),Ze()};y.useEffect(()=>{Pe&&D.current&&(D.current.handlePrint(),a(!1))},[Pe]),y.useEffect(()=>{(async()=>{if(he&&re.authToken)try{const p=await oe.get(`/professionals?company_id=${he}`,{headers:{Authorization:`Bearer ${re.authToken}`}});if(p.status!==200)throw new Error("Falha ao buscar dados dos profissionais");const O=wt.AES.decrypt(p.data,"%A0533266q6td9g*"),H=JSON.parse(O.toString(wt.enc.Utf8));Ce(H)}catch(p){console.error("Error fetching professionals:",p)}else console.error("Company ID or auth token not found in local storage")})()},[he,re.authToken]),y.useEffect(()=>{(async()=>{try{const p=await oe.get(`/clients/${F}/notes`);k(p.data)}catch(p){console.error("Erro ao buscar anotações",p)}})()},[F]),y.useEffect(()=>{const l=()=>u(window.innerWidth<768);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const Jt=(l,p)=>{const P=[...se.medicamentos];P[l]=p,Me({...se,medicamentos:P})},Xt=()=>{Me({...se,medicamentos:[...se.medicamentos,""]})},Zt=l=>{const p=[...se.medicamentos];p.splice(l,1),Me({...se,medicamentos:p})};y.useEffect(()=>{(async()=>{var p;try{const P=((p=f.state)==null?void 0:p.from)==="Pacientes";let O=M;if(!P){const fe=(await oe.get(`/agendamentos/${M}`)).data;O=fe.client_id,C(fe)}const H=await oe.get(`/clients/${O}`),ne=H.data;if(ne.client_foto){const pe=`${Ye}${ne.client_foto}`;te(pe)}else te(null);H.data.cpf&&Xe(!0),Q(O),t(ne)}catch(P){console.error("Error fetching details:",P),xe.error("Error fetching details")}finally{h(!1)}})()},[M,f.state]);const mt=l=>{const p=l.split("/");return new Date(p[2],p[1]-1,p[0])};y.useEffect(()=>{const l=P=>P.sort((O,H)=>{const ne=mt(O.data);return mt(H.data)-ne});(async()=>{if(!F){console.error("clientId não está definido.");return}try{const O=(await oe.get(`/todos-agendamentos-hard?client_id=${F}&company_id=${he}`)).data.filter(pe=>pe.status===1),H=await Promise.all(O.map(async pe=>{const fe=await oe.get(`/professionals/${pe.professional_id}`);return pe.professionalName=fe.data.nome,pe})),ne=l(H);N(ne)}catch(P){console.error("Erro ao buscar histórico de agendamentos:",P)}})()},[F,he]);const er=async()=>{try{if(!F)throw new Error("ID do cliente não encontrado");const l=new FormData;if(Object.keys(r).forEach(P=>{l.append(P,r[P])}),console.log(ze),ze&&l.append("client_foto",ze),(await oe.put(`/clients/${F}`,l)).status===200)Qe.success({message:"Detalhes atualizados com sucesso!"}),C(P=>({...P,...r})),r.cpf&&Xe(!0);else throw new Error("Falha ao atualizar detalhes do cliente")}catch(l){console.error("Erro ao atualizar detalhes",l),xe.error(`Erro ao atualizar detalhes: ${l.message||l}`)}},Ne=(l,p,P)=>{t(O=>({...O,[l]:p})),P==="cpf"&&V.data.cpf&&!r.cpf&&Xe(!0)},tr=()=>{_(-1)};if(w)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(Lr,{size:"large"})});if(!b||!r)return e.jsx("p",{children:"Detalhes do cliente não disponíveis."});const pt=(l,p)=>{S(P=>({...P,[l]:p}))},rr=l=>{W(l),ie(!0)},nr=[{title:"Data",dataIndex:"data",key:"data"},{title:"Horário",dataIndex:"horario",key:"horario"},{title:"Motivo",dataIndex:"motivo",key:"motivo"},{title:"Quem Atendeu",dataIndex:"professionalName"}],or=[{title:"Data",dataIndex:"date",key:"date",render:l=>He(l)},{title:"Paciente",dataIndex:"nome",key:"nome"},{title:"Profissional",dataIndex:"professional_name",key:"professionalName"},{title:"Detalhes",dataIndex:"notes",key:"notes",render:(l,p)=>e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:"10px"},children:l.substring(0,10)+(l.length>10?"...":"")}),e.jsxs(Z,{size:"small",type:"primary",onClick:()=>rr(p),children:[e.jsx(hn,{}),"Expandir"]})]})}],Ze=()=>{m(!0)},gt=()=>{m(!1)},yt=l=>{const{name:p,value:P}=l.target;I(O=>({...O,[p]:P}))},ar=async()=>{try{const l=await oe.post("/professionals/authenticate",{login:j.matricula,senha:j.senha});if(l.data.autenticado){B(l.data.professional_id);const p=ue.find(P=>P.id===l.data.professional_id);if(p)Re(p);else{const P=await oe.get(`/professionals/${l.data.professional_id}`);Re(P.data)}gt(),we==="certificate"?Yt():we==="declaration"?Vt():we==="recipe"&&qt()}else xe.error("Credenciais inválidas")}catch(l){console.error("Erro de autenticação",l),xe.error("Erro na autenticação")}},sr=async()=>{const l={nome:r.nome,professional_name:ve,date:new Date().toISOString(),notes:A,client_id:F,company_id:he};try{const p=await oe.post(`/clients/${F}/notes`,l);G(!1);const P=p.data;P.date=He(P.date),k(O=>[...O,P]),Qe.success({message:"Informação inserida com sucesso!"})}catch(p){console.error("Erro ao inserir Informação",p),Qe.error({message:"Erro ao inserir Informação"})}},ir=async l=>{S({...g,reason:l});const p=l.toLowerCase();if(p.length>3)try{const P=await oe.get(`cid10/search?query=${p}`);K(P.data)}catch(P){console.error("Erro na busca:",P)}},lr=l=>{S({...g,reason:l.code}),K([])},vt=async(l,p,P,O,H,ne,pe)=>{let fe;if(l==="certificate"?fe=`${p.nome} para ${P} de ${O} dias a partir de ${H}!`:l==="declaration"&&(fe=`Declaração emitida por ${p.nome} para ${P}: provando que compareceu em nosso estabelecimento no dia ${H} das ${ne} às ${pe}.`),!fe)throw console.error("Log text is null or undefined"),new Error("Não é possível enviar log com texto vazio.");try{return await oe.post("/logs_atestados",{text:fe})}catch(De){throw console.error("Erro ao registrar log:",De),xe.error("Erro ao enviar log para o backend"),De}},cr=async()=>{const l=r.nome,p=g.days,P=g.date;try{const H=(await vt("certificate",V,l,p,P)).data.id;o(`https://marquei.com.br/#/confirm-certificate/${H}`),a(!0)}catch(O){console.error("Erro ao emitir atestado:",O),xe.error("Ocorreu um erro ao emitir o atestado. Por favor, tente novamente.")}},dr=async()=>{const l=r.nome,{date:p,startTime:P,endTime:O}=Y;try{const ne=(await vt("declaration",V,l,null,p,P,O)).data.id;o(`https://marquei.com.br/#/confirm-declaration/${ne}`),a(!0)}catch(H){console.error("Erro ao emitir declaração:",H),xe.error("Ocorreu um erro ao emitir a declaração. Por favor, tente novamente.")}},He=l=>{if(!l||l==="0000-00-00")return"";const[p,P,O]=l.split("T")[0].split("-");return!p||!P||!O||p==="0000"?"":`${O}/${P}/${p}`},ur=l=>{const p=l.split("/");if(p.length===3){const[P,O,H]=p,ne=`${H}-${O}-${P}`;Ne("data_nascimento",ne)}};function fr(l){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(String(l).toLowerCase())}function hr(l){Ne("client_email",l),!fr(l)&&l.length>0?(q(!1),ye("Por favor, insira um email em um formato válido!")):(q(!0),ye(""))}const mr=()=>{G(!0)},pr=()=>{G(!1)},gr=l=>{z(l.target.value)},yr=l=>{const p=ue.find(P=>P.id===l);p?(de(l),Ee(p.nome)):(de(null),Ee(""))},vr=(l,p)=>{const[P,O]=l.split(":").map(Number),[H,ne]=p.split(":").map(Number);return!(H<P||H===P&&ne<O)};function bt(l,p,P,O,H){const ne=new FileReader;ne.onload=pe=>{const fe=new Image;fe.onload=()=>{const De=document.createElement("canvas");let Ie=fe.width,Te=fe.height;Ie>Te?Ie>p&&(Te*=p/Ie,Ie=p):Te>P&&(Ie*=P/Te,Te=P),De.width=Ie,De.height=Te,De.getContext("2d").drawImage(fe,0,0,Ie,Te),De.toBlob(jr=>{const Cr=new File([jr],l.name,{type:l.type,lastModified:Date.now()});H(Cr)},l.type,O)},fe.src=pe.target.result},ne.readAsDataURL(l)}const xt=l=>{const P=l instanceof Blob?new File([l],"captured-image.jpg",{type:"image/jpeg",lastModified:new Date}):l;if(!["image/png","image/jpeg","image/jpg"].includes(P.type)){xe.error("Por favor, selecione um arquivo PNG, JPG ou JPEG.");return}bt(P,300,300,.7,O=>{const H=URL.createObjectURL(O);te(H),Le(O)})},br=e.jsxs(rt,{children:[e.jsxs(rt.Item,{children:[e.jsx("label",{htmlFor:"upload-photo",children:"Escolher arquivo"}),e.jsx("input",{type:"file",id:"upload-photo",style:{display:"none"},accept:"image/png, image/jpeg",onChange:l=>{const p=l.target.files[0];p&&xt(p)}})]},"upload"),e.jsx(rt.Item,{onClick:Qt,children:"Tirar foto"},"capture")]}),et=!Fe||!r.data_nascimento||r.data_nascimento.length===0,xr=()=>e.jsx(Ct,{title:et?"Antes de salvar, preencha todos os campos.":"",children:e.jsx("span",{style:et?{display:"inline-block",cursor:"not-allowed",width:"100%"}:{display:"inline-block",width:"100%"},children:e.jsx(Z,{onClick:er,type:"primary",disabled:et,children:"Salvar"})})}),wr=[{key:"1",tab:v?"Detalhes":"Dados Pessoais",content:e.jsxs("div",{className:"dadosPessoaisTab",children:[e.jsxs("div",{className:"foto-client",children:[me&&e.jsx("img",{src:me,alt:"foto do cliente",style:{maxWidth:"100%",height:"auto"}}),e.jsx(Ct,{title:"Alterar foto do cliente",children:e.jsxs("div",{className:"upload-btn",children:[e.jsx(zr,{overlay:br,trigger:["click"],children:e.jsx(Z,{icon:e.jsx(Hr,{})})}),e.jsx("input",{type:"file",id:"upload-photo",style:{display:"none"},accept:"image/png, image/jpeg",onChange:l=>{const p=l.target.files[0];p&&xt(p)}})]})})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nome:"})," ",e.jsx(be,{value:r.nome||b.nome,onChange:l=>Ne("nome",l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Data de Nascimento:"}),e.jsx(tt,{mask:"99/99/9999",value:r.data_nascimento?He(r.data_nascimento):"",onChange:l=>ur(l.target.value),children:l=>e.jsx(be,{...l})})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Telefone:"}),e.jsx(tt,{mask:"(99) 9 9999-9999",value:r.celular||b.celular,onChange:l=>Ne("celular",l.target.value),children:l=>e.jsx(be,{...l})})]}),e.jsxs("p",{children:[e.jsx("b",{children:"E-Mail:"})," ",e.jsx(be,{value:r.client_email,onChange:l=>hr(l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Plano:"})," ",e.jsx(be,{value:r.planodental,onChange:l=>Ne("planodental",l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Numero da Carteira do Plano:"})," ",e.jsx(be,{value:r.carteira,onChange:l=>Ne("carteira",l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"CPF:"}),e.jsx(tt,{mask:"999.999.999-99",value:r.cpf||b.cpf,onChange:l=>Ne("cpf",l.target.value),disabled:Je,children:l=>e.jsx(be,{...l})})]}),!Fe&&e.jsx("p",{style:{color:"red"},children:ge}),e.jsx(xr,{})]})]})},!v&&{key:"2",tab:"Histórico de Consultas",content:e.jsx(e.Fragment,{children:e.jsx(Et,{columns:nr,dataSource:E,rowKey:"id"})})},{key:"3",tab:v?"Atestados":"Atestados e Receitas",content:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"atestados-botoes",children:[$e&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:ht,type:"primary",children:"Emitir Atestado"}),e.jsx(Z,{onClick:Kt,type:"primary",children:"Emitir Receita"})]}),e.jsx(Z,{onClick:Gt,type:"primary",children:"Emitir Declaração"})]}),e.jsxs(Oe,{title:"Emitir Atestado",visible:c,onCancel:ut,footer:[e.jsx(Z,{onClick:ut,children:"Cancelar"},"back"),e.jsx(Z,{type:"primary",onClick:cr,children:"Emitir"},"emit"),e.jsx(nt,{trigger:()=>e.jsx("button",{style:{display:"none"},children:"Print This Out"}),content:()=>s.current,ref:D})],children:[e.jsxs("p",{children:["Preencha os dados para emitir uma atestado ao paciente ",e.jsx("b",{children:b.nome})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Apartir de: "}),e.jsx(_t,{format:"DD/MM/YYYY",onChange:(l,p)=>pt("date",p)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Quantidade de dias: "}),e.jsx(Ur,{min:1,value:g.days,onChange:l=>pt("days",l)})]}),g.days>15&&e.jsx("p",{style:{color:"red"},children:"Para licenças médicas que ultrapassem 15 dias, oriente o paciente a procurar o INSS caso esteja sob regime de trabalho CLT."}),e.jsxs("p",{children:[e.jsxs("b",{children:["Motivo/CID ",e.jsx(Qr,{})]}),e.jsx(be,{value:g.reason,onChange:l=>ir(l.target.value),placeholder:"Pesquise a CID"})]}),ee.length>0&&e.jsx("ul",{className:"search-results-list",children:ee.map((l,p)=>e.jsxs("li",{onClick:()=>lr(l),children:[l.description," (",l.code,")"]},p))})]}),e.jsxs(Oe,{title:"Emitir Declaração",visible:le,onCancel:()=>U(!1),footer:[e.jsx(Z,{onClick:()=>U(!1),children:"Cancelar"},"back"),e.jsx(Z,{type:"primary",onClick:dr,children:"Emitir Declaração"},"emit"),e.jsx(nt,{trigger:()=>e.jsx("button",{style:{display:"none"},children:"Print This Out"}),content:()=>i.current,ref:D})],children:[e.jsx("p",{children:"Selecione a data e o intervalo de horas para a declaração de comparecimento:"}),e.jsx("div",{style:{marginBottom:"10px"},children:e.jsx(_t,{format:"DD/MM/YYYY",onChange:(l,p)=>ae({...Y,date:p}),placeholder:"Selecione a Data"})}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Pt,{format:"HH:mm",onChange:(l,p)=>ae({...Y,startTime:p}),placeholder:"Hora de Início"}),e.jsx("div",{style:{marginLeft:"18px"},children:e.jsx(Pt,{format:"HH:mm",onChange:(l,p)=>{Y.startTime&&!vr(Y.startTime,p)?Qe.error({message:"A hora de fim não pode ser menor que a hora de início."}):ae({...Y,endTime:p})},placeholder:"Hora de Fim"})})]})]}),e.jsxs(Oe,{title:"Emitir Receita",visible:Se,onCancel:ft,footer:[e.jsx(Z,{onClick:ft,children:"Cancelar"},"back"),e.jsx(nt,{trigger:()=>e.jsx(Z,{type:"primary",children:"Emitir Receita"}),content:()=>d.current})],children:[e.jsx("p",{children:"Insira os medicamentos:"}),se.medicamentos.map((l,p)=>e.jsx(be,{value:l,onChange:P=>Jt(p,P.target.value),style:{marginBottom:"10px"},addonAfter:se.medicamentos.length>1?e.jsx(Z,{type:"danger",onClick:()=>Zt(p),children:"Remover"}):null},p)),e.jsx(Z,{onClick:Xt,children:"Adicionar Medicamento"})]})]})},!v&&{key:"4",tab:"Orçamentos",content:e.jsx(e.Fragment,{children:e.jsx("div",{className:"atestados-botoes",children:e.jsx(Z,{onClick:ht,children:"Novo Orçamento"})})})},{key:"5",tab:"Prontuário",content:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs(Z,{type:"primary",onClick:mr,style:{marginBottom:"16px"},children:[e.jsx(Wr,{}),"Adicionar Informações"]}),e.jsx(Et,{dataSource:R,columns:or})]})}].filter(Boolean);return e.jsxs("div",{className:"clienteDetails",children:[e.jsxs("h1",{children:["Detalhes do Cliente ",e.jsx(Yr,{})]}),e.jsx(Z,{onClick:tr,type:"primary",children:"Voltar"}),e.jsx("div",{style:{display:"none"},children:e.jsx(mn,{qrCodeUrl:n,nome:r.nome,days:g.days,date:g.date,reason:g.reason,professionalId:$,ref:s})}),e.jsx("div",{style:{display:"none"},children:e.jsx(gn,{qrCodeUrl:n,nome:r.nome,date:Y.date,startTime:Y.startTime,endTime:Y.endTime,professionalId:$,ref:i})}),e.jsx("div",{style:{display:"none"},children:e.jsx(yn,{nome:r.nome,medicamentos:se.medicamentos,professionalId:$,ref:d})}),e.jsx(Mt,{defaultActiveKey:"1",type:"card",style:{margin:".5rem 0 0 0"},children:wr.map(l=>e.jsx(Mt.TabPane,{tab:l.tab,children:l.content},l.key))}),e.jsxs(Oe,{title:"Autenticação do Profissional",visible:T,onCancel:gt,onOk:ar,okText:"Autenticar",cancelText:"Cancelar",children:[e.jsx("p",{children:"Atestados só podem ser emitidos por meio da senha definida pelo profissional em seu cadastro. Nunca compartilhe sua senha!"}),e.jsx(be,{placeholder:"Matrícula",name:"matricula",value:j.matricula,onChange:yt,style:{marginBottom:".6rem"}}),e.jsx(be.Password,{placeholder:"Senha",name:"senha",value:j.senha,onChange:yt}),e.jsx(Z,{type:"link",onClick:()=>Ke(!0),style:{marginTop:"1rem"},children:"Esqueci a senha 😥"})]}),e.jsxs(Oe,{title:"Prontuário Eletrônico 📝",open:X,onOk:sr,onCancel:pr,okText:"Salvar",cancelText:"Cancelar",width:650,children:[e.jsx("p",{children:"Aqui você pode inserir informações pertinentes ao Paciente."}),e.jsx(St,{showSearch:!0,style:{width:"220px",marginBottom:"20px"},placeholder:"Selecione um profissional",onChange:yr,value:ce,children:ue.map(l=>e.jsx(St.Option,{value:l.id,children:l.nome},l.id))}),e.jsx(be.TextArea,{rows:4,value:A,onChange:gr,placeholder:"Digite aqui as informações relevantes do paciente..."})]}),e.jsxs(Oe,{title:"Detalhes da Informção 📝",visible:Ve,onOk:()=>ie(!1),onCancel:()=>ie(!1),okText:"Fechar",cancelButtonProps:{style:{display:"none"}},children:[e.jsx("div",{className:"divider-line"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Paciente"})," ",r.nome]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Informação inserida por:"})," ",L.professional_name," em ",He(L.date)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Informação Completa: "}),L.notes]}),e.jsx("div",{className:"divider-line"})]}),e.jsx(vn,{isOpenCameraModal:qe,onClose:()=>Ue(!1),onCapture:Wt}),Ge&&e.jsx(Br,{isResetDoctorModalVisible:Ge,onResetDoctorModalClose:()=>Ke(!1)})]})};export{ho as default};
