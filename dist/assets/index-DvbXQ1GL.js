import{i as Ar,e as k,u as Na,r as la,d as F,c as rr,_ as Ra,H as sa,b as Ba}from"./AntdIcon-rDAQJIgd.js";import{r as o,i as Aa,k as Fa}from"./index-kPzU05gx.js";import{_ as ca,L as Q,$ as Ta,U as Ea,A as xa,S as za,I as Ia,a2 as ja,R as je,ag as va,a3 as qa}from"./useSize-Dir-JjEK.js";const oa=()=>({height:0,opacity:0}),ha=e=>{const{scrollHeight:a}=e;return{height:a,opacity:1}},Ua=e=>({height:e?e.offsetHeight:0}),ia=(e,a)=>(a==null?void 0:a.deadline)===!0||a.propertyName==="height",yt=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:oa,onEnterStart:oa,onAppearActive:ha,onEnterActive:ha,onLeaveStart:Ua,onLeaveActive:oa,onAppearEnd:ia,onEnterEnd:ia,onLeaveEnd:ia,motionDeadline:500}},bt=(e,a,r)=>r!==void 0?r:`${e}-${a}`;var Wa=o.createContext(null),ma=[];function Va(e,a){var r=o.useState(function(){if(!Ar())return null;var g=document.createElement("div");return g}),t=k(r,1),n=t[0],u=o.useRef(!1),l=o.useContext(Wa),c=o.useState(ma),m=k(c,2),d=m[0],C=m[1],f=l||(u.current?void 0:function(g){C(function(P){var N=[g].concat(ca(P));return N})});function M(){n.parentElement||document.body.appendChild(n),u.current=!0}function h(){var g;(g=n.parentElement)===null||g===void 0||g.removeChild(n),u.current=!1}return Q(function(){return e?l?l(M):M():h(),h},[e]),Q(function(){d.length&&(d.forEach(function(g){return g()}),C(ma))},[d]),[n,f]}var ua;function Ha(e){var a="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=a;var t=r.style;t.position="absolute",t.left="0",t.top="0",t.width="100px",t.height="100px",t.overflow="scroll";var n,u;if(e){var l=getComputedStyle(e);t.scrollbarColor=l.scrollbarColor,t.scrollbarWidth=l.scrollbarWidth;var c=getComputedStyle(e,"::-webkit-scrollbar"),m=parseInt(c.width,10),d=parseInt(c.height,10);try{var C=m?"width: ".concat(c.width,";"):"",f=d?"height: ".concat(c.height,";"):"";Na(`
#`.concat(a,`::-webkit-scrollbar {
`).concat(C,`
`).concat(f,`
}`),a)}catch(g){console.error(g),n=m,u=d}}document.body.appendChild(r);var M=e&&n&&!isNaN(n)?n:r.offsetWidth-r.clientWidth,h=e&&u&&!isNaN(u)?u:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),la(a),{width:M,height:h}}function wt(e){return typeof document>"u"?0:((e||ua===void 0)&&(ua=Ha()),ua.width)}function Qa(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:Ha(e)}function Ja(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Ga="rc-util-locker-".concat(Date.now()),ga=0;function Ka(e){var a=!!e,r=o.useState(function(){return ga+=1,"".concat(Ga,"_").concat(ga)}),t=k(r,1),n=t[0];Q(function(){if(a){var u=Qa(document.body).width,l=Ja();Na(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(u,"px);"):"",`
}`),n)}else la(n);return function(){la(n)}},[a,n])}var ya=!1;function Za(e){return typeof e=="boolean"&&(ya=e),ya}var ba=function(a){return a===!1?!1:!Ar()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},_a=o.forwardRef(function(e,a){var r=e.open,t=e.autoLock,n=e.getContainer;e.debug;var u=e.autoDestroy,l=u===void 0?!0:u,c=e.children,m=o.useState(r),d=k(m,2),C=d[0],f=d[1],M=C||r;o.useEffect(function(){(l||r)&&f(r)},[r,l]);var h=o.useState(function(){return ba(n)}),g=k(h,2),P=g[0],N=g[1];o.useEffect(function(){var ee=ba(n);N(ee??null)});var H=Va(M&&!P),T=k(H,2),S=T[0],v=T[1],_=P??S;Ka(t&&r&&Ar()&&(_===S||_===document.body));var O=null;if(c&&Ta(c)&&a){var p=c;O=p.ref}var ne=Ea(O,a);if(!M||!Ar()||P===void 0)return null;var de=_===!1||Za(),J=c;return a&&(J=o.cloneElement(c,{ref:ne})),o.createElement(Wa.Provider,{value:v},de?J:Aa.createPortal(J,_))});function Ya(){var e=F({},Fa);return e.useId}var wa=0,Ca=Ya();const Xa=Ca?function(a){var r=Ca();return a||r}:function(a){var r=o.useState("ssr-id"),t=k(r,2),n=t[0],u=t[1];return o.useEffect(function(){var l=wa;wa+=1,u("rc_unique_".concat(l))},[]),a||n},Oa=e=>({animationDuration:e,animationFillMode:"both"}),pa=e=>({animationDuration:e,animationFillMode:"both"}),Ct=function(e,a,r,t){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},Oa(t)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},pa(t)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:a,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},et=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};function rt(e){var a=e.prefixCls,r=e.align,t=e.arrow,n=e.arrowPos,u=t||{},l=u.className,c=u.content,m=n.x,d=m===void 0?0:m,C=n.y,f=C===void 0?0:C,M=o.useRef();if(!r||!r.points)return null;var h={position:"absolute"};if(r.autoArrow!==!1){var g=r.points[0],P=r.points[1],N=g[0],H=g[1],T=P[0],S=P[1];N===T||!["t","b"].includes(N)?h.top=f:N==="t"?h.top=0:h.bottom=0,H===S||!["l","r"].includes(H)?h.left=d:H==="l"?h.left=0:h.right=0}return o.createElement("div",{ref:M,className:rr("".concat(a,"-arrow"),l),style:h},c)}function at(e){var a=e.prefixCls,r=e.open,t=e.zIndex,n=e.mask,u=e.motion;return n?o.createElement(xa,Ra({},u,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(l){var c=l.className;return o.createElement("div",{style:{zIndex:t},className:rr("".concat(a,"-mask"),c)})}):null}var tt=o.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),nt=o.forwardRef(function(e,a){var r=e.popup,t=e.className,n=e.prefixCls,u=e.style,l=e.target,c=e.onVisibleChanged,m=e.open,d=e.keepDom,C=e.fresh,f=e.onClick,M=e.mask,h=e.arrow,g=e.arrowPos,P=e.align,N=e.motion,H=e.maskMotion,T=e.forceRender,S=e.getPopupContainer,v=e.autoDestroy,_=e.portal,O=e.zIndex,p=e.onMouseEnter,ne=e.onMouseLeave,de=e.onPointerEnter,J=e.ready,ee=e.offsetX,fe=e.offsetY,he=e.offsetR,oe=e.offsetB,me=e.onAlign,E=e.onPrepare,z=e.stretch,b=e.targetWidth,G=e.targetHeight,$=typeof r=="function"?r():r,ie=m||d,re=(S==null?void 0:S.length)>0,ar=o.useState(!S||!re),qe=k(ar,2),ge=qe[0],Ue=qe[1];if(Q(function(){!ge&&re&&l&&Ue(!0)},[ge,re,l]),!ge)return null;var ae="auto",W={left:"-1000vw",top:"-1000vh",right:ae,bottom:ae};if(J||!m){var K,ue=P.points,le=P.dynamicInset||((K=P._experimental)===null||K===void 0?void 0:K.dynamicInset),Ve=le&&ue[0][1]==="r",tr=le&&ue[0][0]==="b";Ve?(W.right=he,W.left=ae):(W.left=ee,W.right=ae),tr?(W.bottom=oe,W.top=ae):(W.top=fe,W.bottom=ae)}var A={};return z&&(z.includes("height")&&G?A.height=G:z.includes("minHeight")&&G&&(A.minHeight=G),z.includes("width")&&b?A.width=b:z.includes("minWidth")&&b&&(A.minWidth=b)),m||(A.pointerEvents="none"),o.createElement(_,{open:T||ie,getContainer:S&&function(){return S(l)},autoDestroy:v},o.createElement(at,{prefixCls:n,open:m,zIndex:O,mask:M,motion:H}),o.createElement(za,{onResize:me,disabled:!m},function(Qe){return o.createElement(xa,Ra({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:T,leavedClassName:"".concat(n,"-hidden")},N,{onAppearPrepare:E,onEnterPrepare:E,visible:m,onVisibleChanged:function(q){var ye;N==null||(ye=N.onVisibleChanged)===null||ye===void 0||ye.call(N,q),c(q)}}),function(Se,q){var ye=Se.className,w=Se.style,Te=rr(n,ye,t);return o.createElement("div",{ref:Ia(Qe,a,q),className:Te,style:F(F(F(F({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},W),A),w),{},{boxSizing:"border-box",zIndex:O},u),onMouseEnter:p,onMouseLeave:ne,onPointerEnter:de,onClick:f},h&&o.createElement(rt,{prefixCls:n,arrow:h,arrowPos:g,align:P}),o.createElement(tt,{cache:!m&&!C},$))})}))}),ot=o.forwardRef(function(e,a){var r=e.children,t=e.getTriggerDOMNode,n=Ta(r),u=o.useCallback(function(c){ja(a,t?t(c):c)},[t]),l=Ea(u,r.ref);return n?o.cloneElement(r,{ref:l}):r}),Ma=o.createContext(null);function Sa(e){return e?Array.isArray(e)?e:[e]:[]}function it(e,a,r,t){return o.useMemo(function(){var n=Sa(r??a),u=Sa(t??a),l=new Set(n),c=new Set(u);return e&&(l.has("hover")&&(l.delete("hover"),l.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[l,c]},[e,a,r,t])}function ut(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function lt(e,a,r,t){for(var n=r.points,u=Object.keys(e),l=0;l<u.length;l+=1){var c,m=u[l];if(ut((c=e[m])===null||c===void 0?void 0:c.points,n,t))return"".concat(a,"-placement-").concat(m)}return""}function ka(e,a,r,t){return a||(r?{motionName:"".concat(e,"-").concat(r)}:t?{motionName:t}:null)}function mr(e){return e.ownerDocument.defaultView}function da(e){for(var a=[],r=e==null?void 0:e.parentElement,t=["hidden","scroll","clip","auto"];r;){var n=mr(r).getComputedStyle(r),u=n.overflowX,l=n.overflowY,c=n.overflow;[u,l,c].some(function(m){return t.includes(m)})&&a.push(r),r=r.parentElement}return a}function hr(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function fr(e){return hr(parseFloat(e),0)}function Pa(e,a){var r=F({},e);return(a||[]).forEach(function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var n=mr(t).getComputedStyle(t),u=n.overflow,l=n.overflowClipMargin,c=n.borderTopWidth,m=n.borderBottomWidth,d=n.borderLeftWidth,C=n.borderRightWidth,f=t.getBoundingClientRect(),M=t.offsetHeight,h=t.clientHeight,g=t.offsetWidth,P=t.clientWidth,N=fr(c),H=fr(m),T=fr(d),S=fr(C),v=hr(Math.round(f.width/g*1e3)/1e3),_=hr(Math.round(f.height/M*1e3)/1e3),O=(g-P-T-S)*v,p=(M-h-N-H)*_,ne=N*_,de=H*_,J=T*v,ee=S*v,fe=0,he=0;if(u==="clip"){var oe=fr(l);fe=oe*v,he=oe*_}var me=f.x+J-fe,E=f.y+ne-he,z=me+f.width+2*fe-J-ee-O,b=E+f.height+2*he-ne-de-p;r.left=Math.max(r.left,me),r.top=Math.max(r.top,E),r.right=Math.min(r.right,z),r.bottom=Math.min(r.bottom,b)}}),r}function $a(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),t=r.match(/^(.*)\%$/);return t?e*(parseFloat(t[1])/100):parseFloat(r)}function Da(e,a){var r=a||[],t=k(r,2),n=t[0],u=t[1];return[$a(e.width,n),$a(e.height,u)]}function La(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function er(e,a){var r=a[0],t=a[1],n,u;return r==="t"?u=e.y:r==="b"?u=e.y+e.height:u=e.y+e.height/2,t==="l"?n=e.x:t==="r"?n=e.x+e.width:n=e.x+e.width/2,{x:n,y:u}}function Re(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(t,n){return n===a?r[t]||"c":t}).join("")}function st(e,a,r,t,n,u,l){var c=o.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:n[t]||{}}),m=k(c,2),d=m[0],C=m[1],f=o.useRef(0),M=o.useMemo(function(){return a?da(a):[]},[a]),h=o.useRef({}),g=function(){h.current={}};e||g();var P=je(function(){if(a&&r&&e){let X=function(Me,Ie){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te,pe=$.x+Me,vr=$.y+Ie,dr=pe+K,Hr=vr+W,ea=Math.max(pe,Oe.left),ra=Math.max(vr,Oe.top),aa=Math.min(dr,Oe.right),ta=Math.min(Hr,Oe.bottom);return Math.max(0,(aa-ea)*(ta-ra))},Wr=function(){$e=$.y+y,De=$e+W,Le=$.x+R,Ke=Le+K};var T,S,v=a,_=v.ownerDocument,O=mr(v),p=O.getComputedStyle(v),ne=p.width,de=p.height,J=p.position,ee=v.style.left,fe=v.style.top,he=v.style.right,oe=v.style.bottom,me=v.style.overflow,E=F(F({},n[t]),u),z=_.createElement("div");(T=v.parentElement)===null||T===void 0||T.appendChild(z),z.style.left="".concat(v.offsetLeft,"px"),z.style.top="".concat(v.offsetTop,"px"),z.style.position=J,z.style.height="".concat(v.offsetHeight,"px"),z.style.width="".concat(v.offsetWidth,"px"),v.style.left="0",v.style.top="0",v.style.right="auto",v.style.bottom="auto",v.style.overflow="hidden";var b;if(Array.isArray(r))b={x:r[0],y:r[1],width:0,height:0};else{var G=r.getBoundingClientRect();b={x:G.x,y:G.y,width:G.width,height:G.height}}var $=v.getBoundingClientRect(),ie=_.documentElement,re=ie.clientWidth,ar=ie.clientHeight,qe=ie.scrollWidth,ge=ie.scrollHeight,Ue=ie.scrollTop,ae=ie.scrollLeft,W=$.height,K=$.width,ue=b.height,le=b.width,Ve={left:0,top:0,right:re,bottom:ar},tr={left:-ae,top:-Ue,right:qe-ae,bottom:ge-Ue},A=E.htmlRegion,Qe="visible",Se="visibleFirst";A!=="scroll"&&A!==Se&&(A=Qe);var q=A===Se,ye=Pa(tr,M),w=Pa(Ve,M),Te=A===Qe?w:ye,Z=q?w:Te;v.style.left="auto",v.style.top="auto",v.style.right="0",v.style.bottom="0";var gr=v.getBoundingClientRect();v.style.left=ee,v.style.top=fe,v.style.right=he,v.style.bottom=oe,v.style.overflow=me,(S=v.parentElement)===null||S===void 0||S.removeChild(z);var Ee=hr(Math.round(K/parseFloat(ne)*1e3)/1e3),xe=hr(Math.round(W/parseFloat(de)*1e3)/1e3);if(Ee===0||xe===0||va(r)&&!qa(r))return;var yr=E.offset,I=E.targetOffset,Fr=Da($,yr),br=k(Fr,2),te=br[0],Y=br[1],se=Da(b,I),wr=k(se,2),Cr=wr[0],Ir=wr[1];b.x-=Cr,b.y-=Ir;var Je=E.points||[],U=k(Je,2),ke=U[0],jr=U[1],be=La(jr),V=La(ke),Mr=er(b,be),nr=er($,V),Pe=F({},E),R=Mr.x-nr.x+te,y=Mr.y-nr.y+Y,ce=X(R,y),ve=X(R,y,w),ze=er(b,["t","l"]),or=er($,["t","l"]),ir=er(b,["b","r"]),ur=er($,["b","r"]),j=E.overflow||{},qr=j.adjustX,Sr=j.adjustY,Ge=j.shiftX,lr=j.shiftY,kr=function(Ie){return typeof Ie=="boolean"?Ie:Ie>=0},$e,De,Le,Ke;Wr();var sr=kr(Sr),cr=V[0]===be[0];if(sr&&V[0]==="t"&&(De>Z.bottom||h.current.bt)){var We=y;cr?We-=W-ue:We=ze.y-ur.y-Y;var He=X(R,We),Ur=X(R,We,w);He>ce||He===ce&&(!q||Ur>=ve)?(h.current.bt=!0,y=We,Y=-Y,Pe.points=[Re(V,0),Re(be,0)]):h.current.bt=!1}if(sr&&V[0]==="b"&&($e<Z.top||h.current.tb)){var B=y;cr?B+=W-ue:B=ir.y-or.y-Y;var Pr=X(R,B),Vr=X(R,B,w);Pr>ce||Pr===ce&&(!q||Vr>=ve)?(h.current.tb=!0,y=B,Y=-Y,Pe.points=[Re(V,0),Re(be,0)]):h.current.tb=!1}var $r=kr(qr),Dr=V[1]===be[1];if($r&&V[1]==="l"&&(Ke>Z.right||h.current.rl)){var _e=R;Dr?_e-=K-le:_e=ze.x-ur.x-te;var Lr=X(_e,y),Qr=X(_e,y,w);Lr>ce||Lr===ce&&(!q||Qr>=ve)?(h.current.rl=!0,R=_e,te=-te,Pe.points=[Re(V,1),Re(be,1)]):h.current.rl=!1}if($r&&V[1]==="r"&&(Le<Z.left||h.current.lr)){var Be=R;Dr?Be+=K-le:Be=ir.x-or.x-te;var Nr=X(Be,y),Ze=X(Be,y,w);Nr>ce||Nr===ce&&(!q||Ze>=ve)?(h.current.lr=!0,R=Be,te=-te,Pe.points=[Re(V,1),Re(be,1)]):h.current.lr=!1}Wr();var we=Ge===!0?0:Ge;typeof we=="number"&&(Le<w.left&&(R-=Le-w.left-te,b.x+le<w.left+we&&(R+=b.x-w.left+le-we)),Ke>w.right&&(R-=Ke-w.right-te,b.x>w.right-we&&(R+=b.x-w.right+we)));var Ae=lr===!0?0:lr;typeof Ae=="number"&&($e<w.top&&(y-=$e-w.top-Y,b.y+ue<w.top+Ae&&(y+=b.y-w.top+ue-Ae)),De>w.bottom&&(y-=De-w.bottom-Y,b.y>w.bottom-Ae&&(y+=b.y-w.bottom+Ae)));var Ye=$.x+R,Xe=Ye+K,Ce=$.y+y,Rr=Ce+W,Fe=b.x,Ne=Fe+le,Tr=b.y,Jr=Tr+ue,Gr=Math.max(Ye,Fe),Er=Math.min(Xe,Ne),Kr=(Gr+Er)/2,Zr=Kr-Ye,Yr=Math.max(Ce,Tr),xr=Math.min(Rr,Jr),Xr=(Yr+xr)/2,Or=Xr-Ce;l==null||l(a,Pe);var zr=gr.right-$.x-(R+$.width),pr=gr.bottom-$.y-(y+$.height);C({ready:!0,offsetX:R/Ee,offsetY:y/xe,offsetR:zr/Ee,offsetB:pr/xe,arrowX:Zr/Ee,arrowY:Or/xe,scaleX:Ee,scaleY:xe,align:Pe})}}),N=function(){f.current+=1;var S=f.current;Promise.resolve().then(function(){f.current===S&&P()})},H=function(){C(function(S){return F(F({},S),{},{ready:!1})})};return Q(H,[t]),Q(function(){e||H()},[e]),[d.ready,d.offsetX,d.offsetY,d.offsetR,d.offsetB,d.arrowX,d.arrowY,d.scaleX,d.scaleY,d.align,N]}function ct(e,a,r,t,n){Q(function(){if(e&&a&&r){let f=function(){t(),n()};var u=a,l=r,c=da(u),m=da(l),d=mr(l),C=new Set([d].concat(ca(c),ca(m)));return C.forEach(function(M){M.addEventListener("scroll",f,{passive:!0})}),d.addEventListener("resize",f,{passive:!0}),t(),function(){C.forEach(function(M){M.removeEventListener("scroll",f),d.removeEventListener("resize",f)})}}},[e,a,r])}function vt(e,a,r,t,n,u,l,c){var m=o.useRef(e);m.current=e,o.useEffect(function(){if(a&&t&&(!n||u)){var d=function(h){var g=h.target;m.current&&!l(g)&&c(!1)},C=mr(t);C.addEventListener("mousedown",d,!0),C.addEventListener("contextmenu",d,!0);var f=sa(r);return f&&(f.addEventListener("mousedown",d,!0),f.addEventListener("contextmenu",d,!0)),function(){C.removeEventListener("mousedown",d,!0),C.removeEventListener("contextmenu",d,!0),f&&(f.removeEventListener("mousedown",d,!0),f.removeEventListener("contextmenu",d,!0))}}},[a,r,t,n,u])}var dt=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ft(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_a,a=o.forwardRef(function(r,t){var n=r.prefixCls,u=n===void 0?"rc-trigger-popup":n,l=r.children,c=r.action,m=c===void 0?"hover":c,d=r.showAction,C=r.hideAction,f=r.popupVisible,M=r.defaultPopupVisible,h=r.onPopupVisibleChange,g=r.afterPopupVisibleChange,P=r.mouseEnterDelay,N=r.mouseLeaveDelay,H=N===void 0?.1:N,T=r.focusDelay,S=r.blurDelay,v=r.mask,_=r.maskClosable,O=_===void 0?!0:_,p=r.getPopupContainer,ne=r.forceRender,de=r.autoDestroy,J=r.destroyPopupOnHide,ee=r.popup,fe=r.popupClassName,he=r.popupStyle,oe=r.popupPlacement,me=r.builtinPlacements,E=me===void 0?{}:me,z=r.popupAlign,b=r.zIndex,G=r.stretch,$=r.getPopupClassNameFromAlign,ie=r.fresh,re=r.alignPoint,ar=r.onPopupClick,qe=r.onPopupAlign,ge=r.arrow,Ue=r.popupMotion,ae=r.maskMotion,W=r.popupTransitionName,K=r.popupAnimation,ue=r.maskTransitionName,le=r.maskAnimation,Ve=r.className,tr=r.getTriggerDOMNode,A=Ba(r,dt),Qe=de||J||!1,Se=o.useState(!1),q=k(Se,2),ye=q[0],w=q[1];Q(function(){w(et())},[]);var Te=o.useRef({}),Z=o.useContext(Ma),gr=o.useMemo(function(){return{registerSubPopup:function(s,D){Te.current[s]=D,Z==null||Z.registerSubPopup(s,D)}}},[Z]),Ee=Xa(),xe=o.useState(null),yr=k(xe,2),I=yr[0],Fr=yr[1],br=je(function(i){va(i)&&I!==i&&Fr(i),Z==null||Z.registerSubPopup(Ee,i)}),te=o.useState(null),Y=k(te,2),se=Y[0],wr=Y[1],Cr=o.useRef(null),Ir=je(function(i){va(i)&&se!==i&&(wr(i),Cr.current=i)}),Je=o.Children.only(l),U=(Je==null?void 0:Je.props)||{},ke={},jr=je(function(i){var s,D,x=se;return(x==null?void 0:x.contains(i))||((s=sa(x))===null||s===void 0?void 0:s.host)===i||i===x||(I==null?void 0:I.contains(i))||((D=sa(I))===null||D===void 0?void 0:D.host)===i||i===I||Object.values(Te.current).some(function(L){return(L==null?void 0:L.contains(i))||i===L})}),be=ka(u,Ue,K,W),V=ka(u,ae,le,ue),Mr=o.useState(M||!1),nr=k(Mr,2),Pe=nr[0],R=nr[1],y=f??Pe,ce=je(function(i){f===void 0&&R(i)});Q(function(){R(f||!1)},[f]);var ve=o.useRef(y);ve.current=y;var ze=o.useRef([]);ze.current=[];var or=je(function(i){var s;ce(i),((s=ze.current[ze.current.length-1])!==null&&s!==void 0?s:y)!==i&&(ze.current.push(i),h==null||h(i))}),ir=o.useRef(),ur=function(){clearTimeout(ir.current)},j=function(s){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ur(),D===0?or(s):ir.current=setTimeout(function(){or(s)},D*1e3)};o.useEffect(function(){return ur},[]);var qr=o.useState(!1),Sr=k(qr,2),Ge=Sr[0],lr=Sr[1];Q(function(i){(!i||y)&&lr(!0)},[y]);var kr=o.useState(null),$e=k(kr,2),De=$e[0],Le=$e[1],Ke=o.useState([0,0]),sr=k(Ke,2),cr=sr[0],We=sr[1],He=function(s){We([s.clientX,s.clientY])},Ur=st(y,I,re?cr:se,oe,E,z,qe),B=k(Ur,11),Pr=B[0],Vr=B[1],$r=B[2],Dr=B[3],_e=B[4],Lr=B[5],Qr=B[6],Be=B[7],Nr=B[8],Ze=B[9],we=B[10],Ae=it(ye,m,d,C),Ye=k(Ae,2),Xe=Ye[0],Ce=Ye[1],Rr=Xe.has("click"),Fe=Ce.has("click")||Ce.has("contextMenu"),Ne=je(function(){Ge||we()}),Tr=function(){ve.current&&re&&Fe&&j(!1)};ct(y,se,I,Ne,Tr),Q(function(){Ne()},[cr,oe]),Q(function(){y&&!(E!=null&&E[oe])&&Ne()},[JSON.stringify(z)]);var Jr=o.useMemo(function(){var i=lt(E,u,Ze,re);return rr(i,$==null?void 0:$(Ze))},[Ze,$,E,u,re]);o.useImperativeHandle(t,function(){return{nativeElement:Cr.current,forceAlign:Ne}});var Gr=o.useState(0),Er=k(Gr,2),Kr=Er[0],Zr=Er[1],Yr=o.useState(0),xr=k(Yr,2),Xr=xr[0],Or=xr[1],zr=function(){if(G&&se){var s=se.getBoundingClientRect();Zr(s.width),Or(s.height)}},pr=function(){zr(),Ne()},X=function(s){lr(!1),we(),g==null||g(s)},Wr=function(){return new Promise(function(s){zr(),Le(function(){return s})})};Q(function(){De&&(we(),De(),Le(null))},[De]);function Me(i,s,D,x){ke[i]=function(L){var _r;x==null||x(L),j(s,D);for(var na=arguments.length,fa=new Array(na>1?na-1:0),Br=1;Br<na;Br++)fa[Br-1]=arguments[Br];(_r=U[i])===null||_r===void 0||_r.call.apply(_r,[U,L].concat(fa))}}(Rr||Fe)&&(ke.onClick=function(i){var s;ve.current&&Fe?j(!1):!ve.current&&Rr&&(He(i),j(!0));for(var D=arguments.length,x=new Array(D>1?D-1:0),L=1;L<D;L++)x[L-1]=arguments[L];(s=U.onClick)===null||s===void 0||s.call.apply(s,[U,i].concat(x))}),vt(y,Fe,se,I,v,O,jr,j);var Ie=Xe.has("hover"),Oe=Ce.has("hover"),pe,vr;Ie&&(Me("onMouseEnter",!0,P,function(i){He(i)}),Me("onPointerEnter",!0,P,function(i){He(i)}),pe=function(s){(y||Ge)&&I!==null&&I!==void 0&&I.contains(s.target)&&j(!0,P)},re&&(ke.onMouseMove=function(i){var s;(s=U.onMouseMove)===null||s===void 0||s.call(U,i)})),Oe&&(Me("onMouseLeave",!1,H),Me("onPointerLeave",!1,H),vr=function(){j(!1,H)}),Xe.has("focus")&&Me("onFocus",!0,T),Ce.has("focus")&&Me("onBlur",!1,S),Xe.has("contextMenu")&&(ke.onContextMenu=function(i){var s;ve.current&&Ce.has("contextMenu")?j(!1):(He(i),j(!0)),i.preventDefault();for(var D=arguments.length,x=new Array(D>1?D-1:0),L=1;L<D;L++)x[L-1]=arguments[L];(s=U.onContextMenu)===null||s===void 0||s.call.apply(s,[U,i].concat(x))}),Ve&&(ke.className=rr(U.className,Ve));var dr=F(F({},U),ke),Hr={},ea=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ea.forEach(function(i){A[i]&&(Hr[i]=function(){for(var s,D=arguments.length,x=new Array(D),L=0;L<D;L++)x[L]=arguments[L];(s=dr[i])===null||s===void 0||s.call.apply(s,[dr].concat(x)),A[i].apply(A,x)})});var ra=o.cloneElement(Je,F(F({},dr),Hr)),aa={x:Lr,y:Qr},ta=ge?F({},ge!==!0?ge:{}):null;return o.createElement(o.Fragment,null,o.createElement(za,{disabled:!y,ref:Ir,onResize:pr},o.createElement(ot,{getTriggerDOMNode:tr},ra)),o.createElement(Ma.Provider,{value:gr},o.createElement(nt,{portal:e,ref:br,prefixCls:u,popup:ee,className:rr(fe,Jr),style:he,target:se,onMouseEnter:pe,onMouseLeave:vr,onPointerEnter:pe,zIndex:b,open:y,keepDom:Ge,fresh:ie,onClick:ar,mask:v,motion:be,maskMotion:V,onVisibleChanged:X,onPrepare:Wr,forceRender:ne,autoDestroy:Qe,getPopupContainer:p,align:Ze,arrow:ta,arrowPos:aa,ready:Pr,offsetX:Vr,offsetY:$r,offsetR:Dr,offsetB:_e,onAlign:Ne,stretch:G,targetWidth:Kr/Be,targetHeight:Xr/Nr})))});return a}const Mt=ft(_a);export{_a as P,Mt as T,et as a,wt as b,Qa as c,Ct as d,bt as g,yt as i,Xa as u};
