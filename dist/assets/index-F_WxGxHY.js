import{r as y,R as K,B as Ve,j as e,i as br,f as xr,g as wr,c as jr,u as Cr,b as Er,d as _r}from"./index-kPzU05gx.js";import{a as oe}from"./api-p_bhudRe.js";/* empty css                      */import{C as nt}from"./CompassOutlined-bm2ISpxK.js";import{A as ot,_ as at,c as Pr}from"./AntdIcon-rDAQJIgd.js";import{B as Z}from"./context-Cu6KQni0.js";import{g as Mr,m as Sr,r as Rr,u as Ar,T as Dr,k as Nr,C as Tr}from"./useSize-Dir-JjEK.js";import{S as Ir}from"./index-C_g5XK6A.js";import{u as Or}from"./useLocale-D_rXO8QB.js";import{m as xe}from"./index-BfF3jSoh.js";import{R as Ze}from"./index-BHFLF1lE.js";import{S as kr,R as Fr}from"./resetDoctorPassword-DFVyLTqe.js";import{C as bt}from"./index-CsRKGip1.js";import{M as Oe}from"./index-DmsyNvo6.js";import{D as xt}from"./index-BF14nszc.js";import{M as et}from"./index-qm-UxHX_.js";import{T as $r}from"./index-DSAf5tNC.js";import{D as Lr,T as wt}from"./Table-B0u-CeGd.js";import{I as be}from"./index-DdU0LtvV.js";import{D as jt}from"./index-BUWDoS_L.js";import{I as Br}from"./index-DTCjzQCT.js";import{T as Ct}from"./index-Bg0REs51.js";import{s as Qe}from"./index-DkzRl__G.js";import{T as Et}from"./index-DbV3c2Ud.js";import{S as _t}from"./index-CDd_3z3j.js";import{U as zr}from"./UploadOutlined-B24A8yXa.js";import{S as Ur}from"./SearchOutlined-BKygTbfa.js";import{P as Hr}from"./PlusOutlined-CtSp6DS-.js";import{C as Qr}from"./CheckOutlined-CJXAI-D_.js";import"./render-CJmks47J.js";import"./Serializer-CQbcCsmu.js";import"./context-Cq6TeAM8.js";import"./KeyCode-Bp2GxRS5.js";import"./ExclamationCircleFilled-C5haNHtp.js";import"./InfoCircleFilled-aimHxtz3.js";import"./LockOutlined-DYTWSnnz.js";import"./index-DvbXQ1GL.js";import"./PurePanel-DZZoC6Qu.js";import"./EllipsisOutlined-CT_kym8T.js";import"./Overflow-DH1nb5VS.js";import"./index-BxaDw8tE.js";import"./Dropdown-BnNsehg0.js";import"./useForceUpdate-B--ZqLvt.js";import"./responsiveObserver-BuWZJpCK.js";import"./CalendarOutlined-FfBpZXtG.js";import"./ClockCircleOutlined---JEIzSM.js";var Wr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};const Vr=Wr;var Yr=function(u,b){return y.createElement(ot,at({},u,{ref:b,icon:Vr}))};const qr=y.forwardRef(Yr);var Gr=Object.defineProperty,We=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,Pt=(v,u,b)=>u in v?Gr(v,u,{enumerable:!0,configurable:!0,writable:!0,value:b}):v[u]=b,rt=(v,u)=>{for(var b in u||(u={}))Mt.call(u,b)&&Pt(v,b,u[b]);if(We)for(var b of We(u))St.call(u,b)&&Pt(v,b,u[b]);return v},Rt=(v,u)=>{var b={};for(var h in v)Mt.call(v,h)&&u.indexOf(h)<0&&(b[h]=v[h]);if(v!=null&&We)for(var h of We(v))u.indexOf(h)<0&&St.call(v,h)&&(b[h]=v[h]);return b};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ke;(v=>{const u=class{constructor(r,t,n,o){if(this.version=r,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],r<u.MIN_VERSION||r>u.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=r*4+17;let c=[];for(let g=0;g<this.size;g++)c.push(!1);for(let g=0;g<this.size;g++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(n);if(this.drawCodewords(w),o==-1){let g=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const E=this.getPenaltyScore();E<g&&(o=S,g=E),this.applyMask(S)}}_(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(r,t){const n=v.QrSegment.makeSegments(r);return u.encodeSegments(n,t)}static encodeBinary(r,t){const n=v.QrSegment.makeBytes(r);return u.encodeSegments([n],t)}static encodeSegments(r,t,n=1,o=40,c=-1,w=!0){if(!(u.MIN_VERSION<=n&&n<=o&&o<=u.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let g,S;for(g=n;;g++){const m=u.getNumDataCodewords(g,t)*8,j=C.getTotalBits(r,g);if(j<=m){S=j;break}if(g>=o)throw new RangeError("Data too long")}for(const m of[u.Ecc.MEDIUM,u.Ecc.QUARTILE,u.Ecc.HIGH])w&&S<=u.getNumDataCodewords(g,m)*8&&(t=m);let E=[];for(const m of r){h(m.mode.modeBits,4,E),h(m.numChars,m.mode.numCharCountBits(g),E);for(const j of m.getData())E.push(j)}_(E.length==S);const N=u.getNumDataCodewords(g,t)*8;_(E.length<=N),h(0,Math.min(4,N-E.length),E),h(0,(8-E.length%8)%8,E),_(E.length%8==0);for(let m=236;E.length<N;m^=253)h(m,8,E);let I=[];for(;I.length*8<E.length;)I.push(0);return E.forEach((m,j)=>I[j>>>3]|=m<<7-(j&7)),new u(g,t,I,c)}getModule(r,t){return 0<=r&&r<this.size&&0<=t&&t<this.size&&this.modules[t][r]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const r=this.getAlignmentPatternPositions(),t=r.length;for(let n=0;n<t;n++)for(let o=0;o<t;o++)n==0&&o==0||n==0&&o==t-1||n==t-1&&o==0||this.drawAlignmentPattern(r[n],r[o]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(r){const t=this.errorCorrectionLevel.formatBits<<3|r;let n=t;for(let c=0;c<10;c++)n=n<<1^(n>>>9)*1335;const o=(t<<10|n)^21522;_(o>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,M(o,c));this.setFunctionModule(8,7,M(o,6)),this.setFunctionModule(8,8,M(o,7)),this.setFunctionModule(7,8,M(o,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,M(o,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,M(o,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,M(o,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let r=this.version;for(let n=0;n<12;n++)r=r<<1^(r>>>11)*7973;const t=this.version<<12|r;_(t>>>18==0);for(let n=0;n<18;n++){const o=M(t,n),c=this.size-11+n%3,w=Math.floor(n/3);this.setFunctionModule(c,w,o),this.setFunctionModule(w,c,o)}}drawFinderPattern(r,t){for(let n=-4;n<=4;n++)for(let o=-4;o<=4;o++){const c=Math.max(Math.abs(o),Math.abs(n)),w=r+o,g=t+n;0<=w&&w<this.size&&0<=g&&g<this.size&&this.setFunctionModule(w,g,c!=2&&c!=4)}}drawAlignmentPattern(r,t){for(let n=-2;n<=2;n++)for(let o=-2;o<=2;o++)this.setFunctionModule(r+o,t+n,Math.max(Math.abs(o),Math.abs(n))!=1)}setFunctionModule(r,t,n){this.modules[t][r]=n,this.isFunction[t][r]=!0}addEccAndInterleave(r){const t=this.version,n=this.errorCorrectionLevel;if(r.length!=u.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");const o=u.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],c=u.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],w=Math.floor(u.getNumRawDataModules(t)/8),g=o-w%o,S=Math.floor(w/o);let E=[];const N=u.reedSolomonComputeDivisor(c);for(let m=0,j=0;m<o;m++){let T=r.slice(j,j+S-c+(m<g?0:1));j+=T.length;const L=u.reedSolomonComputeRemainder(T,N);m<g&&T.push(0),E.push(T.concat(L))}let I=[];for(let m=0;m<E[0].length;m++)E.forEach((j,T)=>{(m!=S-c||T>=g)&&I.push(j[m])});return _(I.length==w),I}drawCodewords(r){if(r.length!=Math.floor(u.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let o=0;o<this.size;o++)for(let c=0;c<2;c++){const w=n-c,S=(n+1&2)==0?this.size-1-o:o;!this.isFunction[S][w]&&t<r.length*8&&(this.modules[S][w]=M(r[t>>>3],7-(t&7)),t++)}}_(t==r.length*8)}applyMask(r){if(r<0||r>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let o;switch(r){case 0:o=(n+t)%2==0;break;case 1:o=t%2==0;break;case 2:o=n%3==0;break;case 3:o=(n+t)%3==0;break;case 4:o=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:o=n*t%2+n*t%3==0;break;case 6:o=(n*t%2+n*t%3)%2==0;break;case 7:o=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&o&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let r=0;for(let c=0;c<this.size;c++){let w=!1,g=0,S=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[c][E]==w?(g++,g==5?r+=u.PENALTY_N1:g>5&&r++):(this.finderPenaltyAddHistory(g,S),w||(r+=this.finderPenaltyCountPatterns(S)*u.PENALTY_N3),w=this.modules[c][E],g=1);r+=this.finderPenaltyTerminateAndCount(w,g,S)*u.PENALTY_N3}for(let c=0;c<this.size;c++){let w=!1,g=0,S=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][c]==w?(g++,g==5?r+=u.PENALTY_N1:g>5&&r++):(this.finderPenaltyAddHistory(g,S),w||(r+=this.finderPenaltyCountPatterns(S)*u.PENALTY_N3),w=this.modules[E][c],g=1);r+=this.finderPenaltyTerminateAndCount(w,g,S)*u.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let w=0;w<this.size-1;w++){const g=this.modules[c][w];g==this.modules[c][w+1]&&g==this.modules[c+1][w]&&g==this.modules[c+1][w+1]&&(r+=u.PENALTY_N2)}let t=0;for(const c of this.modules)t=c.reduce((w,g)=>w+(g?1:0),t);const n=this.size*this.size,o=Math.ceil(Math.abs(t*20-n*10)/n)-1;return _(0<=o&&o<=9),r+=o*u.PENALTY_N4,_(0<=r&&r<=2568888),r}getAlignmentPatternPositions(){if(this.version==1)return[];{const r=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(r*2-2))*2;let n=[6];for(let o=this.size-7;n.length<r;o-=t)n.splice(1,0,o);return n}}static getNumRawDataModules(r){if(r<u.MIN_VERSION||r>u.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*r+128)*r+64;if(r>=2){const n=Math.floor(r/7)+2;t-=(25*n-10)*n-55,r>=7&&(t-=36)}return _(208<=t&&t<=29648),t}static getNumDataCodewords(r,t){return Math.floor(u.getNumRawDataModules(r)/8)-u.ECC_CODEWORDS_PER_BLOCK[t.ordinal][r]*u.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][r]}static reedSolomonComputeDivisor(r){if(r<1||r>255)throw new RangeError("Degree out of range");let t=[];for(let o=0;o<r-1;o++)t.push(0);t.push(1);let n=1;for(let o=0;o<r;o++){for(let c=0;c<t.length;c++)t[c]=u.reedSolomonMultiply(t[c],n),c+1<t.length&&(t[c]^=t[c+1]);n=u.reedSolomonMultiply(n,2)}return t}static reedSolomonComputeRemainder(r,t){let n=t.map(o=>0);for(const o of r){const c=o^n.shift();n.push(0),t.forEach((w,g)=>n[g]^=u.reedSolomonMultiply(w,c))}return n}static reedSolomonMultiply(r,t){if(r>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let o=7;o>=0;o--)n=n<<1^(n>>>7)*285,n^=(t>>>o&1)*r;return _(n>>>8==0),n}finderPenaltyCountPatterns(r){const t=r[1];_(t<=this.size*3);const n=t>0&&r[2]==t&&r[3]==t*3&&r[4]==t&&r[5]==t;return(n&&r[0]>=t*4&&r[6]>=t?1:0)+(n&&r[6]>=t*4&&r[0]>=t?1:0)}finderPenaltyTerminateAndCount(r,t,n){return r&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(r,t){t[0]==0&&(r+=this.size),t.pop(),t.unshift(r)}};let b=u;b.MIN_VERSION=1,b.MAX_VERSION=40,b.PENALTY_N1=3,b.PENALTY_N2=3,b.PENALTY_N3=40,b.PENALTY_N4=10,b.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],b.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],v.QrCode=b;function h(r,t,n){if(t<0||t>31||r>>>t)throw new RangeError("Value out of range");for(let o=t-1;o>=0;o--)n.push(r>>>o&1)}function M(r,t){return(r>>>t&1)!=0}function _(r){if(!r)throw new Error("Assertion error")}const x=class{constructor(r,t,n){if(this.mode=r,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(r){let t=[];for(const n of r)h(n,8,t);return new x(x.Mode.BYTE,r.length,t)}static makeNumeric(r){if(!x.isNumeric(r))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<r.length;){const o=Math.min(r.length-n,3);h(parseInt(r.substr(n,o),10),o*3+1,t),n+=o}return new x(x.Mode.NUMERIC,r.length,t)}static makeAlphanumeric(r){if(!x.isAlphanumeric(r))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],n;for(n=0;n+2<=r.length;n+=2){let o=x.ALPHANUMERIC_CHARSET.indexOf(r.charAt(n))*45;o+=x.ALPHANUMERIC_CHARSET.indexOf(r.charAt(n+1)),h(o,11,t)}return n<r.length&&h(x.ALPHANUMERIC_CHARSET.indexOf(r.charAt(n)),6,t),new x(x.Mode.ALPHANUMERIC,r.length,t)}static makeSegments(r){return r==""?[]:x.isNumeric(r)?[x.makeNumeric(r)]:x.isAlphanumeric(r)?[x.makeAlphanumeric(r)]:[x.makeBytes(x.toUtf8ByteArray(r))]}static makeEci(r){let t=[];if(r<0)throw new RangeError("ECI assignment value out of range");if(r<128)h(r,8,t);else if(r<16384)h(2,2,t),h(r,14,t);else if(r<1e6)h(6,3,t),h(r,21,t);else throw new RangeError("ECI assignment value out of range");return new x(x.Mode.ECI,0,t)}static isNumeric(r){return x.NUMERIC_REGEX.test(r)}static isAlphanumeric(r){return x.ALPHANUMERIC_REGEX.test(r)}getData(){return this.bitData.slice()}static getTotalBits(r,t){let n=0;for(const o of r){const c=o.mode.numCharCountBits(t);if(o.numChars>=1<<c)return 1/0;n+=4+c+o.bitData.length}return n}static toUtf8ByteArray(r){r=encodeURI(r);let t=[];for(let n=0;n<r.length;n++)r.charAt(n)!="%"?t.push(r.charCodeAt(n)):(t.push(parseInt(r.substr(n+1,2),16)),n+=2);return t}};let C=x;C.NUMERIC_REGEX=/^[0-9]*$/,C.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,C.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",v.QrSegment=C})(ke||(ke={}));(v=>{(u=>{const b=class{constructor(M,_){this.ordinal=M,this.formatBits=_}};let h=b;h.LOW=new b(0,1),h.MEDIUM=new b(1,0),h.QUARTILE=new b(2,3),h.HIGH=new b(3,2),u.Ecc=h})(v.QrCode||(v.QrCode={}))})(ke||(ke={}));(v=>{(u=>{const b=class{constructor(M,_){this.modeBits=M,this.numBitsCharCount=_}numCharCountBits(M){return this.numBitsCharCount[Math.floor((M+7)/17)]}};let h=b;h.NUMERIC=new b(1,[10,12,14]),h.ALPHANUMERIC=new b(2,[9,11,13]),h.BYTE=new b(4,[8,16,16]),h.KANJI=new b(8,[8,10,12]),h.ECI=new b(7,[0,0,0]),u.Mode=h})(v.QrSegment||(v.QrSegment={}))})(ke||(ke={}));var Be=ke;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var At={L:Be.QrCode.Ecc.LOW,M:Be.QrCode.Ecc.MEDIUM,Q:Be.QrCode.Ecc.QUARTILE,H:Be.QrCode.Ecc.HIGH},Dt=128,Nt="L",Tt="#FFFFFF",It="#000000",Ot=!1,st=4,Kr=.1;function kt(v,u=0){const b=[];return v.forEach(function(h,M){let _=null;h.forEach(function(x,C){if(!x&&_!==null){b.push(`M${_+u} ${M+u}h${C-_}v1H${_+u}z`),_=null;return}if(C===h.length-1){if(!x)return;_===null?b.push(`M${C+u},${M+u} h1v1H${C+u}z`):b.push(`M${_+u},${M+u} h${C+1-_}v1H${_+u}z`);return}x&&_===null&&(_=C)})}),b.join("")}function Ft(v,u){return v.slice().map((b,h)=>h<u.y||h>=u.y+u.h?b:b.map((M,_)=>_<u.x||_>=u.x+u.w?M:!1))}function $t(v,u,b,h){if(h==null)return null;const M=b?st:0,_=v.length+M*2,x=Math.floor(u*Kr),C=_/u,r=(h.width||x)*C,t=(h.height||x)*C,n=h.x==null?v.length/2-r/2:h.x*C,o=h.y==null?v.length/2-t/2:h.y*C;let c=null;if(h.excavate){let w=Math.floor(n),g=Math.floor(o),S=Math.ceil(r+n-w),E=Math.ceil(t+o-g);c={x:w,y:g,w:S,h:E}}return{x:n,y:o,h:t,w:r,excavation:c}}var Jr=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Xr(v){const u=v,{value:b,size:h=Dt,level:M=Nt,bgColor:_=Tt,fgColor:x=It,includeMargin:C=Ot,style:r,imageSettings:t}=u,n=Rt(u,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),o=t==null?void 0:t.src,c=y.useRef(null),w=y.useRef(null),[g,S]=y.useState(!1);y.useEffect(()=>{if(c.current!=null){const I=c.current,m=I.getContext("2d");if(!m)return;let j=Be.QrCode.encodeText(b,At[M]).getModules();const T=C?st:0,L=j.length+T*2,z=$t(j,h,C,t),O=w.current,H=z!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;H&&z.excavation!=null&&(j=Ft(j,z.excavation));const ee=window.devicePixelRatio||1;I.height=I.width=h*ee;const J=h/L*ee;m.scale(J,J),m.fillStyle=_,m.fillRect(0,0,L,L),m.fillStyle=x,Jr?m.fill(new Path2D(kt(j,T))):j.forEach(function(le,U){le.forEach(function(V,ae){V&&m.fillRect(ae+T,U+T,1,1)})}),H&&m.drawImage(O,z.x+T,z.y+T,z.w,z.h)}}),y.useEffect(()=>{S(!1)},[o]);const E=rt({height:h,width:h},r);let N=null;return o!=null&&(N=K.createElement("img",{src:o,key:o,style:{display:"none"},onLoad:()=>{S(!0)},ref:w})),K.createElement(K.Fragment,null,K.createElement("canvas",rt({style:E,height:h,width:h,ref:c},n)),N)}function Zr(v){const u=v,{value:b,size:h=Dt,level:M=Nt,bgColor:_=Tt,fgColor:x=It,includeMargin:C=Ot,imageSettings:r}=u,t=Rt(u,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let n=Be.QrCode.encodeText(b,At[M]).getModules();const o=C?st:0,c=n.length+o*2,w=$t(n,h,C,r);let g=null;r!=null&&w!=null&&(w.excavation!=null&&(n=Ft(n,w.excavation)),g=K.createElement("image",{xlinkHref:r.src,height:w.h,width:w.w,x:w.x+o,y:w.y+o,preserveAspectRatio:"none"}));const S=kt(n,o);return K.createElement("svg",rt({height:h,width:h,viewBox:`0 0 ${c} ${c}`},t),K.createElement("path",{fill:_,d:`M0,0 h${c}v${c}H0z`,shapeRendering:"crispEdges"}),K.createElement("path",{fill:x,d:S,shapeRendering:"crispEdges"}),g)}const en=v=>{const{componentCls:u,lineWidth:b,lineType:h,colorSplit:M}=v;return{[u]:Object.assign(Object.assign({},Rr(v)),{display:"flex",justifyContent:"center",alignItems:"center",padding:v.paddingSM,backgroundColor:v.colorWhite,borderRadius:v.borderRadiusLG,border:`${Ar(b)} ${h} ${M}`,position:"relative",overflow:"hidden",[`& > ${u}-mask`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",color:v.colorText,lineHeight:v.lineHeight,background:v.QRCodeMaskBackgroundColor,textAlign:"center",[`& > ${u}-expired, & > ${u}-scanned`]:{color:v.QRCodeTextColor}},"> canvas":{alignSelf:"stretch",flex:"auto",minWidth:0},"&-icon":{marginBlockEnd:v.marginXS,fontSize:v.controlHeight}}),[`${u}-borderless`]:{borderColor:"transparent"}}},tn=v=>({QRCodeMaskBackgroundColor:new Dr(v.colorBgContainer).setAlpha(.96).toRgbString()}),rn=Mr("QRCode",v=>{const u=Sr(v,{QRCodeTextColor:v.colorText});return en(u)},tn),nn=v=>{const[,u]=Nr(),{value:b,type:h="canvas",icon:M="",size:_=160,iconSize:x=40,color:C=u.colorText,errorLevel:r="M",status:t="active",bordered:n=!0,onRefresh:o,style:c,className:w,rootClassName:g,prefixCls:S,bgColor:E="transparent"}=v,{getPrefixCls:N}=y.useContext(Tr),I=N("qrcode",S),[m,j,T]=rn(I),z={value:b,size:_,level:r,bgColor:E,fgColor:C,style:{width:void 0,height:void 0},imageSettings:M?{src:M,x:void 0,y:void 0,height:x,width:x,excavate:!0}:void 0},[O]=Or("QRCode");if(!b)return null;const H=Pr(I,w,g,j,T,{[`${I}-borderless`]:!n});return m(K.createElement("div",{className:H,style:Object.assign(Object.assign({},c),{width:_,height:_,backgroundColor:E})},t!=="active"&&K.createElement("div",{className:`${I}-mask`},t==="loading"&&K.createElement(Ir,null),t==="expired"&&K.createElement(K.Fragment,null,K.createElement("p",{className:`${I}-expired`},O==null?void 0:O.expired),o&&K.createElement(Z,{type:"link",icon:K.createElement(qr,null),onClick:o},O==null?void 0:O.refresh)),t==="scanned"&&K.createElement("p",{className:`${I}-scanned`},O==null?void 0:O.scanned)),h==="canvas"?K.createElement(Xr,Object.assign({},z)):K.createElement(Zr,Object.assign({},z))))},Lt=nn;var on={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const an=on;var sn=function(u,b){return y.createElement(ot,at({},u,{ref:b,icon:an}))};const ln=y.forwardRef(sn);var cn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 000 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0013.5-4.7L863.9 169a7.9 7.9 0 00-8.9-8.9zM416.6 562.3a8.03 8.03 0 00-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 00-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"}}]},name:"expand-alt",theme:"outlined"};const dn=cn;var un=function(u,b){return y.createElement(ot,at({},u,{ref:b,icon:dn}))};const fn=y.forwardRef(un),it="/assets/insta-BjFwv1PC.png",lt="/assets/wp-hover-BnA9rGAO.png",hn=K.forwardRef(({nome:v,days:u,date:b,reason:h,professionalId:M,qrCodeUrl:_},x)=>{const[C,r]=y.useState(null),[t,n]=y.useState(null),[o,c]=y.useState(null),[w,g]=y.useState(Date.now());y.useEffect(()=>{_&&g(Date.now())},[_]);const S=()=>{const E=new Date,N=E.getDate(),m=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][E.getMonth()],j=E.getFullYear();return`${N} de ${m} de ${j}`};return y.useEffect(()=>{M&&(async()=>{try{const N=await oe.get(`/professionals/${M}`);if(r(N.data),N.data.company_id){const I=await oe.get(`/companies/${N.data.company_id}`);n(I.data)}}catch(N){console.error("Erro ao buscar detalhes do profissional ou da empresa",N),xe.error("Erro ao buscar detalhes do profissional ou da empresa")}})()},[M]),y.useEffect(()=>{let E=!0;if(t&&t.logo_path){const N=new Image;N.src=t.logo_path,c(`${Ve}/${t.logo_path}`),N.onload=()=>{E&&n(I=>({...I}))},N.onerror=I=>{console.error("Erro ao carregar a imagem:",I)}}return()=>{E=!1}},[t]),e.jsxs("div",{className:"certificate-page",ref:x,children:[t&&t.logo_path&&e.jsxs("div",{className:"cabecalho",children:[e.jsx("div",{className:"company-logo",children:e.jsx("img",{src:o,alt:"Logo da Empresa"})}),e.jsx("h3",{children:t.nome})]}),e.jsx("div",{className:"certificate-title",children:e.jsx("h1",{children:"Atestado Médico"})}),e.jsx("div",{className:"certificate-body",children:e.jsxs("p",{className:"indented-text",children:["Informo para os devidos fins que ",v," precisa ficar afastado(a) de suas atividades por um período de ",u," dia(s) a partir de ",b,". CID10: ",h]})}),e.jsxs("div",{className:"certificate-signature",children:[C&&C.assinatura&&e.jsx("img",{src:`data:image/png;base64,${C.assinatura}`,alt:"Assinatura"}),e.jsx("div",{className:"doctor-info",children:C&&e.jsxs(e.Fragment,{children:[C.nome,e.jsx("br",{}),C.titulo,e.jsx("br",{}),C.registro_profissional,e.jsx("br",{}),e.jsx("br",{})]})})]}),e.jsx("div",{className:"footer",children:C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"certificate-contato",children:[t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:it,alt:`Instagram de ${C.nome}`}),e.jsx("p",{children:t.instagram&&t.instagram.startsWith("@")?t.instagram.slice(1):t.instagram})]}),t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:lt,alt:`WhatsApp de ${C.nome}`}),e.jsx("p",{children:t.telefone})]})]}),t&&e.jsxs("div",{className:"certificate-endereco",children:[e.jsxs("p",{children:[e.jsx(nt,{})," ",t.endereco,e.jsx("br",{})]}),e.jsxs("p",{children:["Emitido em ",S()]})]})]})}),e.jsxs("div",{className:"qr-code-container",children:[e.jsx("p",{children:"Confirme o atestado acessando o QrCode"}),_&&e.jsx(e.Fragment,{children:e.jsx(Lt,{size:90,value:_},_)})]})]})});var Bt={exports:{}};(function(v,u){(function(b,h){v.exports=h(y,br)})(typeof self<"u"?self:xr,function(b,h){return function(){var M={328:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrintContextConsumer=t.PrintContext=void 0;var o=n(496),c=Object.prototype.hasOwnProperty.call(o,"createContext");t.PrintContext=c?o.createContext({}):null,t.PrintContextConsumer=t.PrintContext?t.PrintContext.Consumer:function(){return null}},428:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReactToPrint=void 0;var o=n(316),c=n(496),w=n(190),g=n(328),S=n(940),E=function(N){function I(){var m=N.apply(this,o.__spreadArray([],o.__read(arguments),!1))||this;return m.startPrint=function(j){var T=m.props,L=T.onAfterPrint,z=T.onPrintError,O=T.print,H=T.documentTitle;setTimeout(function(){var ee,J;if(j.contentWindow)if(j.contentWindow.focus(),O)O(j).then(function(){return L==null?void 0:L()}).then(function(){return m.handleRemoveIframe()}).catch(function(V){z?z("print",V):m.logMessages(["An error was thrown by the specified `print` function"])});else{if(j.contentWindow.print){var le=(J=(ee=j.contentDocument)===null||ee===void 0?void 0:ee.title)!==null&&J!==void 0?J:"",U=j.ownerDocument.title;H&&(j.ownerDocument.title=H,j.contentDocument&&(j.contentDocument.title=H)),j.contentWindow.print(),H&&(j.ownerDocument.title=U,j.contentDocument&&(j.contentDocument.title=le))}else m.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);L==null||L(),m.handleRemoveIframe()}else m.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},m.triggerPrint=function(j){var T=m.props,L=T.onBeforePrint,z=T.onPrintError;if(L){var O=L();O&&typeof O.then=="function"?O.then(function(){m.startPrint(j)}).catch(function(H){z&&z("onBeforePrint",H)}):m.startPrint(j)}else m.startPrint(j)},m.handlePrint=function(j){var T=m.props,L=T.bodyClass,z=T.content,O=T.copyStyles,H=T.fonts,ee=T.pageStyle,J=T.nonce,le=typeof j=="function"?j():null;if(le&&typeof z=="function"&&m.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),le||typeof z!="function"||(le=z()),le!==void 0)if(le!==null){var U=document.createElement("iframe");U.width="".concat(document.documentElement.clientWidth,"px"),U.height="".concat(document.documentElement.clientHeight,"px"),U.style.position="absolute",U.style.top="-".concat(document.documentElement.clientHeight+100,"px"),U.style.left="-".concat(document.documentElement.clientWidth+100,"px"),U.id="printWindow",U.srcdoc="<!DOCTYPE html>";var V=(0,w.findDOMNode)(le);if(V){var ae=V.cloneNode(!0),se=ae instanceof Text,Me=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Se=se?[]:ae.querySelectorAll("img"),_e=se?[]:ae.querySelectorAll("video"),Fe=H?H.length:0;m.numResourcesToLoad=Me.length+Se.length+_e.length+Fe,m.resourcesLoaded=[],m.resourcesErrored=[];var Y=function(ge,ye){m.resourcesLoaded.includes(ge)?m.logMessages(["Tried to mark a resource that has already been handled",ge],"debug"):(ye?(m.logMessages(o.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],o.__read(ye),!1)),m.resourcesErrored.push(ge)):m.resourcesLoaded.push(ge),m.resourcesLoaded.length+m.resourcesErrored.length===m.numResourcesToLoad&&m.triggerPrint(U))};U.onload=function(){var ge,ye,we,je;U.onload=null;var q=U.contentDocument||((ye=U.contentWindow)===null||ye===void 0?void 0:ye.document);if(q){q.body.appendChild(ae),H&&(!((we=U.contentDocument)===null||we===void 0)&&we.fonts&&(!((je=U.contentWindow)===null||je===void 0)&&je.FontFace)?H.forEach(function(ie){var $=new FontFace(ie.family,ie.source,{weight:ie.weight,style:ie.style});U.contentDocument.fonts.add($),$.loaded.then(function(){Y($)}).catch(function(W){Y($,["Failed loading the font:",$,"Load error:",W])})}):(H.forEach(function(ie){return Y(ie)}),m.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var Re=typeof ee=="function"?ee():ee;if(typeof Re!="string")m.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof Re,'". Styles from `pageStyle` will not be applied.')]);else{var Pe=q.createElement("style");J&&(Pe.setAttribute("nonce",J),q.head.setAttribute("nonce",J)),Pe.appendChild(q.createTextNode(Re)),q.head.appendChild(Pe)}if(L&&(ge=q.body.classList).add.apply(ge,o.__spreadArray([],o.__read(L.split(" ")),!1)),!se){for(var a=se?[]:V.querySelectorAll("canvas"),s=q.querySelectorAll("canvas"),i=0;i<a.length;++i){var d=a[i],f=s[i].getContext("2d");f&&f.drawImage(d,0,0)}var D=function(ie){var $=Se[ie],W=$.getAttribute("src");if(W){var re=new Image;re.onload=function(){return Y($)},re.onerror=function(he,Ae,$e,me,te){return Y($,["Error loading <img>",$,"Error",te])},re.src=W}else Y($,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',$])};for(i=0;i<Se.length;i++)D(i);var R=function(ie){var $=_e[ie];$.preload="auto";var W=$.getAttribute("poster");if(W){var re=new Image;re.onload=function(){return Y($)},re.onerror=function(he,Ae,$e,me,te){return Y($,["Error loading video poster",W,"for video",$,"Error:",te])},re.src=W}else $.readyState>=2?Y($):($.onloadeddata=function(){return Y($)},$.onerror=function(he,Ae,$e,me,te){return Y($,["Error loading video",$,"Error",te])},$.onstalled=function(){return Y($,["Loading video stalled, skipping",$])})};for(i=0;i<_e.length;i++)R(i);var k="input",X=V.querySelectorAll(k),G=q.querySelectorAll(k);for(i=0;i<X.length;i++)G[i].value=X[i].value;var A="input[type=checkbox],input[type=radio]",B=V.querySelectorAll(A),ce=q.querySelectorAll(A);for(i=0;i<B.length;i++)ce[i].checked=B[i].checked;var de="select",ue=V.querySelectorAll(de),Ce=q.querySelectorAll(de);for(i=0;i<ue.length;i++)Ce[i].value=ue[i].value}if(O)for(var ve=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),Ee=function(ie,$){var W=ve[ie];if(W.tagName.toLowerCase()==="style"){var re=q.createElement(W.tagName),he=W.sheet;if(he){var Ae="";try{for(var $e=he.cssRules.length,me=0;me<$e;++me)typeof he.cssRules[me].cssText=="string"&&(Ae+="".concat(he.cssRules[me].cssText,`\r
`))}catch{m.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",W],"warning")}re.setAttribute("id","react-to-print-".concat(ie)),J&&re.setAttribute("nonce",J),re.appendChild(q.createTextNode(Ae)),q.head.appendChild(re)}}else if(W.getAttribute("href"))if(W.hasAttribute("disabled"))m.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",W],"warning"),Y(W);else{for(var te=q.createElement(W.tagName),ze=(me=0,W.attributes.length);me<ze;++me){var Le=W.attributes[me];Le&&te.setAttribute(Le.nodeName,Le.nodeValue||"")}te.onload=function(){return Y(te)},te.onerror=function(qe,Ue,Ge,Ke,Je){return Y(te,["Failed to load",te,"Error:",Je])},J&&te.setAttribute("nonce",J),q.head.appendChild(te)}else m.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",W],"warning"),Y(W)},Ye=(i=0,ve.length);i<Ye;++i)Ee(i)}m.numResourcesToLoad!==0&&O||m.triggerPrint(U)},m.handleRemoveIframe(!0),document.body.appendChild(U)}else m.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else m.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else m.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},m.handleRemoveIframe=function(j){var T=m.props.removeAfterPrint;if(j||T){var L=document.getElementById("printWindow");L&&document.body.removeChild(L)}},m.logMessages=function(j,T){T===void 0&&(T="error"),m.props.suppressErrors||(T==="error"?console.error(j):T==="warning"?console.warn(j):T==="debug"&&console.debug(j))},m}return o.__extends(I,N),I.prototype.handleClick=function(m,j){var T=this,L=this.props,z=L.onBeforeGetContent,O=L.onPrintError;if(z){var H=z();H&&typeof H.then=="function"?H.then(function(){return T.handlePrint(j)}).catch(function(ee){O&&O("onBeforeGetContent",ee)}):this.handlePrint(j)}else this.handlePrint(j)},I.prototype.render=function(){var m=this.props,j=m.children,T=m.trigger;if(T)return c.cloneElement(T(),{onClick:this.handleClick.bind(this)});if(!g.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var L={handlePrint:this.handleClick.bind(this)};return c.createElement(g.PrintContext.Provider,{value:L},j)},I.defaultProps=S.defaultProps,I}(c.Component);t.ReactToPrint=E},940:function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=void 0,t.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReactToPrint=void 0;var o=n(316),c=n(496),w=n(428),g=n(940),S=n(860),E=Object.prototype.hasOwnProperty.call(c,"useMemo")&&Object.prototype.hasOwnProperty.call(c,"useCallback");t.useReactToPrint=function(N){if(!E)return N.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var I=c.useMemo(function(){return new w.ReactToPrint(o.__assign(o.__assign({},g.defaultProps),N))},[N]);return c.useCallback(function(m,j){return(0,S.wrapCallbackWithArgs)(I,I.handleClick,j)(m)},[I])}},860:function(r,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCallbackWithArgs=void 0;var o=n(316);t.wrapCallbackWithArgs=function(c,w){for(var g=[],S=2;S<arguments.length;S++)g[S-2]=arguments[S];return function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return w.apply(c,o.__spreadArray(o.__spreadArray([],o.__read(E),!1),o.__read(g),!1))}}},496:function(r){r.exports=b},190:function(r){r.exports=h},316:function(r,t,n){n.r(t),n.d(t,{__addDisposableResource:function(){return q},__assign:function(){return w},__asyncDelegator:function(){return Me},__asyncGenerator:function(){return se},__asyncValues:function(){return Se},__await:function(){return ae},__awaiter:function(){return L},__classPrivateFieldGet:function(){return ye},__classPrivateFieldIn:function(){return je},__classPrivateFieldSet:function(){return we},__createBinding:function(){return O},__decorate:function(){return S},__disposeResources:function(){return Pe},__esDecorate:function(){return N},__exportStar:function(){return H},__extends:function(){return c},__generator:function(){return z},__importDefault:function(){return ge},__importStar:function(){return Y},__makeTemplateObject:function(){return _e},__metadata:function(){return T},__param:function(){return E},__propKey:function(){return m},__read:function(){return J},__rest:function(){return g},__runInitializers:function(){return I},__setFunctionName:function(){return j},__spread:function(){return le},__spreadArray:function(){return V},__spreadArrays:function(){return U},__values:function(){return ee}});var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,d){i.__proto__=d}||function(i,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(i[f]=d[f])},o(a,s)};function c(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function i(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}var w=function(){return w=Object.assign||function(a){for(var s,i=1,d=arguments.length;i<d;i++)for(var f in s=arguments[i])Object.prototype.hasOwnProperty.call(s,f)&&(a[f]=s[f]);return a},w.apply(this,arguments)};function g(a,s){var i={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&s.indexOf(d)<0&&(i[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var f=0;for(d=Object.getOwnPropertySymbols(a);f<d.length;f++)s.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(a,d[f])&&(i[d[f]]=a[d[f]])}return i}function S(a,s,i,d){var f,D=arguments.length,R=D<3?s:d===null?d=Object.getOwnPropertyDescriptor(s,i):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,s,i,d);else for(var k=a.length-1;k>=0;k--)(f=a[k])&&(R=(D<3?f(R):D>3?f(s,i,R):f(s,i))||R);return D>3&&R&&Object.defineProperty(s,i,R),R}function E(a,s){return function(i,d){s(i,d,a)}}function N(a,s,i,d,f,D){function R(Ee){if(Ee!==void 0&&typeof Ee!="function")throw new TypeError("Function expected");return Ee}for(var k,X=d.kind,G=X==="getter"?"get":X==="setter"?"set":"value",A=!s&&a?d.static?a:a.prototype:null,B=s||(A?Object.getOwnPropertyDescriptor(A,d.name):{}),ce=!1,de=i.length-1;de>=0;de--){var ue={};for(var Ce in d)ue[Ce]=Ce==="access"?{}:d[Ce];for(var Ce in d.access)ue.access[Ce]=d.access[Ce];ue.addInitializer=function(Ee){if(ce)throw new TypeError("Cannot add initializers after decoration has completed");D.push(R(Ee||null))};var ve=(0,i[de])(X==="accessor"?{get:B.get,set:B.set}:B[G],ue);if(X==="accessor"){if(ve===void 0)continue;if(ve===null||typeof ve!="object")throw new TypeError("Object expected");(k=R(ve.get))&&(B.get=k),(k=R(ve.set))&&(B.set=k),(k=R(ve.init))&&f.unshift(k)}else(k=R(ve))&&(X==="field"?f.unshift(k):B[G]=k)}A&&Object.defineProperty(A,d.name,B),ce=!0}function I(a,s,i){for(var d=arguments.length>2,f=0;f<s.length;f++)i=d?s[f].call(a,i):s[f].call(a);return d?i:void 0}function m(a){return typeof a=="symbol"?a:"".concat(a)}function j(a,s,i){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:i?"".concat(i," ",s):s})}function T(a,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,s)}function L(a,s,i,d){return new(i||(i=Promise))(function(f,D){function R(G){try{X(d.next(G))}catch(A){D(A)}}function k(G){try{X(d.throw(G))}catch(A){D(A)}}function X(G){var A;G.done?f(G.value):(A=G.value,A instanceof i?A:new i(function(B){B(A)})).then(R,k)}X((d=d.apply(a,s||[])).next())})}function z(a,s){var i,d,f,D,R={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return D={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function k(X){return function(G){return function(A){if(i)throw new TypeError("Generator is already executing.");for(;D&&(D=0,A[0]&&(R=0)),R;)try{if(i=1,d&&(f=2&A[0]?d.return:A[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,A[1])).done)return f;switch(d=0,f&&(A=[2&A[0],f.value]),A[0]){case 0:case 1:f=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,d=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((f=(f=R.trys).length>0&&f[f.length-1])||A[0]!==6&&A[0]!==2)){R=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){R.label=A[1];break}if(A[0]===6&&R.label<f[1]){R.label=f[1],f=A;break}if(f&&R.label<f[2]){R.label=f[2],R.ops.push(A);break}f[2]&&R.ops.pop(),R.trys.pop();continue}A=s.call(a,R)}catch(B){A=[6,B],d=0}finally{i=f=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([X,G])}}}var O=Object.create?function(a,s,i,d){d===void 0&&(d=i);var f=Object.getOwnPropertyDescriptor(s,i);f&&!("get"in f?!s.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(a,d,f)}:function(a,s,i,d){d===void 0&&(d=i),a[d]=s[i]};function H(a,s){for(var i in a)i==="default"||Object.prototype.hasOwnProperty.call(s,i)||O(s,a,i)}function ee(a){var s=typeof Symbol=="function"&&Symbol.iterator,i=s&&a[s],d=0;if(i)return i.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(a,s){var i=typeof Symbol=="function"&&a[Symbol.iterator];if(!i)return a;var d,f,D=i.call(a),R=[];try{for(;(s===void 0||s-- >0)&&!(d=D.next()).done;)R.push(d.value)}catch(k){f={error:k}}finally{try{d&&!d.done&&(i=D.return)&&i.call(D)}finally{if(f)throw f.error}}return R}function le(){for(var a=[],s=0;s<arguments.length;s++)a=a.concat(J(arguments[s]));return a}function U(){for(var a=0,s=0,i=arguments.length;s<i;s++)a+=arguments[s].length;var d=Array(a),f=0;for(s=0;s<i;s++)for(var D=arguments[s],R=0,k=D.length;R<k;R++,f++)d[f]=D[R];return d}function V(a,s,i){if(i||arguments.length===2)for(var d,f=0,D=s.length;f<D;f++)!d&&f in s||(d||(d=Array.prototype.slice.call(s,0,f)),d[f]=s[f]);return a.concat(d||Array.prototype.slice.call(s))}function ae(a){return this instanceof ae?(this.v=a,this):new ae(a)}function se(a,s,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,f=i.apply(a,s||[]),D=[];return d={},R("next"),R("throw"),R("return"),d[Symbol.asyncIterator]=function(){return this},d;function R(B){f[B]&&(d[B]=function(ce){return new Promise(function(de,ue){D.push([B,ce,de,ue])>1||k(B,ce)})})}function k(B,ce){try{(de=f[B](ce)).value instanceof ae?Promise.resolve(de.value.v).then(X,G):A(D[0][2],de)}catch(ue){A(D[0][3],ue)}var de}function X(B){k("next",B)}function G(B){k("throw",B)}function A(B,ce){B(ce),D.shift(),D.length&&k(D[0][0],D[0][1])}}function Me(a){var s,i;return s={},d("next"),d("throw",function(f){throw f}),d("return"),s[Symbol.iterator]=function(){return this},s;function d(f,D){s[f]=a[f]?function(R){return(i=!i)?{value:ae(a[f](R)),done:!1}:D?D(R):R}:D}}function Se(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=a[Symbol.asyncIterator];return i?i.call(a):(a=ee(a),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=a[f]&&function(D){return new Promise(function(R,k){(function(X,G,A,B){Promise.resolve(B).then(function(ce){X({value:ce,done:A})},G)})(R,k,(D=a[f](D)).done,D.value)})}}}function _e(a,s){return Object.defineProperty?Object.defineProperty(a,"raw",{value:s}):a.raw=s,a}var Fe=Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s};function Y(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var i in a)i!=="default"&&Object.prototype.hasOwnProperty.call(a,i)&&O(s,a,i);return Fe(s,a),s}function ge(a){return a&&a.__esModule?a:{default:a}}function ye(a,s,i,d){if(i==="a"&&!d)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?d:i==="a"?d.call(a):d?d.value:s.get(a)}function we(a,s,i,d,f){if(d==="m")throw new TypeError("Private method is not writable");if(d==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!f:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return d==="a"?f.call(a,i):f?f.value=i:s.set(a,i),i}function je(a,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof a=="function"?s===a:a.has(s)}function q(a,s,i){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var d;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");d=s[Symbol.asyncDispose]}if(d===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");d=s[Symbol.dispose]}if(typeof d!="function")throw new TypeError("Object not disposable.");a.stack.push({value:s,dispose:d,async:i})}else i&&a.stack.push({async:!0});return s}var Re=typeof SuppressedError=="function"?SuppressedError:function(a,s,i){var d=new Error(i);return d.name="SuppressedError",d.error=a,d.suppressed=s,d};function Pe(a){function s(i){a.error=a.hasError?new Re(i,a.error,"An error was suppressed during disposal."):i,a.hasError=!0}return function i(){for(;a.stack.length;){var d=a.stack.pop();try{var f=d.dispose&&d.dispose.call(d.value);if(d.async)return Promise.resolve(f).then(i,function(D){return s(D),i()})}catch(D){s(D)}}if(a.hasError)throw a.error}()}t.default={__extends:c,__assign:w,__rest:g,__decorate:S,__param:E,__metadata:T,__awaiter:L,__generator:z,__createBinding:O,__exportStar:H,__values:ee,__read:J,__spread:le,__spreadArrays:U,__spreadArray:V,__await:ae,__asyncGenerator:se,__asyncDelegator:Me,__asyncValues:Se,__makeTemplateObject:_e,__importStar:Y,__importDefault:ge,__classPrivateFieldGet:ye,__classPrivateFieldSet:we,__classPrivateFieldIn:je,__addDisposableResource:q,__disposeResources:Pe}}},_={};function x(r){var t=_[r];if(t!==void 0)return t.exports;var n=_[r]={exports:{}};return M[r](n,n.exports,x),n.exports}x.d=function(r,t){for(var n in t)x.o(t,n)&&!x.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},x.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},x.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var C={};return function(){var r=C;Object.defineProperty(r,"__esModule",{value:!0}),r.useReactToPrint=r.ReactToPrint=r.PrintContextConsumer=void 0;var t=x(328);Object.defineProperty(r,"PrintContextConsumer",{enumerable:!0,get:function(){return t.PrintContextConsumer}});var n=x(428);Object.defineProperty(r,"ReactToPrint",{enumerable:!0,get:function(){return n.ReactToPrint}});var o=x(892);Object.defineProperty(r,"useReactToPrint",{enumerable:!0,get:function(){return o.useReactToPrint}});var c=x(428);r.default=c.ReactToPrint}(),C}()})})(Bt);var mn=Bt.exports;const tt=wr(mn),pn=K.forwardRef(({nome:v,date:u,professionalId:b,startTime:h,endTime:M,qrCodeUrl:_},x)=>{const[C,r]=y.useState(null),[t,n]=y.useState(null),[o,c]=y.useState(null),[w,g]=y.useState(Date.now());y.useEffect(()=>{_&&g(Date.now())},[_]);const S=()=>{const E=new Date,N=E.getDate(),m=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][E.getMonth()],j=E.getFullYear();return`${N} de ${m} de ${j}`};return y.useEffect(()=>{b&&(async()=>{try{const N=await oe.get(`/professionals/${b}`);if(r(N.data),N.data.company_id){const I=await oe.get(`/companies/${N.data.company_id}`);n(I.data)}}catch(N){console.error("Erro ao buscar detalhes do profissional ou da empresa",N),xe.error("Erro ao buscar detalhes do profissional ou da empresa")}})()},[b]),y.useEffect(()=>{let E=!0;if(t&&t.logo_path){const N=new Image;N.src=t.logo_path,c(`${Ve}/${t.logo_path}`),N.onload=()=>{E&&n(I=>({...I}))},N.onerror=I=>{console.error("Erro ao carregar a imagem:",I)}}return()=>{E=!1}},[t]),e.jsxs("div",{className:"certificate-page",ref:x,children:[t&&t.logo_path&&e.jsxs("div",{className:"cabecalho",children:[e.jsx("div",{className:"company-logo",children:e.jsx("img",{src:o,alt:"Logo da Empresa"})}),e.jsx("h3",{children:t.nome})]}),e.jsx("div",{className:"certificate-title",children:e.jsx("h1",{children:"Declaração"})}),e.jsx("div",{className:"certificate-body",children:e.jsxs("p",{className:"indented-text",children:["Informo para os devidos fins que ",v," compareceu em nosso estabelecimento no dia ",u," das ",h," até as ",M,"."]})}),e.jsxs("div",{className:"certificate-signature",children:[C&&C.assinatura&&e.jsx("img",{src:`data:image/png;base64,${C.assinatura}`,alt:"Assinatura"}),e.jsx("div",{className:"doctor-info",children:C&&e.jsxs(e.Fragment,{children:[C.nome,e.jsx("br",{}),C.titulo,e.jsx("br",{}),C.registro_profissional,e.jsx("br",{}),e.jsx("br",{})]})})]}),e.jsx("div",{className:"footer",children:C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"certificate-contato",children:[t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:it,alt:`Instagram de ${C.nome}`}),e.jsx("p",{children:t.instagram&&t.instagram.startsWith("@")?t.instagram.slice(1):t.instagram})]}),t&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:lt,alt:`WhatsApp de ${C.nome}`}),e.jsx("p",{children:t.telefone})]})]}),t&&e.jsxs("div",{className:"certificate-endereco",children:[e.jsxs("p",{children:[e.jsx(nt,{})," ",t.endereco,e.jsx("br",{})]}),e.jsxs("p",{children:["Emitido em, ",S()]})]})]})}),e.jsxs("div",{className:"qr-code-container",children:[e.jsx("p",{children:"Confirme a declaração acessando o QrCode"}),_&&e.jsx(e.Fragment,{children:e.jsx(Lt,{size:90,value:_},_)})]})]})}),gn=K.forwardRef(({nome:v,professionalId:u,medicamentos:b},h)=>{const[M,_]=y.useState(null),[x,C]=y.useState(null),[r,t]=y.useState(null),n=()=>{const o=new Date,c=o.getDate(),g=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][o.getMonth()],S=o.getFullYear();return`${c} de ${g} de ${S}`};return y.useEffect(()=>{u&&(async()=>{try{const c=await oe.get(`/professionals/${u}`);if(_(c.data),c.data.company_id){const w=await oe.get(`/companies/${c.data.company_id}`);C(w.data)}}catch(c){console.error("Erro ao buscar detalhes do profissional ou da empresa",c),xe.error("Erro ao buscar detalhes do profissional ou da empresa")}})()},[u]),y.useEffect(()=>{let o=!0;if(x&&x.logo_path){const c=new Image;c.src=x.logo_path,t(`${Ve}/${x.logo_path}`),c.onload=()=>{o&&C(w=>({...w}))},c.onerror=w=>{console.error("Erro ao carregar a imagem:",w)}}return()=>{o=!1}},[x]),e.jsxs("div",{className:"certificate-page",ref:h,children:[x&&x.logo_path&&e.jsxs("div",{className:"cabecalho",children:[e.jsx("div",{className:"company-logo",children:e.jsx("img",{src:r,alt:"Logo da Empresa"})}),e.jsx("h3",{children:x.nome})]}),e.jsx("div",{className:"certificate-title",children:e.jsx("h1",{children:"Receita Médica"})}),e.jsx("div",{className:"certificate-body",children:e.jsxs("p",{className:"indented-text",children:["Pciente: ",v," ",e.jsx("br",{}),e.jsx("ul",{children:b.map((o,c)=>e.jsx("li",{children:o},c))})]})}),e.jsxs("div",{className:"certificate-signature",children:[M&&M.assinatura&&e.jsx("img",{src:`data:image/png;base64,${M.assinatura}`,alt:"Assinatura"}),e.jsx("div",{className:"doctor-info",children:M&&e.jsxs(e.Fragment,{children:[M.nome,e.jsx("br",{}),M.titulo,e.jsx("br",{}),M.registro_profissional,e.jsx("br",{}),e.jsx("br",{})]})})]}),e.jsx("div",{className:"footer",children:M&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"certificate-contato",children:[x&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:it,alt:`Instagram de ${M.nome}`}),e.jsx("p",{children:x.instagram&&x.instagram.startsWith("@")?x.instagram.slice(1):x.instagram})]}),x&&e.jsxs("div",{className:"certificate-itens",children:[e.jsx("img",{src:lt,alt:`WhatsApp de ${M.nome}`}),e.jsx("p",{children:x.telefone})]})]}),x&&e.jsxs("div",{className:"certificate-endereco",children:[e.jsxs("p",{children:[e.jsx(nt,{})," ",x.endereco,e.jsx("br",{})]}),e.jsxs("p",{children:["Emitido em, ",n()]})]})]})})]})}),yn=({isOpenCameraModal:v,onClose:u,onCapture:b})=>{const h=y.useRef(null),[M,_]=y.useState(null);y.useEffect(()=>{const C=async()=>{if(v&&h.current)try{const t=await navigator.mediaDevices.getUserMedia({video:!0});h.current.srcObject=t}catch(t){console.error("Error accessing the camera",t)}},r=()=>{h.current&&h.current.srcObject&&(h.current.srcObject.getTracks().forEach(t=>t.stop()),h.current.srcObject=null)};return C(),r},[v]);const x=()=>{if(h.current){const C=document.createElement("canvas");C.width=h.current.videoWidth,C.height=h.current.videoHeight,C.getContext("2d").drawImage(h.current,0,0,C.width,C.height),C.toBlob(t=>{const n=URL.createObjectURL(t);_(n),b(n),h.current.srcObject.getTracks().forEach(o=>o.stop()),h.current.srcObject=null})}};return e.jsx(e.Fragment,{children:e.jsxs(Oe,{title:"Captura de foto 📸",open:v,onCancel:()=>{u(),h.current&&h.current.srcObject&&(h.current.srcObject.getTracks().forEach(C=>C.stop()),h.current.srcObject=null)},footer:null,children:[e.jsx(xt,{}),M?e.jsx("img",{src:M,alt:"Capturada",style:{width:"100%"}}):e.jsx("video",{ref:h,autoPlay:!0,style:{width:"100%",transform:"scaleX(-1)"}}),e.jsx(xt,{}),e.jsxs(Z,{type:"primary",onClick:x,style:{marginTop:"10px",width:"100%"},children:[e.jsx(ln,{})," Tirar Foto"]})]})})},fo=()=>{const[v,u]=y.useState(window.innerWidth<768),[b,h]=y.useState(!0),{id:M}=jr(),_=Cr(),[x,C]=y.useState({nome:""}),[r,t]=y.useState({nome:"",data_nascimento:""}),[n,o]=y.useState(null),[c,w]=y.useState(!1),[g,S]=y.useState({date:null,days:1,reason:""}),[E,N]=y.useState([]),[I,m]=y.useState(!1),[j,T]=y.useState({matricula:"",senha:""}),[L,z]=y.useState(null),[O,H]=y.useState(null),[ee,J]=y.useState([]),[le,U]=y.useState(!1),[V,ae]=y.useState({date:null,startTime:null,endTime:null}),[se,Me]=y.useState({medicamentos:[""]}),[Se,_e]=y.useState(!1),[Fe,Y]=y.useState(!0),[ge,ye]=y.useState(""),[we,je]=y.useState(null),[q,Re]=y.useState([]),[Pe,a]=y.useState(!1),s=y.useRef(null),i=y.useRef(null),d=y.useRef(null),f=Er(),D=y.useRef(),[R,k]=y.useState([]),[X,G]=y.useState(!1),[A,B]=y.useState(""),[ce,de]=y.useState(null),[ue,Ce]=y.useState([]),[ve,Ee]=y.useState(""),[Ye,ie]=y.useState(!1),[$,W]=y.useState({}),{authData:re}=_r(),he=re.companyID,Ae=re.userSpecialties||[],$e=Ae.includes(1)||Ae.includes(2),[me,te]=y.useState(null),[ze,Le]=y.useState(null),[qe,Ue]=y.useState(!1),[Ge,Ke]=y.useState(!1),Je=()=>{Ue(!0)},zt=l=>{fetch(l).then(p=>p.blob()).then(p=>{const P=new File([p],"captured-image.jpg",{type:"image/jpeg"});yt(P,300,300,.7,F=>{const Q=URL.createObjectURL(F);te(Q),Le(F),Ue(!1)})}).catch(p=>{console.error("Error converting captured image to file:",p),xe.error("Erro ao converter a imagem capturada.")})},Ut=()=>{w(!0)},ct=()=>{w(!1)},Ht=()=>{U(!0)},Qt=()=>{_e(!0)},dt=()=>{_e(!1)},ut=()=>{je("certificate"),Xe()},Wt=()=>{je("declaration"),Xe()},Vt=()=>{je("recipe"),Xe()};y.useEffect(()=>{Pe&&D.current&&(D.current.handlePrint(),a(!1))},[Pe]),y.useEffect(()=>{(async()=>{if(he&&re.authToken)try{const p=await oe.get(`/professionals?company_id=${he}`,{headers:{Authorization:`Bearer ${re.authToken}`}});if(p.status!==200)throw new Error("Falha ao buscar dados dos profissionais");const F=bt.AES.decrypt(p.data,"%A0533266q6td9g*"),Q=JSON.parse(F.toString(bt.enc.Utf8));Ce(Q)}catch(p){console.error("Error fetching professionals:",p)}else console.error("Company ID or auth token not found in local storage")})()},[he,re.authToken]),y.useEffect(()=>{(async()=>{try{const p=await oe.get(`/clients/${O}/notes`);k(p.data)}catch(p){console.error("Erro ao buscar anotações",p)}})()},[O]),y.useEffect(()=>{const l=()=>u(window.innerWidth<768);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const Yt=(l,p)=>{const P=[...se.medicamentos];P[l]=p,Me({...se,medicamentos:P})},qt=()=>{Me({...se,medicamentos:[...se.medicamentos,""]})},Gt=l=>{const p=[...se.medicamentos];p.splice(l,1),Me({...se,medicamentos:p})};y.useEffect(()=>{(async()=>{var p;try{const P=((p=f.state)==null?void 0:p.from)==="Pacientes";let F=M;if(!P){const fe=(await oe.get(`/agendamentos/${M}`)).data;F=fe.client_id,C(fe)}const ne=(await oe.get(`/clients/${F}`)).data;if(ne.client_foto){const pe=`${Ve}${ne.client_foto}`;te(pe)}else te(null);H(F),t(ne)}catch(P){console.error("Error fetching details:",P),xe.error("Error fetching details")}finally{h(!1)}})()},[M,f.state]);const ft=l=>{const p=l.split("/");return new Date(p[2],p[1]-1,p[0])};y.useEffect(()=>{const l=P=>P.sort((F,Q)=>{const ne=ft(F.data);return ft(Q.data)-ne});(async()=>{if(!O){console.error("clientId não está definido.");return}try{const F=(await oe.get(`/todos-agendamentos-hard?client_id=${O}&company_id=${he}`)).data.filter(pe=>pe.status===1),Q=await Promise.all(F.map(async pe=>{const fe=await oe.get(`/professionals/${pe.professional_id}`);return pe.professionalName=fe.data.nome,pe})),ne=l(Q);N(ne)}catch(P){console.error("Erro ao buscar histórico de agendamentos:",P)}})()},[O,he]);const Kt=async()=>{try{if(!O)throw new Error("ID do cliente não encontrado");const l=new FormData;if(Object.keys(r).forEach(P=>{l.append(P,r[P])}),console.log(ze),ze&&l.append("client_foto",ze),(await oe.put(`/clients/${O}`,l)).status===200)Qe.success({message:"Detalhes atualizados com sucesso!"}),C(P=>({...P,...r}));else throw new Error("Falha ao atualizar detalhes do cliente")}catch(l){console.error("Erro ao atualizar detalhes",l),xe.error(`Erro ao atualizar detalhes: ${l.message||l}`)}},Ne=(l,p)=>{t(P=>({...P,[l]:p}))},Jt=()=>{_(-1)};if(b)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(kr,{size:"large"})});if(!x||!r)return e.jsx("p",{children:"Detalhes do cliente não disponíveis."});const ht=(l,p)=>{S(P=>({...P,[l]:p}))},Xt=l=>{W(l),ie(!0)},Zt=[{title:"Data",dataIndex:"data",key:"data"},{title:"Horário",dataIndex:"horario",key:"horario"},{title:"Motivo",dataIndex:"motivo",key:"motivo"},{title:"Quem Atendeu",dataIndex:"professionalName"}],er=[{title:"Data",dataIndex:"date",key:"date",render:l=>He(l)},{title:"Paciente",dataIndex:"nome",key:"nome"},{title:"Profissional",dataIndex:"professional_name",key:"professionalName"},{title:"Detalhes",dataIndex:"notes",key:"notes",render:(l,p)=>e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:"10px"},children:l.substring(0,10)+(l.length>10?"...":"")}),e.jsxs(Z,{size:"small",type:"primary",onClick:()=>Xt(p),children:[e.jsx(fn,{}),"Expandir"]})]})}],Xe=()=>{m(!0)},mt=()=>{m(!1)},pt=l=>{const{name:p,value:P}=l.target;T(F=>({...F,[p]:P}))},tr=async()=>{try{const l=await oe.post("/professionals/authenticate",{login:j.matricula,senha:j.senha});if(l.data.autenticado){z(l.data.professional_id);const p=ue.find(P=>P.id===l.data.professional_id);if(p)Re(p);else{const P=await oe.get(`/professionals/${l.data.professional_id}`);Re(P.data)}mt(),we==="certificate"?Ut():we==="declaration"?Ht():we==="recipe"&&Qt()}else xe.error("Credenciais inválidas")}catch(l){console.error("Erro de autenticação",l),xe.error("Erro na autenticação")}},rr=async()=>{const l={nome:r.nome,professional_name:ve,date:new Date().toISOString(),notes:A,client_id:O,company_id:he};try{const p=await oe.post(`/clients/${O}/notes`,l);G(!1);const P=p.data;P.date=He(P.date),k(F=>[...F,P]),Qe.success({message:"Informação inserida com sucesso!"})}catch(p){console.error("Erro ao inserir Informação",p),Qe.error({message:"Erro ao inserir Informação"})}},nr=async l=>{S({...g,reason:l});const p=l.toLowerCase();if(p.length>3)try{const P=await oe.get(`cid10/search?query=${p}`);J(P.data)}catch(P){console.error("Erro na busca:",P)}},or=l=>{S({...g,reason:l.code}),J([])},gt=async(l,p,P,F,Q,ne,pe)=>{let fe;if(l==="certificate"?fe=`${p.nome} para ${P} de ${F} dias a partir de ${Q}!`:l==="declaration"&&(fe=`Declaração emitida por ${p.nome} para ${P}: provando que compareceu em nosso estabelecimento no dia ${Q} das ${ne} às ${pe}.`),!fe)throw console.error("Log text is null or undefined"),new Error("Não é possível enviar log com texto vazio.");try{return await oe.post("/logs_atestados",{text:fe})}catch(De){throw console.error("Erro ao registrar log:",De),xe.error("Erro ao enviar log para o backend"),De}},ar=async()=>{const l=r.nome,p=g.days,P=g.date;try{const Q=(await gt("certificate",q,l,p,P)).data.id;o(`https://marquei.com.br/#/confirm-certificate/${Q}`),a(!0)}catch(F){console.error("Erro ao emitir atestado:",F),xe.error("Ocorreu um erro ao emitir o atestado. Por favor, tente novamente.")}},sr=async()=>{const l=r.nome,{date:p,startTime:P,endTime:F}=V;try{const ne=(await gt("declaration",q,l,null,p,P,F)).data.id;o(`https://marquei.com.br/#/confirm-declaration/${ne}`),a(!0)}catch(Q){console.error("Erro ao emitir declaração:",Q),xe.error("Ocorreu um erro ao emitir a declaração. Por favor, tente novamente.")}},He=l=>{if(!l||l==="0000-00-00")return"";const[p,P,F]=l.split("T")[0].split("-");return!p||!P||!F||p==="0000"?"":`${F}/${P}/${p}`},ir=l=>{const p=l.split("/");if(p.length===3){const[P,F,Q]=p,ne=`${Q}-${F}-${P}`;Ne("data_nascimento",ne)}};function lr(l){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(String(l).toLowerCase())}function cr(l){Ne("client_email",l),!lr(l)&&l.length>0?(Y(!1),ye("Por favor, insira um email em um formato válido!")):(Y(!0),ye(""))}const dr=()=>{G(!0)},ur=()=>{G(!1)},fr=l=>{B(l.target.value)},hr=l=>{const p=ue.find(P=>P.id===l);p?(de(l),Ee(p.nome)):(de(null),Ee(""))},mr=(l,p)=>{const[P,F]=l.split(":").map(Number),[Q,ne]=p.split(":").map(Number);return!(Q<P||Q===P&&ne<F)};function yt(l,p,P,F,Q){const ne=new FileReader;ne.onload=pe=>{const fe=new Image;fe.onload=()=>{const De=document.createElement("canvas");let Te=fe.width,Ie=fe.height;Te>Ie?Te>p&&(Ie*=p/Te,Te=p):Ie>P&&(Te*=P/Ie,Ie=P),De.width=Te,De.height=Ie,De.getContext("2d").drawImage(fe,0,0,Te,Ie),De.toBlob(yr=>{const vr=new File([yr],l.name,{type:l.type,lastModified:Date.now()});Q(vr)},l.type,F)},fe.src=pe.target.result},ne.readAsDataURL(l)}const vt=l=>{const P=l instanceof Blob?new File([l],"captured-image.jpg",{type:"image/jpeg",lastModified:new Date}):l;if(!["image/png","image/jpeg","image/jpg"].includes(P.type)){xe.error("Por favor, selecione um arquivo PNG, JPG ou JPEG.");return}yt(P,300,300,.7,F=>{const Q=URL.createObjectURL(F);te(Q),Le(F)})},pr=e.jsxs(et,{children:[e.jsxs(et.Item,{children:[e.jsx("label",{htmlFor:"upload-photo",children:"Escolher arquivo"}),e.jsx("input",{type:"file",id:"upload-photo",style:{display:"none"},accept:"image/png, image/jpeg",onChange:l=>{const p=l.target.files[0];p&&vt(p)}})]},"upload"),e.jsx(et.Item,{onClick:Je,children:"Tirar foto"},"capture")]}),gr=[{key:"1",tab:v?"Detalhes":"Dados Pessoais",content:e.jsxs("div",{className:"dadosPessoaisTab",children:[e.jsxs("div",{className:"foto-client",children:[me&&e.jsx("img",{src:me,alt:"foto do cliente",style:{maxWidth:"100%",height:"auto"}}),e.jsx($r,{title:"Alterar foto do cliente",children:e.jsxs("div",{className:"upload-btn",children:[e.jsx(Lr,{overlay:pr,trigger:["click"],children:e.jsx(Z,{icon:e.jsx(zr,{})})}),e.jsx("input",{type:"file",id:"upload-photo",style:{display:"none"},accept:"image/png, image/jpeg",onChange:l=>{const p=l.target.files[0];p&&vt(p)}})]})})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nome:"})," ",e.jsx(be,{value:r.nome||x.nome,onChange:l=>Ne("nome",l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Data de Nascimento:"}),e.jsx(Ze,{mask:"99/99/9999",value:r.data_nascimento?He(r.data_nascimento):"",onChange:l=>ir(l.target.value),children:l=>e.jsx(be,{...l})})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Telefone:"}),e.jsx(Ze,{mask:"(99) 9 9999-9999",value:r.celular||x.celular,onChange:l=>Ne("celular",l.target.value),children:l=>e.jsx(be,{...l})})]}),e.jsxs("p",{children:[e.jsx("b",{children:"E-Mail:"})," ",e.jsx(be,{value:r.client_email,onChange:l=>cr(l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Plano:"})," ",e.jsx(be,{value:r.planodental,onChange:l=>Ne("planodental",l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Numero da Carteira do Plano:"})," ",e.jsx(be,{value:r.carteira,onChange:l=>Ne("carteira",l.target.value)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"CPF:"}),e.jsx(Ze,{mask:"999.999.999-99",value:r.cpf||x.cpf,onChange:l=>Ne("cpf",l.target.value),children:l=>e.jsx(be,{...l})})]}),!Fe&&e.jsx("p",{style:{color:"red"},children:ge}),e.jsx(Z,{onClick:Kt,type:"primary",disabled:!Fe,children:"Salvar"})]})]})},!v&&{key:"2",tab:"Histórico de Consultas",content:e.jsx(e.Fragment,{children:e.jsx(wt,{columns:Zt,dataSource:E,rowKey:"id"})})},{key:"3",tab:v?"Atestados":"Atestados e Receitas",content:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"atestados-botoes",children:[$e&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:ut,type:"primary",children:"Emitir Atestado"}),e.jsx(Z,{onClick:Vt,type:"primary",children:"Emitir Receita"})]}),e.jsx(Z,{onClick:Wt,type:"primary",children:"Emitir Declaração"})]}),e.jsxs(Oe,{title:"Emitir Atestado",visible:c,onCancel:ct,footer:[e.jsx(Z,{onClick:ct,children:"Cancelar"},"back"),e.jsx(Z,{type:"primary",onClick:ar,children:"Emitir"},"emit"),e.jsx(tt,{trigger:()=>e.jsx("button",{style:{display:"none"},children:"Print This Out"}),content:()=>s.current,ref:D})],children:[e.jsxs("p",{children:["Preencha os dados para emitir uma atestado ao paciente ",e.jsx("b",{children:x.nome})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Apartir de: "}),e.jsx(jt,{format:"DD/MM/YYYY",onChange:(l,p)=>ht("date",p)})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Quantidade de dias: "}),e.jsx(Br,{min:1,value:g.days,onChange:l=>ht("days",l)})]}),g.days>15&&e.jsx("p",{style:{color:"red"},children:"Para licenças médicas que ultrapassem 15 dias, oriente o paciente a procurar o INSS caso esteja sob regime de trabalho CLT."}),e.jsxs("p",{children:[e.jsxs("b",{children:["Motivo/CID ",e.jsx(Ur,{})]}),e.jsx(be,{value:g.reason,onChange:l=>nr(l.target.value),placeholder:"Pesquise a CID"})]}),ee.length>0&&e.jsx("ul",{className:"search-results-list",children:ee.map((l,p)=>e.jsxs("li",{onClick:()=>or(l),children:[l.description," (",l.code,")"]},p))})]}),e.jsxs(Oe,{title:"Emitir Declaração",visible:le,onCancel:()=>U(!1),footer:[e.jsx(Z,{onClick:()=>U(!1),children:"Cancelar"},"back"),e.jsx(Z,{type:"primary",onClick:sr,children:"Emitir Declaração"},"emit"),e.jsx(tt,{trigger:()=>e.jsx("button",{style:{display:"none"},children:"Print This Out"}),content:()=>i.current,ref:D})],children:[e.jsx("p",{children:"Selecione a data e o intervalo de horas para a declaração de comparecimento:"}),e.jsx("div",{style:{marginBottom:"10px"},children:e.jsx(jt,{format:"DD/MM/YYYY",onChange:(l,p)=>ae({...V,date:p}),placeholder:"Selecione a Data"})}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Ct,{format:"HH:mm",onChange:(l,p)=>ae({...V,startTime:p}),placeholder:"Hora de Início"}),e.jsx("div",{style:{marginLeft:"18px"},children:e.jsx(Ct,{format:"HH:mm",onChange:(l,p)=>{V.startTime&&!mr(V.startTime,p)?Qe.error({message:"A hora de fim não pode ser menor que a hora de início."}):ae({...V,endTime:p})},placeholder:"Hora de Fim"})})]})]}),e.jsxs(Oe,{title:"Emitir Receita",visible:Se,onCancel:dt,footer:[e.jsx(Z,{onClick:dt,children:"Cancelar"},"back"),e.jsx(tt,{trigger:()=>e.jsx(Z,{type:"primary",children:"Emitir Receita"}),content:()=>d.current})],children:[e.jsx("p",{children:"Insira os medicamentos:"}),se.medicamentos.map((l,p)=>e.jsx(be,{value:l,onChange:P=>Yt(p,P.target.value),style:{marginBottom:"10px"},addonAfter:se.medicamentos.length>1?e.jsx(Z,{type:"danger",onClick:()=>Gt(p),children:"Remover"}):null},p)),e.jsx(Z,{onClick:qt,children:"Adicionar Medicamento"})]})]})},!v&&{key:"4",tab:"Orçamentos",content:e.jsx(e.Fragment,{children:e.jsx("div",{className:"atestados-botoes",children:e.jsx(Z,{onClick:ut,children:"Novo Orçamento"})})})},{key:"5",tab:"Prontuário",content:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs(Z,{type:"primary",onClick:dr,style:{marginBottom:"16px"},children:[e.jsx(Hr,{}),"Adicionar Informações"]}),e.jsx(wt,{dataSource:R,columns:er})]})}].filter(Boolean);return e.jsxs("div",{className:"clienteDetails",children:[e.jsxs("h1",{children:["Detalhes do Cliente ",e.jsx(Qr,{})]}),e.jsx(Z,{onClick:Jt,type:"primary",children:"Voltar"}),e.jsx("div",{style:{display:"none"},children:e.jsx(hn,{qrCodeUrl:n,nome:r.nome,days:g.days,date:g.date,reason:g.reason,professionalId:L,ref:s})}),e.jsx("div",{style:{display:"none"},children:e.jsx(pn,{qrCodeUrl:n,nome:r.nome,date:V.date,startTime:V.startTime,endTime:V.endTime,professionalId:L,ref:i})}),e.jsx("div",{style:{display:"none"},children:e.jsx(gn,{nome:r.nome,medicamentos:se.medicamentos,professionalId:L,ref:d})}),e.jsx(Et,{defaultActiveKey:"1",type:"card",style:{margin:".5rem 0 0 0"},children:gr.map(l=>e.jsx(Et.TabPane,{tab:l.tab,children:l.content},l.key))}),e.jsxs(Oe,{title:"Autenticação do Profissional",visible:I,onCancel:mt,onOk:tr,okText:"Autenticar",cancelText:"Cancelar",children:[e.jsx("p",{children:"Atestados só podem ser emitidos por meio da senha definida pelo profissional em seu cadastro. Nunca compartilhe sua senha!"}),e.jsx(be,{placeholder:"Matrícula",name:"matricula",value:j.matricula,onChange:pt,style:{marginBottom:".6rem"}}),e.jsx(be.Password,{placeholder:"Senha",name:"senha",value:j.senha,onChange:pt}),e.jsx(Z,{type:"link",onClick:()=>Ke(!0),style:{marginTop:"1rem"},children:"Esqueci a senha 😥"})]}),e.jsxs(Oe,{title:"Prontuário Eletrônico 📝",open:X,onOk:rr,onCancel:ur,okText:"Salvar",cancelText:"Cancelar",width:650,children:[e.jsx("p",{children:"Aqui você pode inserir informações pertinentes ao Paciente."}),e.jsx(_t,{showSearch:!0,style:{width:"220px",marginBottom:"20px"},placeholder:"Selecione um profissional",onChange:hr,value:ce,children:ue.map(l=>e.jsx(_t.Option,{value:l.id,children:l.nome},l.id))}),e.jsx(be.TextArea,{rows:4,value:A,onChange:fr,placeholder:"Digite aqui as informações relevantes do paciente..."})]}),e.jsxs(Oe,{title:"Detalhes da Informção 📝",visible:Ye,onOk:()=>ie(!1),onCancel:()=>ie(!1),okText:"Fechar",cancelButtonProps:{style:{display:"none"}},children:[e.jsx("div",{className:"divider-line"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Paciente"})," ",r.nome]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Informação inserida por:"})," ",$.professional_name," em ",He($.date)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Informação Completa: "}),$.notes]}),e.jsx("div",{className:"divider-line"})]}),e.jsx(yn,{isOpenCameraModal:qe,onClose:()=>Ue(!1),onCapture:zt}),Ge&&e.jsx(Fr,{isResetDoctorModalVisible:Ge,onResetDoctorModalClose:()=>Ke(!1)})]})};export{fo as default};
