import{e as f,j as e,r,c as I}from"./index-BejUs57K.js";import{M as L}from"./index-BdGlfXDG.js";import{B as u}from"./context-B7EqC6Vo.js";import{I as b}from"./index-cvZCd3Op.js";import{m as h}from"./index-D-SSOORw.js";import{L as y}from"./LinkOutlined-DnMWMoln.js";import{S as D}from"./styles-DLXmhSxF.js";import{R as N,B,X as P,Y as R}from"./BarChart-CVaz4Axg.js";import{y as w,B as A}from"./generateCategoricalChart-B14N_GG8.js";import{T as O}from"./Table-B0LRilDu.js";import{L as T}from"./LineChartOutlined-BPsm7tSe.js";import{C as x}from"./CheckOutlined-B64fgD7x.js";import"./useSize-CRxPdOae.js";import"./AntdIcon-DoQ--mR6.js";import"./Serializer-CQbcCsmu.js";import"./render-CZhUZhp8.js";import"./ExclamationCircleFilled-BIgSFzZP.js";import"./InfoCircleFilled-D2xAbk3M.js";import"./index-DxMt6mpZ.js";import"./KeyCode-D4p1xH96.js";import"./PurePanel-CuzpRnpP.js";import"./useLocale-CC7fmsIl.js";import"./index-qNXZvFLH.js";import"./SearchOutlined-CMcZmJPM.js";import"./useNotification-Bpa0q6dt.js";import"./styled-components.browser.esm-BDisp2Ny.js";import"./debounce-CA5SkLMO.js";import"./index-0966CjeA.js";import"./index-DHdX90EX.js";import"./Overflow-KqVdY2pe.js";import"./useForceUpdate-BzwSizY0.js";import"./responsiveObserver-C1kZbN31.js";import"./index-CSSBfqr0.js";import"./EllipsisOutlined-DcztSy7B.js";import"./index-CfPvBrCp.js";import"./index-CTZ9fw7d.js";import"./index-DSRduNhO.js";import"./Dropdown-CqyrE61n.js";import"./index-9e_Hasjs.js";const M=({isResearchModalVisible:c,onResearchModalClose:t})=>{const{authData:a}=f(),m=a.companyID,o=()=>`${window.location.origin}/#/pesquisa-satisfacao/${m}`,s=()=>{navigator.clipboard.writeText(o()).then(()=>{h.success("Link copiado para a área de transferência!"),t()}).catch(p=>{h.error("Falha ao copiar o link."),console.error("Erro ao copiar o link:",p)})};return e.jsxs(L,{title:"Link da pesquisa para seus clientes !",open:c,onOk:s,onCancel:t,footer:[e.jsx(u,{type:"primary",onClick:s,children:"Copiar Link"},"copy"),e.jsx(u,{onClick:t,children:"Fechar"},"close")],children:[e.jsx("p",{children:"O link a seguir pode ser compartilhado com seus clientes para que eles realizem uma pesquisa de satisfação na escala NPS."}),e.jsxs("p",{children:[e.jsx(y,{})," Copie e compartilhe este link com seus clientes:"]}),e.jsx("p",{style:{color:"red"},children:"Caso queira o envio automático do link, contrate o Plano Premium."}),e.jsx(b,{value:o(),readOnly:!0})]})},E="/assets/nps-ByNDzI_O.png";function qe(){const[c,t]=r.useState([]),[a,m]=r.useState(0),[o,s]=r.useState(!1),{authData:p}=f(),l=p.companyID,j=r.useRef(null),g=({customers:d})=>{const i=[{title:"Nome do Cliente",dataIndex:"nome",key:"nome"},{title:"Telefone",dataIndex:"telefone",key:"telefone"},{title:"Nota",dataIndex:"nota",key:"nota"}];return e.jsx(O,{dataSource:d,columns:i,pagination:{pageSize:5}})};r.useEffect(()=>{(async()=>{try{const n=(await I.get(`nps-systems?company_id=${l}`)).data;t(n);const S=n.reduce((v,q)=>v+q.nota,0);m(n.length>0?S/n.length:0)}catch(i){console.error("There was an error fetching the customer data:",i)}})()},[l]);const k=[{name:"Média",value:a}],C=a<=6.5?"#ee3557":a<=8.5?"#58b4af":"#8ec63d";return e.jsxs(D,{children:[e.jsxs("h2",{children:["NPS: A métrica que sua clínica precisa para reter clientes ",e.jsx(T,{})]}),e.jsxs("p",{children:[e.jsx(x,{})," No botão abaixo você pode compartilhar o link da pesquisa com seus clientes."]}),e.jsxs("p",{children:[e.jsx(x,{})," Se você é um cliente Premiuim a pesquisa será enviada automaticamente"]}),e.jsxs(u,{style:{marginBottom:"50px"},type:"primary",onClick:()=>s(!0),children:[e.jsx(y,{})," Gerar Link da Pesquisa."]}),e.jsx("h3",{children:"Aqui está sua nota na escala NPS:"}),e.jsx("img",{src:E,alt:"escala nps com carinhas",ref:j,style:{width:"80%",height:"auto",margin:"1rem auto"}}),e.jsx("div",{style:{width:"80%",height:"110px",margin:"1rem auto"},children:e.jsx(N,{children:e.jsxs(B,{data:k,layout:"vertical",children:[e.jsx(P,{type:"number",domain:[0,10]}),e.jsx(R,{type:"category",dataKey:"name"}),e.jsx(w,{}),e.jsx(A,{dataKey:"value",fill:C})]})})}),e.jsx("h3",{children:"Aqui está os clientes que avaliaram:"}),e.jsx(g,{customers:c}),o&&e.jsx(M,{isResearchModalVisible:o,onResearchModalClose:()=>s(!1),companyID:l})]})}export{qe as default};
