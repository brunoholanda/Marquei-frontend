import{r as o,u as g,d as j,j as e,B as v}from"./index-xvO6EYLJ.js";/* empty css                      */import{I as d}from"./index-CedHbxzm.js";import{B as C}from"./context-DdBxAEa7.js";import{s as m}from"./index-aY9mIxQK.js";import{m as n}from"./index-BiTWdfWv.js";import{L as l}from"./LockOutlined-D0nT4oR-.js";import{C as y}from"./CheckOutlined-BkcGHlRB.js";import{C as N}from"./KeyCode-Buyvp17p.js";import"./AntdIcon-D_LLieO3.js";import"./useSize-6WP4OJO1.js";import"./render-DABMoBew.js";import"./SearchOutlined-2JrLTji_.js";import"./ExclamationCircleFilled-D1rgX5dR.js";import"./InfoCircleFilled-BPS8A9lc.js";import"./useNotification-CnkbSI_l.js";const P=({isCriteriaMet:r,text:t})=>e.jsxs("p",{className:r?"criteriaMet":"criteriaNotMet",children:[r?e.jsx(y,{style:{color:"green"}}):e.jsx(N,{style:{color:"red"}})," ",t]}),V=()=>{const[r,t]=o.useState(""),[i,p]=o.useState(""),h=g(),{token:u}=j(),[c,f]=o.useState({minLength:!1}),w=a=>{const s=a.target.value;f({minLength:s.length>=8}),t(s)},x=async()=>{if(!Object.values(c).every(s=>s)){m.success({message:"A senha não atende aos critérios necessários."});return}if(r!==i){n.error("As senhas não coincidem."),m.error({message:"As senhas não coincidem."});return}try{if((await fetch(`${v}/auth/reset-password-doctor`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:u,newPassword:r})})).ok)n.success("Senha redefinida com sucesso!"),h("/login");else throw new Error("Não foi possível redefinir a senha. Tente novamente.")}catch(s){n.error(s.message)}};return e.jsx("div",{className:"resetPassword",children:e.jsxs("div",{className:"resetPasswordContainer",children:[e.jsx("h2",{children:"Você esta redefinindo sua senha profissional"}),e.jsx("p",{children:"Essa senha serve para emitir atestados, receitas, declarações e mais..."}),e.jsx("p",{children:"A senha deve ser pessoal e intransferível"}),e.jsx(d,{prefix:e.jsx(l,{}),type:"password",placeholder:"Nova senha",value:r,onChange:w,required:!0}),e.jsx("div",{className:"passwordCriteria",children:e.jsx(P,{isCriteriaMet:c.minLength,text:"A senha deve conter pelo menos 8 dígitos"})}),e.jsx(d,{prefix:e.jsx(l,{}),type:"password",placeholder:"Confirme a nova senha",value:i,onChange:a=>p(a.target.value),required:!0}),e.jsx(C,{type:"primary",onClick:x,children:"Redefinir Senha"})]})})};export{V as default};
