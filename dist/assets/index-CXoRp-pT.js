import{e as f,j as e,r,c as I}from"./index-BQF3cPym.js";import{M as L}from"./index-Bb0wNoCb.js";import{B as u}from"./context-Fzf3q6Qk.js";import{I as b}from"./index-5ndGXuFb.js";import{m as h}from"./index-DCz0qyh3.js";import{L as y}from"./LinkOutlined-BQXMAeLy.js";import{S as D}from"./styles-DQ8C6fwY.js";import{R as N,B,X as P,Y as R}from"./BarChart-DewfmMiZ.js";import{y as w,B as A}from"./generateCategoricalChart-B_9svvKg.js";import{T as O}from"./Table-BtrjlE9_.js";import{L as T}from"./LineChartOutlined-mZdu9-Uj.js";import{C as x}from"./CheckOutlined-DTHRp8rd.js";import"./useSize-D_L_sEch.js";import"./AntdIcon-Bf-y5mt3.js";import"./Serializer-CQbcCsmu.js";import"./render-Evlt6hy1.js";import"./ExclamationCircleFilled-Cq3JtRsb.js";import"./InfoCircleFilled-9dsj_Nm8.js";import"./index-Zqv3mRLS.js";import"./KeyCode-Bfjm3k6b.js";import"./PurePanel-BVQW51Q3.js";import"./useLocale-DqFOwQe3.js";import"./index-BCWQvPtp.js";import"./SearchOutlined-D4A1T3K6.js";import"./useNotification-4XyWe70T.js";import"./styled-components.browser.esm-DBwtvTCP.js";import"./debounce-gq5DKlZz.js";import"./index-B5ADy5vq.js";import"./index-BiGWWT0_.js";import"./Overflow-C-Iz2ka9.js";import"./useForceUpdate-Cb-16ZfM.js";import"./responsiveObserver-BFwVCCVV.js";import"./index-DDs0x0Q4.js";import"./EllipsisOutlined-Cn-2e4jY.js";import"./index-BjuhNa7t.js";import"./index-D5pPztTr.js";import"./index-CsUWG4nD.js";import"./Dropdown-Dec2Znn0.js";import"./index-DN31wMcw.js";const M=({isResearchModalVisible:c,onResearchModalClose:t})=>{const{authData:a}=f(),m=a.companyID,o=()=>`${window.location.origin}/#/pesquisa-satisfacao/${m}`,s=()=>{navigator.clipboard.writeText(o()).then(()=>{h.success("Link copiado para a área de transferência!"),t()}).catch(p=>{h.error("Falha ao copiar o link."),console.error("Erro ao copiar o link:",p)})};return e.jsxs(L,{title:"Link da pesquisa para seus clientes !",open:c,onOk:s,onCancel:t,footer:[e.jsx(u,{type:"primary",onClick:s,children:"Copiar Link"},"copy"),e.jsx(u,{onClick:t,children:"Fechar"},"close")],children:[e.jsx("p",{children:"O link a seguir pode ser compartilhado com seus clientes para que eles realizem uma pesquisa de satisfação na escala NPS."}),e.jsxs("p",{children:[e.jsx(y,{})," Copie e compartilhe este link com seus clientes:"]}),e.jsx("p",{style:{color:"red"},children:"Caso queira o envio automático do link, contrate o Plano Premium."}),e.jsx(b,{value:o(),readOnly:!0})]})},E="/assets/nps-ByNDzI_O.png";function qe(){const[c,t]=r.useState([]),[a,m]=r.useState(0),[o,s]=r.useState(!1),{authData:p}=f(),l=p.companyID,j=r.useRef(null),g=({customers:d})=>{const i=[{title:"Nome do Cliente",dataIndex:"nome",key:"nome"},{title:"Telefone",dataIndex:"telefone",key:"telefone"},{title:"Nota",dataIndex:"nota",key:"nota"}];return e.jsx(O,{dataSource:d,columns:i,pagination:{pageSize:5}})};r.useEffect(()=>{(async()=>{try{const n=(await I.get(`nps-systems?company_id=${l}`)).data;t(n);const S=n.reduce((v,q)=>v+q.nota,0);m(n.length>0?S/n.length:0)}catch(i){console.error("There was an error fetching the customer data:",i)}})()},[l]);const k=[{name:"Média",value:a}],C=a<=6.5?"#ee3557":a<=8.5?"#58b4af":"#8ec63d";return e.jsxs(D,{children:[e.jsxs("h2",{children:["NPS: A métrica que sua clínica precisa para reter clientes ",e.jsx(T,{})]}),e.jsxs("p",{children:[e.jsx(x,{})," No botão abaixo você pode compartilhar o link da pesquisa com seus clientes."]}),e.jsxs("p",{children:[e.jsx(x,{})," Se você é um cliente Premiuim a pesquisa será enviada automaticamente"]}),e.jsxs(u,{style:{marginBottom:"50px"},type:"primary",onClick:()=>s(!0),children:[e.jsx(y,{})," Gerar Link da Pesquisa."]}),e.jsx("h3",{children:"Aqui está sua nota na escala NPS:"}),e.jsx("img",{src:E,alt:"escala nps com carinhas",ref:j,style:{width:"80%",height:"auto",margin:"1rem auto"}}),e.jsx("div",{style:{width:"80%",height:"110px",margin:"1rem auto"},children:e.jsx(N,{children:e.jsxs(B,{data:k,layout:"vertical",children:[e.jsx(P,{type:"number",domain:[0,10]}),e.jsx(R,{type:"category",dataKey:"name"}),e.jsx(w,{}),e.jsx(A,{dataKey:"value",fill:C})]})})}),e.jsx("h3",{children:"Aqui está os clientes que avaliaram:"}),e.jsx(g,{customers:c}),o&&e.jsx(M,{isResearchModalVisible:o,onResearchModalClose:()=>s(!1),companyID:l})]})}export{qe as default};
