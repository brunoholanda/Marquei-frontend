import{r as y,R as p,c as Ne,u as Ve,j as u}from"./index-kPzU05gx.js";import{a as ne}from"./api-p_bhudRe.js";import{a as $e,R as Me,b as _e,c as Oe}from"./styles-Bsoeu2mD.js";import{B as le}from"./index-BSp-sa5F.js";import{R as ke}from"./index-BHFLF1lE.js";import{F as N}from"./index-COTnBvfG.js";import{I as se}from"./index-DdU0LtvV.js";import{M as De}from"./index-DmsyNvo6.js";import{A as Le,_ as ue,c as z,b as Te,e as M,f as ie}from"./AntdIcon-rDAQJIgd.js";import{E as ce,g as Pe,m as Be,r as Ke,u as Ae,C as ze}from"./useSize-Dir-JjEK.js";import{K as _}from"./KeyCode-Bp2GxRS5.js";import{p as qe}from"./PurePanel-DZZoC6Qu.js";import{T as We}from"./index-DSAf5tNC.js";import{s as A}from"./index-DkzRl__G.js";import"./styled-components.browser.esm-BWH_c5t_.js";import"./Serializer-CQbcCsmu.js";import"./index-DvbXQ1GL.js";import"./context-Cu6KQni0.js";import"./render-CJmks47J.js";import"./useForm-sTvtv3Iy.js";import"./row-BdR9_GnZ.js";import"./responsiveObserver-BuWZJpCK.js";import"./useLocale-D_rXO8QB.js";import"./ExclamationCircleFilled-C5haNHtp.js";import"./SearchOutlined-BKygTbfa.js";import"./InfoCircleFilled-aimHxtz3.js";import"./context-Cq6TeAM8.js";var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const Ge=Xe;var Je=function(t,r){return y.createElement(Le,ue({},t,{ref:r,icon:Ge}))};const Qe=y.forwardRef(Je);function Ue(e,t){var r=e.disabled,a=e.prefixCls,n=e.character,h=e.characterRender,s=e.index,d=e.count,g=e.value,C=e.allowHalf,c=e.focused,f=e.onHover,m=e.onClick,E=function(j){f(j,s)},F=function(j){m(j,s)},V=function(j){j.keyCode===_.ENTER&&m(j,s)},R=s+1,i=new Set([a]);g===0&&s===0&&c?i.add("".concat(a,"-focused")):C&&g+.5>=R&&g<R?(i.add("".concat(a,"-half")),i.add("".concat(a,"-active")),c&&i.add("".concat(a,"-focused"))):(R<=g?i.add("".concat(a,"-full")):i.add("".concat(a,"-zero")),R===g&&c&&i.add("".concat(a,"-focused")));var w=typeof n=="function"?n(e):n,S=p.createElement("li",{className:z(Array.from(i)),ref:t},p.createElement("div",{onClick:r?null:F,onKeyDown:r?null:V,onMouseMove:r?null:E,role:"radio","aria-checked":g>s?"true":"false","aria-posinset":s+1,"aria-setsize":d,tabIndex:r?-1:0},p.createElement("div",{className:"".concat(a,"-first")},w),p.createElement("div",{className:"".concat(a,"-second")},w)));return h&&(S=h(S,e)),S}const Ye=p.forwardRef(Ue);function Ze(){var e=y.useRef({});function t(a){return e.current[a]}function r(a){return function(n){e.current[a]=n}}return[t,r]}function ea(e){var t=e.pageXOffset,r="scrollLeft";if(typeof t!="number"){var a=e.document;t=a.documentElement[r],typeof t!="number"&&(t=a.body[r])}return t}function aa(e){var t,r,a=e.ownerDocument,n=a.body,h=a&&a.documentElement,s=e.getBoundingClientRect();return t=s.left,r=s.top,t-=h.clientLeft||n.clientLeft||0,r-=h.clientTop||n.clientTop||0,{left:t,top:r}}function ta(e){var t=aa(e),r=e.ownerDocument,a=r.defaultView||r.parentWindow;return t.left+=ea(a),t.left}var ra=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function oa(e,t){var r,a=e.prefixCls,n=a===void 0?"rc-rate":a,h=e.className,s=e.defaultValue,d=e.value,g=e.count,C=g===void 0?5:g,c=e.allowHalf,f=c===void 0?!1:c,m=e.allowClear,E=m===void 0?!0:m,F=e.character,V=F===void 0?"â˜…":F,R=e.characterRender,i=e.disabled,w=e.direction,S=w===void 0?"ltr":w,I=e.tabIndex,j=I===void 0?0:I,de=e.autoFocus,H=e.onHoverChange,O=e.onChange,k=e.onFocus,D=e.onBlur,L=e.onKeyDown,T=e.onMouseLeave,fe=Te(e,ra),me=Ze(),q=M(me,2),ve=q[0],he=q[1],P=p.useRef(null),W=function(){if(!i){var o;(o=P.current)===null||o===void 0||o.focus()}};p.useImperativeHandle(t,function(){return{focus:W,blur:function(){if(!i){var o;(o=P.current)===null||o===void 0||o.blur()}}}});var ge=ce(s||0,{value:d}),X=M(ge,2),B=X[0],pe=X[1],ye=ce(null),G=M(ye,2),Ce=G[0],K=G[1],J=function(o,x){var v=S==="rtl",l=o+1;if(f){var te=ve(o),re=ta(te),oe=te.clientWidth;(v&&x-re>oe/2||!v&&x-re<oe/2)&&(l-=.5)}return l},$=function(o){pe(o),O==null||O(o)},be=p.useState(!1),Q=M(be,2),xe=Q[0],U=Q[1],Se=function(){U(!0),k==null||k()},Re=function(){U(!1),D==null||D()},we=p.useState(null),Y=M(we,2),Z=Y[0],ee=Y[1],je=function(o,x){var v=J(x,o.pageX);v!==Ce&&(ee(v),K(null)),H==null||H(v)},ae=function(o){i||(ee(null),K(null),H==null||H(void 0)),o&&(T==null||T(o))},Ie=function(o,x){var v=J(x,o.pageX),l=!1;E&&(l=v===B),ae(),$(l?0:v),K(l?v:null)},Ee=function(o){var x=o.keyCode,v=S==="rtl",l=B;x===_.RIGHT&&l<C&&!v?(f?l+=.5:l+=1,$(l),o.preventDefault()):x===_.LEFT&&l>0&&!v||x===_.RIGHT&&l>0&&v?(f?l-=.5:l-=1,$(l),o.preventDefault()):x===_.LEFT&&l<C&&v&&(f?l+=.5:l+=1,$(l),o.preventDefault()),L==null||L(o)};p.useEffect(function(){de&&!i&&W()},[]);var Fe=new Array(C).fill(0).map(function(b,o){return p.createElement(Ye,{ref:he(o),index:o,count:C,disabled:i,prefixCls:"".concat(n,"-star"),allowHalf:f,value:Z===null?B:Z,onClick:Ie,onHover:je,key:b||o,character:V,characterRender:R,focused:xe})}),He=z(n,h,(r={},ie(r,"".concat(n,"-disabled"),i),ie(r,"".concat(n,"-rtl"),S==="rtl"),r));return p.createElement("ul",ue({className:He,onMouseLeave:ae,tabIndex:i?-1:j,onFocus:i?null:Se,onBlur:i?null:Re,onKeyDown:i?null:Ee,ref:P,role:"radiogroup"},qe(fe,{aria:!0,data:!0,attr:!0})),Fe)}const na=p.forwardRef(oa),la=e=>{const{componentCls:t}=e;return{[`${t}-star`]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:`all ${e.motionDurationMid}, outline 0s`,"&:hover":{transform:e.starHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:`${Ae(e.lineWidth)} dashed ${e.starColor}`,transform:e.starHoverScale}},"&-first, &-second":{color:e.starBg,transition:`all ${e.motionDurationMid}`,userSelect:"none"},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},[`&-half ${t}-star-first, &-half ${t}-star-second`]:{opacity:1},[`&-half ${t}-star-first, &-full ${t}-star-second`]:{color:"inherit"}}}},sa=e=>({[`&-rtl${e.componentCls}`]:{direction:"rtl"}}),ia=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Ke(e)),{display:"inline-block",margin:0,padding:0,color:e.starColor,fontSize:e.starSize,lineHeight:1,listStyle:"none",outline:"none",[`&-disabled${t} ${t}-star`]:{cursor:"default","> div:hover":{transform:"scale(1)"}}}),la(e)),sa(e))}},ca=e=>({starColor:e.yellow6,starSize:e.controlHeightLG*.5,starHoverScale:"scale(1.1)",starBg:e.colorFillContent}),ua=Pe("Rate",e=>{const t=Be(e,{});return[ia(t)]},ca);var da=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};const fa=y.forwardRef((e,t)=>{const{prefixCls:r,className:a,rootClassName:n,style:h,tooltips:s,character:d=y.createElement(Qe,null)}=e,g=da(e,["prefixCls","className","rootClassName","style","tooltips","character"]),C=(w,S)=>{let{index:I}=S;return s?y.createElement(We,{title:s[I]},w):w},{getPrefixCls:c,direction:f,rate:m}=y.useContext(ze),E=c("rate",r),[F,V,R]=ua(E),i=Object.assign(Object.assign({},m==null?void 0:m.style),h);return F(y.createElement(na,Object.assign({ref:t,character:d,characterRender:C},g,{className:z(a,n,V,R,m==null?void 0:m.className),style:i,prefixCls:E,direction:f})))}),ma=fa;function va({count:e,onChange:t,value:r}){const[a,n]=y.useState(r||0),h=s=>{let d=s-1;d<0&&(d=0),s===1&&a===0&&(d=-1),n(d),t&&t(d>=0?d:null)};return u.jsxs(Me,{children:[u.jsx(ma,{count:e,onChange:h,value:a>=0?a+1:0}),u.jsx(_e,{children:Array.from({length:e},(s,d)=>u.jsx(Oe,{children:d},d))})]})}function Ka(){const{company_id:e}=Ne(),[t]=N.useForm(),[r,a]=y.useState(""),[n,h]=y.useState(!1),s=Ve(),d=c=>c?c.replace(/[^\d]/g,""):"";y.useEffect(()=>{(async()=>{try{const f=await ne.get(`/companies-by-id/${e}`);a(f.data.nome)}catch(f){console.error("Erro ao buscar detalhes da empresa:",f),A.error({message:"Erro ao Buscar Empresa",description:"NÃ£o foi possÃ­vel buscar os detalhes da empresa. Tente novamente mais tarde."})}})()},[e]);const g=c=>{const f={...c,telefone:d(c.telefone)};ne.post("nps-systems",{...f,company_id:e}).then(m=>{t.resetFields(),h(!0),A.success({message:"Feedback Enviado",description:"Agradecemos pelo seu feedback!"})}).catch(m=>{A.error({message:"Erro no Envio",description:"NÃ£o foi possÃ­vel enviar o seu feedback. Tente novamente mais tarde."}),console.error("There was an error submitting the form:",m)})},C=()=>{h(!1),s("/")};return u.jsxs($e,{children:[u.jsxs("h2",{children:["Em uma escala de 0 a 10, o quanto vocÃª recomendaria ",r||"a Empresa"," para um amigo ou colega?"]}),u.jsxs(N,{form:t,onFinish:g,layout:"vertical",className:"pesquisa-form",children:[u.jsx(N.Item,{name:"nome",label:"Nome",rules:[{required:!0,message:"Por favor, insira seu nome!"}],children:u.jsx(se,{placeholder:"Digite seu nome"})}),u.jsx(N.Item,{name:"telefone",label:"Telefone (Opcional)",children:u.jsx(ke,{mask:"(99) 9 9999-9999",maskChar:null,children:c=>u.jsx(se,{...c})})}),u.jsx(N.Item,{name:"nota",label:"Nota",rules:[{required:!0,message:"Por favor, avalie de 0 a 10!"}],children:u.jsx(va,{count:11,onChange:c=>t.setFieldsValue({nota:c})})}),u.jsx(N.Item,{children:u.jsx(le,{htmlType:"submit",children:"Enviar Feedback"})})]}),u.jsxs(De,{title:"Feedback Recebido!",open:n,onOk:C,cancelButtonProps:{style:{display:"none"}},footer:null,children:[u.jsx("p",{children:"Seu feedback foi enviado com sucesso. Agradecemos pela sua contribuiÃ§Ã£o!"}),u.jsx(le,{style:{textAlign:"center",width:"100%",marginTop:"1rem"},type:"primary",onClick:C,children:"ConheÃ§a o Marquei ðŸ˜ƒ"})]})]})}export{Ka as default};
